const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/xterm.Hhca3RVZ.js","_astro/_commonjsHelpers.CqkleIqs.js","_astro/addon-fit.DhMrcXl2.js"])))=>i.map(i=>d[i]);
import{o as Te,i as je,b as Ne,_ as f,w as Ye,l as Ze,c as Ve,s as Re,a as et,d as Ae}from"./router.qopiDDf4.js";import{C as tt,t as nt,y as Be,D as ve,E as te,F as d,G as ze,I as ee,B as Me,J as fe,K as We,L as De,M as le,N as $e,O as ae,P as Se,Q as ot,R as st}from"./template.Cu96Qf88.js";/* empty css                        */function Fe(p,c,_){var l=tt(p,c);l&&l.set&&(p[c]=_,nt(()=>{p[c]=null}))}function rt(p){const c={name:"/",type:"dir",path:"/",children:{}};for(const _ of p){const k=_.replace(/^\.\/?/,"").split("/");let u=c,b="";for(let O=0;O<k.length;O++){const $=k[O];b+="/"+$;const j=$.includes(".");u.children||(u.children={}),u.children[$]||(u.children[$]={name:$,type:j?"file":"dir",path:b},j||(u.children[$].children={})),u=u.children[$]}}return c}const it=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/contests/about.md":0,"/src/content/algo/contests/arc-205.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-1967c.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2056f2.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/about.md":0,"/src/content/misc/void.md":0});let we=null;function ct(){if(we)return we;const p=it.map(c=>c.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return we=rt(p),we}function ye(p){const c=p.split("/").filter(Boolean);let _=ct();for(const l of c){if(!_.children||!_.children[l])return null;_=_.children[l]}return _}function de(p){const c=ye(p);if(!c||c.type!=="dir"||!c.children)return null;const _=[],l=[];for(const[k,u]of Object.entries(c.children))u.type==="dir"?_.push(k):l.push(k);return _.sort(),l.sort(),[..._,...l]}function Le(p){const c=ye(p);return!!c&&c.type==="file"}function B(p){const c=ye(p);return!!c&&c.type==="dir"}function Z(p,c){if(c==="/")return[];const _=c.startsWith("/"),l=c.split("/").filter(Boolean),k=_?[]:[...p];for(const b of l)b===".."?k.pop():b!=="."&&k.push(b);return ye("/"+k.join("/"))?k:null}var lt=ve("<div></div>");function at(p,c){Be(c,!1);const l="\x1B[38;2;100;255;218m",u="\x1B[38;2;255;230;120m",b="\x1B[37m";let O=fe(),$=fe(!0),j,J;function ue(){j?.focus()}function me(){J?.fit()}const ke=Object.assign({"/src/content/about.md":()=>f(()=>import("./about.BKDt97ao.js"),[]).then(t=>t.default),"/src/content/algo/about.md":()=>f(()=>import("./about.Cl4aM1CR.js"),[]).then(t=>t.default),"/src/content/algo/contests/about.md":()=>f(()=>import("./about.CwVw_yme.js"),[]).then(t=>t.default),"/src/content/algo/contests/arc-205.md":()=>f(()=>import("./arc-205.OO4vL-PK.js"),[]).then(t=>t.default),"/src/content/algo/notes/about.md":()=>f(()=>import("./about.QR_UVAKY.js"),[]).then(t=>t.default),"/src/content/algo/problems/about.md":()=>f(()=>import("./about.DmETiz7C.js"),[]).then(t=>t.default),"/src/content/algo/problems/cf-1967c.md":()=>f(()=>import("./cf-1967c.DR4BvroR.js"),[]).then(t=>t.default),"/src/content/algo/problems/cf-2056f1.md":()=>f(()=>import("./cf-2056f1.uryPofdA.js"),[]).then(t=>t.default),"/src/content/algo/problems/cf-2056f2.md":()=>f(()=>import("./cf-2056f2.5CJYskyK.js"),[]).then(t=>t.default),"/src/content/algo/problems/cf-2113e.md":()=>f(()=>import("./cf-2113e.Cl8UtRBg.js"),[]).then(t=>t.default),"/src/content/algo/problems/cf-468d.md":()=>f(()=>import("./cf-468d.BGfZYA_9.js"),[]).then(t=>t.default),"/src/content/algo/theory/about.md":()=>f(()=>import("./about.ME4M5TEQ.js"),[]).then(t=>t.default),"/src/content/algo/theory/detect_k_neighbours_bip.md":()=>f(()=>import("./detect_k_neighbours_bip.CvHLfjDS.js"),[]).then(t=>t.default),"/src/content/algo/theory/offline_incremental_scc.md":()=>f(()=>import("./offline_incremental_scc.DjERIihu.js"),[]).then(t=>t.default),"/src/content/algo/theory/suffix_tree_funny_construction.md":()=>f(()=>import("./suffix_tree_funny_construction.w2_kFUV8.js"),[]).then(t=>t.default),"/src/content/games/about.md":()=>f(()=>import("./about.DNWgHey0.js"),[]).then(t=>t.default),"/src/content/home.md":()=>f(()=>import("./home.BVtvl0rF.js"),[]).then(t=>t.default),"/src/content/misc/about.md":()=>f(()=>import("./about.CPXu2YT5.js"),[]).then(t=>t.default),"/src/content/misc/void.md":()=>f(()=>import("./void.DsDRx8Cu.js"),[]).then(t=>t.default)});let Q={};function W(t){const n=Q[t];return typeof n=="number"&&Number.isFinite(n)?n:1/0}const G={};function X(t,n){const e=G[t];if(e&&(n?e.max!==void 0:e.min!==void 0))return n?typeof e.max=="number"?e.max:-1/0:typeof e.min=="number"?e.min:1/0;let g=n?-1/0:1/0;const T=de(t)||[];for(const x of T){const L=t==="/"?"/"+x:`${t}/${x}`;let E;B(L)?E=X(L,n):L.endsWith(".html")?E=W(L):E=n?-1/0:1/0,g=n?Math.max(g,E):Math.min(g,E)}return G[t]||(G[t]={}),n?G[t].max=g:G[t].min=g,g}function Y(t,n,e){const g=e==="desc";return[...n].sort((T,x)=>{const L=t==="/"?"/"+T:`${t}/${T}`,E=t==="/"?"/"+x:`${t}/${x}`;let R=B(L)?X(L,g):W(L),H=B(E)?X(E,g):W(E);Number.isFinite(R)||(R=g?-1/0:1/0),Number.isFinite(H)||(H=g?-1/0:1/0);const A=g?H-R:R-H;return A===0?T.localeCompare(x):A})}async function he(t){const n=t.replace(/^\//,"").replace(/\.html$/,".md"),e=ke["/src/content/"+n];if(!e)return null;try{return await e()}catch{return null}}let ne;Te(async()=>{te($,!0),fetch("/terminal-index.json").then(s=>s.ok?s.json():{}).then(s=>{Q=s||{}}).catch(()=>{Q={}});const{Terminal:t}=await f(async()=>{const{Terminal:s}=await import("./xterm.Hhca3RVZ.js").then(r=>r.x);return{Terminal:s}},__vite__mapDeps([0,1])),{FitAddon:n}=await f(async()=>{const{FitAddon:s}=await import("./addon-fit.DhMrcXl2.js").then(r=>r.a);return{FitAddon:s}},__vite__mapDeps([2,1])),e=new t({theme:{background:"#0f0f0f",foreground:"#d0d0d0",cursor:"rgb(100,255,218)"},fontFamily:"IBM Plex Mono, Menlo, monospace",fontSize:13,letterSpacing:.25,cols:80,rows:24,convertEol:!0}),g=new n;J=g,e.loadAddon(g),e.open(d(O)),j=e,g.fit(),e.focus();function T(s){te($,s)}e.textarea?.addEventListener("focus",()=>T(!0)),e.textarea?.addEventListener("blur",()=>T(!1));let x=[],L=["/"],E=[],R=0,H="",A="";const Ge=["ls","cd","open","pop","clear","help","grep","skin","skins"];let K=[],pe=0,U=!1,oe="";const _e=()=>{const s="/"+x.join("/");e.write(`${l}${s}\x1B[0m $ `)};async function He(s){if(!s)return;const[r,...a]=s.split(/\s+/);switch(r){case"ls":{const o=a.filter(y=>y.startsWith("-")),m=o.includes("-R")||o.includes("-r"),v=o.includes("-v"),I=a.find(y=>!y.startsWith("-"))||".",C=Z(x,I);if(!C){e.writeln(`ls: cannot access '${I}': No such file or directory`);break}const V="/"+C.join("/");if(Le(V)){e.writeln(`${B(V)?b:u}${I}\x1B[0m`);break}const P=o.includes("-d")||o.includes("-dl"),N=o.includes("-de"),M=P?"desc":N?"asc":null;if(m){const y=[],h=(D,S="")=>{let F="/"+D.join("/"),q=de(F)||[];M&&(q=Y(F,q,M)),q.forEach((ie,Ee)=>{const ce=Ee===q.length-1,be=ce?"└─ ":"├─ ",Ie=[...D,ie],Oe="/"+Ie.join("/"),xe=B(Oe),Xe=xe?b:u;let Ce="";if(v&&!xe){const ge=W(Oe);Number.isFinite(ge)&&(Ce=`\x1B[2m[${new Date(ge).toISOString().slice(0,10)}]\x1B[0m `)}if(y.push(`${S}${be}${Ce}${Xe}${ie}\x1B[0m`),xe){const ge=S+(ce?"   ":"│  ");h(Ie,ge)}})};h(C);for(const D of y)e.writeln(D)}else{let y=de(V)||[];M&&(y=Y(V,y,M)),y.forEach((h,D)=>{const F=D===y.length-1?"└─ ":"├─ ",q=`${V}/${h}`,ie=B(q),Ee=ie?b:u;let ce="";if(v&&!ie){const be=W(q.replace(/\.md$/,".html"));Number.isFinite(be)&&(ce=`\x1B[2m[${new Date(be).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${F}${ce}${Ee}${h}\x1B[0m`)})}break}case"cd":{const o=a[0]||"/",m=Z(x,o);if(!m){e.writeln(`cd: no such directory: ${o}`);break}const v="/"+m.join("/");if(!B(v)){e.writeln(`cd: not a directory: ${o}`);break}x=m;break}case"open":{const o=a[0];if(!o){e.writeln("open: missing file");break}const m=Z(x,o);if(m&&Le("/"+m.join("/"))){const v="/"+m.join("/");L.push(v),Ve.push(v)}else e.writeln(`open: file not found: ${o}`);break}case"pop":{if(L.length>1){L.pop();const o=L[L.length-1];Ve.push(o)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const o=Ze();o.forEach((m,v)=>{const I=v===o.length-1?"└─ ":"├─ ";e.writeln(I+m)});break}case"skin":{const o=a[0];if(!o)e.writeln("Usage: skin <name>");else try{Ye(o),e.writeln(`Now wearing ${o}`)}catch(m){e.writeln(String(m))}break}case"grep":{if(!a.length){e.writeln("grep: usage: grep <pattern> [path]");break}let o=null;if(a.length>1){const h=a[a.length-1];Z(x,h)&&(o=h,a.pop())}const m=a.join(" ").replace(/^"|"$/g,""),v=o??".",I=Z(x,v);if(!I){e.writeln(`grep: ${v}: No such file or directory`);break}const C="/"+I.join("/"),V=[],P=h=>{if(Le(h)&&h.endsWith(".html")){V.push(h);return}B(h)&&(de(h)||[]).forEach(S=>{const F=h==="/"?"/"+S:`${h}/${S}`;P(F)})};P(C);const N=[];for(const h of V){const D=await he(h);D&&D.split(`
`).forEach((S,F)=>{N.push({line:S,file:h,lineNum:F+1})})}if(!ne){const{default:h}=await f(async()=>{const{default:D}=await import("./fuse.CvLDeDq6.js");return{default:D}},[]);ne=h}const y=new ne(N,{keys:["line"],threshold:.4,ignoreLocation:!0,includeScore:!1}).search(m).slice(0,100);y.length?(y.forEach(h=>{const{file:D,lineNum:S,line:F}=h.item;e.writeln(`${u}${D}\x1B[0m:${S}:${F.trim()}`)}),e.writeln(`${y.length} match${y.length===1?"":"es"}`)):e.writeln("grep: no matches");break}case"help":{const o=(I,C)=>I+" ".repeat(Math.max(0,C-I.length)),m=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"grep <pattern> [path]",desc:"fuzzy search markdown files"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${l}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:I,desc:C}of m)e.writeln(`${u}${o(I,14)}\x1B[0m  ${C}`);e.writeln(""),e.writeln(`${l}SHORTCUT        DESCRIPTION\x1B[0m`);const v=[{key:"Tab",desc:"accept autocomplete"},{key:"← / →",desc:"cycle suggestions"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:I,desc:C}of v)e.writeln(`${u}${o(I,14)}\x1B[0m  ${C}`);break}default:e.writeln(`unknown command: ${r}`),e.write("\r")}}function se(){U&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),U=!1,oe="")}function Pe(s){se(),s&&(e.write("\x1B[s"),e.write(`\x1B[90m${s}\x1B[0m`),e.write("\x1B[u"),U=!0,oe=s)}function Ke(s){return Ge.filter(r=>r.startsWith(s))}function Ue(s){const r=s.lastIndexOf("/"),a=r===-1?"":s.slice(0,r+1),o=r===-1?s:s.slice(r+1),m=Z(x,a||".");if(!m)return[];const v="/"+m.join("/"),V=(de(v)||[]).filter(P=>P.startsWith(o)).map(P=>{const N=`${v}/${P}`;return a+(B(N)?P+"/":P)});return V.sort((P,N)=>{const M=P.endsWith("/"),y=N.endsWith("/");return M===y?P.localeCompare(N):M?-1:1}),V.slice(0,20)}function re(){const s=A.split(/\s+/),r=s[0]||"",a=s[s.length-1]||"";let o=[];if(s.length===1?o=Ke(a):["cd","ls","open","grep"].includes(r)&&(o=Ue(a)),K=o,pe=0,K.length){const v=K[0].slice(a.length);Pe(v)}}function qe(){!U||!oe||(A+=oe,e.write(oe),se())}function Je(s){if(!U||K.length<2)return;pe=(pe+s+K.length)%K.length;const r=A.split(/\s+/),a=r[r.length-1]||"",m=K[pe].slice(a.length);Pe(m)}let z="";const Qe=async s=>{for(const r of s){const a=r.charCodeAt(0);if(z){if(z+=r,z==="\x1B[C"||z==="\x1B[D"){z="";continue}else z.length>=3&&(z="");continue}if(r==="\x1B"){z="\x1B";continue}switch(a){case 9:{qe(),re();break}case 13:{e.write(`\r
`);const o=A.trim();await He(o),o&&E.push(o),R=E.length,A="",o==="clear"||e.write(`\r
`),_e();break}case 127:{A.length&&(A=A.slice(0,-1),e.write("\b \b")),re();break}default:a>=32&&a<127&&(se(),A+=r,e.write(r),re())}}};re(),e.onData(Qe),e.onKey(({key:s,domEvent:r})=>{if(r.key==="ArrowUp"||r.key==="ArrowDown"){if(r.preventDefault(),!E.length)return;R===E.length&&(H=A),r.key==="ArrowUp"&&R>0?R--:r.key==="ArrowDown"&&R<E.length&&R++;const a=R===E.length?H:E[R];e.write("\x1B[2K\r"),_e(),A=a,e.write(A),se(),re();return}U&&(r.key==="ArrowRight"||r.key==="ArrowLeft")?(r.preventDefault(),Je(r.key==="ArrowRight"?1:-1)):U&&!["Tab","Shift","Control","Alt","Meta","ArrowRight","ArrowLeft"].includes(r.key)&&se()}),e.writeln("Type help for command list."),_e()}),je();var i=lt();let w;return Ne(i,t=>te(O,t),()=>d(O)),ze(t=>w=Re(i,1,"terminal-shell h-full w-full svelte-1asehid",null,w,t),[()=>({focused:d($)})],We),ee(p,i),Fe(c,"focusTerminal",ue),Fe(c,"resizeTerminal",me),Me({focusTerminal:ue,resizeTerminal:me})}var dt=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-twihms">terminal</span>',1),ft=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Collapse terminal">▶</button>'),ut=ve('<div><div class="md:hidden flex items-center justify-between px-3 py-2 border-b border-zinc-700"><span class="font-mono text-xs text-zinc-400">terminal</span> <button class="text-zinc-300" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function bt(p,c){Be(c,!1);const _=et(!1);Te(()=>{const i=sessionStorage.getItem("terminalCollapsed");i?_.set(i==="true"):window.innerWidth<768&&(_.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let l=fe(!1);_.subscribe(i=>te(l,i));function k(){_.update(i=>{const w=!i;return sessionStorage.setItem("terminalCollapsed",w.toString()),w||setTimeout(()=>{d(b)&&d(u)?.resizeTerminal(),d(u)?.focusTerminal()},300),w})}let u=fe(),b=fe(!1);Te(()=>{try{f(()=>import("./xterm.Hhca3RVZ.js").then(n=>n.x),__vite__mapDeps([0,1]))}catch{}try{f(()=>import("./addon-fit.DhMrcXl2.js").then(n=>n.a),__vite__mapDeps([2,1]))}catch{}const i=()=>{te(b,window.innerWidth<768)},w=n=>{if(!(d(b)||!n.shiftKey)){if(n.key==="ArrowRight"&&!d(l))n.preventDefault(),n.stopImmediatePropagation(),k();else if(n.key==="ArrowLeft")d(l)?(n.preventDefault(),n.stopImmediatePropagation(),k()):(n.preventDefault(),n.stopImmediatePropagation(),d(u)?.focusTerminal());else if(n.key==="ArrowUp"&&!d(l)){n.preventDefault(),n.stopImmediatePropagation();const e=document.activeElement;e&&e.blur()}}};i(),window.addEventListener("resize",i),window.addEventListener("keydown",w,!0);const t=n=>{if(d(b))return;const e=document.activeElement;if(e&&e.classList.contains("xterm-helper-textarea"))return;const g=document.querySelector("main"),T=60;switch(n.key){case"j":(g??window).scrollBy({top:2*T,behavior:"smooth"});break;case"k":(g??window).scrollBy({top:-2*T,behavior:"smooth"});break;case"h":(g??window).scrollBy({left:-T,behavior:"smooth"});break;case"l":(g??window).scrollBy({left:T,behavior:"smooth"});break;default:return}n.preventDefault()};return window.addEventListener("keydown",t),()=>{window.removeEventListener("resize",i),window.removeEventListener("keydown",w,!0),window.removeEventListener("keydown",t)}}),je();var O=ut();let $;var j=le(O),J=$e(le(j),2),ue=le(J);{var me=i=>{var w=Se("▼");ee(i,w)},ke=i=>{var w=Se("▲");ee(i,w)};Ae(ue,i=>{d(l)?i(me):i(ke,!1)})}ae(J),ae(j);var Q=$e(j,2);{var W=i=>{var w=dt(),t=ot(w);st(2),De("click",t,k),ee(i,w)},G=(i,w)=>{{var t=n=>{var e=ft();De("click",e,k),ee(n,e)};Ae(i,n=>{d(b)||n(t)},w)}};Ae(Q,i=>{!d(b)&&d(l)?i(W):i(G,!1)})}var X=$e(Q,2),Y=le(X);let he;var ne=le(Y);Ne(at(ne,{$$legacy:!0}),i=>te(u,i),()=>d(u)),ae(Y),ae(X),ae(O),ze((i,w)=>{$=Re(O,1,"h-full flex flex-col bg-zinc-900 desktop-wrapper svelte-twihms",null,$,i),he=Re(Y,1,"terminal-content body svelte-twihms",null,he,w)},[()=>({"desktop-collapsed":!d(b)&&d(l),"border-b":d(b)&&!d(l),"border-zinc-700":d(b)&&!d(l)}),()=>({"mobile-collapsed":d(b)&&d(l)})],We),De("click",J,k),ee(p,O),Me()}export{bt as default};
