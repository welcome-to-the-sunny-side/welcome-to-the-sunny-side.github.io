import{o as De,i as Ee,b as Me,_ as Pe,w as et,l as tt,c as Be,s as Ce,a as nt,d as _e}from"./router.C-4rq7JE.js";import{C as st,t as it,y as Ne,D as ge,E as U,F as g,G as We,I as V,B as qe,J as oe,K as ze,L as $e,M as se,N as Ie,O as ie,P as Oe,Q as ot,R as rt}from"./template.WFYKrgdx.js";/* empty css                        */function Re(b,o,p){var c=st(b,o);c&&c.set&&(b[o]=p,it(()=>{b[o]=null}))}function lt(b){const o={name:"/",type:"dir",path:"/",children:{}};for(const p of b){const x=p.replace(/^\.\/?/,"").split("/");let u=o,w="";for(let A=0;A<x.length;A++){const $=x[A];w+="/"+$;const L=$.includes(".");u.children||(u.children={}),u.children[$]||(u.children[$]={name:$,type:L?"file":"dir",path:w},L||(u.children[$].children={})),u=u.children[$]}}return o}const ct=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/contests/about.md":0,"/src/content/algo/contests/arc-205.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-1967c.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2056f2.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/about.md":0,"/src/content/misc/void.md":0});let me=null;function at(){if(me)return me;const b=ct.map(o=>o.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return me=lt(b),me}function we(b){const o=b.split("/").filter(Boolean);let p=at();for(const c of o){if(!p.children||!p.children[c])return null;p=p.children[c]}return p}function be(b){const o=we(b);if(!o||o.type!=="dir"||!o.children)return null;const p=[],c=[];for(const[x,u]of Object.entries(o.children))u.type==="dir"?p.push(x):c.push(x);return p.sort(),c.sort(),[...p,...c]}function je(b){const o=we(b);return!!o&&o.type==="file"}function O(b){const o=we(b);return!!o&&o.type==="dir"}function pe(b,o){if(o==="/")return[];const p=o.startsWith("/"),c=o.split("/").filter(Boolean),x=p?[]:[...b];for(const w of c)w===".."?x.pop():w!=="."&&x.push(w);return we("/"+x.join("/"))?x:null}var ft=ge("<div></div>");function dt(b,o){Ne(o,!1);const c="\x1B[38;2;100;255;218m",u="\x1B[38;2;255;230;120m",w="\x1B[37m";let A=oe(),$=oe(!0),L,q;function re(){L?.focus()}function le(){q?.fit()}let ce={};function F(f){return ce[f]??1/0}const R={};function J(f,s){const e=R[f];if(e&&(s?e.max!==void 0:e.min!==void 0))return s?typeof e.max=="number"?e.max:-1/0:typeof e.min=="number"?e.min:1/0;let d=s?-1/0:1/0;const l=be(f)||[];for(const h of l){const y=f==="/"?"/"+h:`${f}/${h}`;let m;O(y)?m=J(y,s):y.endsWith(".html")?m=F(y):m=s?-1/0:1/0,d=s?Math.max(d,m):Math.min(d,m)}return R[f]||(R[f]={}),s?R[f].max=d:R[f].min=d,d}function Q(f,s,e){const d=e==="desc";return[...s].sort((l,h)=>{const y=f==="/"?"/"+l:`${f}/${l}`,m=f==="/"?"/"+h:`${f}/${h}`;let I=O(y)?J(y,d):F(y),E=O(m)?J(m,d):F(m);Number.isFinite(I)||(I=d?-1/0:1/0),Number.isFinite(E)||(E=d?-1/0:1/0);const r=d?E-I:I-E;return r===0?l.localeCompare(h):r})}De(async()=>{U($,!0);try{const t=await fetch("/vfs-date-index.json",{cache:"force-cache"});t.ok&&(ce=await t.json())}catch{}const{Terminal:f}=await Pe(async()=>{const{Terminal:t}=await import("./xterm.CszRhTCM.js").then(n=>n.x);return{Terminal:t}},[]),{FitAddon:s}=await Pe(async()=>{const{FitAddon:t}=await import("./addon-fit.xGgdMdBE.js").then(n=>n.a);return{FitAddon:t}},[]),e=new f({theme:{background:"#0a0a0a",foreground:"#e0e0e0",cursor:"#64ffda",cursorAccent:"#0a0a0a",selectionBackground:"rgba(100, 255, 218, 0.2)",selectionForeground:"#e0e0e0",black:"#0a0a0a",red:"#ff6b6b",green:"#51cf66",yellow:"#ffd43b",blue:"#339af0",magenta:"#f06595",cyan:"#64ffda",white:"#e0e0e0",brightBlack:"#495057",brightRed:"#ff8787",brightGreen:"#69db7c",brightYellow:"#ffe066",brightBlue:"#4dabf7",brightMagenta:"#f783ac",brightCyan:"#7fecec",brightWhite:"#f8f9fa"},cursorBlink:!1,fontFamily:"IBM Plex Mono, SF Mono, Menlo, Monaco, Consolas, monospace",fontSize:14,fontWeight:"400",letterSpacing:.5,cols:80,rows:24,convertEol:!0,allowProposedApi:!0,smoothScrollDuration:120}),d=new s;q=d,e.loadAddon(d),e.open(g(A)),L=e,d.fit(),e.focus();function l(t){U($,t)}e.textarea?.addEventListener("focus",()=>l(!0)),e.textarea?.addEventListener("blur",()=>l(!1));let h=[],y=["/"],m=[],I=0,E="",r="",a=0;const Ge=["ls","cd","open","pop","clear","help","skin","skins"];let z=[],ae=0,M=!1,G="";const fe=()=>{const t="/"+h.join("/");e.write(`${c}${t}\x1B[0m $ `)};function Ke(t){if(!t)return;const[n,...v]=t.split(/\s+/);switch(n){case"ls":{const i=v.filter(C=>C.startsWith("-")),k=i.includes("-R")||i.includes("-r"),_=i.includes("-v"),D=v.find(C=>!C.startsWith("-"))||".",T=pe(h,D);if(!T){e.writeln(`ls: cannot access '${D}': No such file or directory`);break}const B="/"+T.join("/");if(je(B)){e.writeln(`${O(B)?w:u}${D}\x1B[0m`);break}const S=i.includes("-d")||i.includes("-dl"),K=i.includes("-de"),N=S?"desc":K?"asc":null;if(k){const C=[],ee=(H,ye="")=>{let de="/"+H.join("/"),W=be(de)||[];N&&(W=Q(de,W,N)),W.forEach((te,ke)=>{const ne=ke===W.length-1,ue=ne?"└─ ":"├─ ",ve=[...H,te],Le="/"+ve.join("/"),xe=O(Le),Ze=xe?w:u;let Fe="";if(_&&!xe){const he=F(Le);Number.isFinite(he)&&(Fe=`\x1B[2m[${new Date(he).toISOString().slice(0,10)}]\x1B[0m `)}if(C.push(`${ye}${ue}${Fe}${Ze}${te}\x1B[0m`),xe){const he=ye+(ne?"   ":"│  ");ee(ve,he)}})};ee(T);for(const H of C)e.writeln(H)}else{let C=be(B)||[];N&&(C=Q(B,C,N)),C.forEach((ee,H)=>{const de=H===C.length-1?"└─ ":"├─ ",W=`${B}/${ee}`,te=O(W),ke=te?w:u;let ne="";if(_&&!te){const ue=F(W.replace(/\.md$/,".html"));Number.isFinite(ue)&&(ne=`\x1B[2m[${new Date(ue).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${de}${ne}${ke}${ee}\x1B[0m`)})}break}case"cd":{const i=v[0]||"/",k=pe(h,i);if(!k){e.writeln(`cd: no such directory: ${i}`);break}const _="/"+k.join("/");if(!O(_)){e.writeln(`cd: not a directory: ${i}`);break}h=k;break}case"open":{const i=v[0];if(!i){e.writeln("open: missing file");break}const k=pe(h,i);if(k&&je("/"+k.join("/"))){const _="/"+k.join("/");y.push(_),Be.push(_)}else e.writeln(`open: file not found: ${i}`);break}case"pop":{if(y.length>1){y.pop();const i=y[y.length-1];Be.push(i)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const i=tt();i.forEach((k,_)=>{const D=_===i.length-1?"└─ ":"├─ ";e.writeln(D+k)});break}case"skin":{const i=v[0];if(!i)e.writeln("Usage: skin <name>");else try{et(i),e.writeln(`Now wearing ${i}`)}catch(k){e.writeln(String(k))}break}case"help":{const i=(D,T)=>D+" ".repeat(Math.max(0,T-D.length)),k=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${c}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:D,desc:T}of k)e.writeln(`${u}${i(D,14)}\x1B[0m  ${T}`);e.writeln(""),e.writeln(`${c}SHORTCUT        DESCRIPTION\x1B[0m`);const _=[{key:"Tab",desc:"accept autocomplete"},{key:"Shift+Tab",desc:"cycle suggestions"},{key:"← / →",desc:"move cursor left/right"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:D,desc:T}of _)e.writeln(`${u}${i(D,14)}\x1B[0m  ${T}`);break}default:e.writeln(`unknown command: ${n}`),e.write("\r")}}function Y(){M&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),M=!1,G="")}function Ae(t){if(Y(),!t)return;e.write("\x1B[s");const n=a<r.length?`\x1B[${r.length-a}C`:"";e.write(n),e.write(`\x1B[90m${t}\x1B[0m`),e.write("\x1B[u"),M=!0,G=t}function He(t){return Ge.filter(n=>n.startsWith(t))}function Ve(t){const n=t.lastIndexOf("/"),v=n===-1?"":t.slice(0,n+1),i=n===-1?t:t.slice(n+1),k=pe(h,v||".");if(!k)return[];const _="/"+k.join("/"),B=(be(_)||[]).filter(S=>S.startsWith(i)).map(S=>{const K=`${_}/${S}`;return v+(O(K)?S+"/":S)});return B.sort((S,K)=>{const N=S.endsWith("/"),C=K.endsWith("/");return N===C?S.localeCompare(K):N?-1:1}),B.slice(0,20)}function Z(){const t=r.split(/\s+/),n=t[0]||"",v=t[t.length-1]||"";let i=[];if(t.length===1?i=He(v):["cd","ls","open"].includes(n)&&(i=Ve(v)),z=i,ae=0,z.length){const _=z[0].slice(v.length);Ae(_)}}function Ue(){!M||!G||(r=r.slice(0,a)+G+r.slice(a),a+=G.length,a===r.length?e.write(G):Te(),Y())}function Je(){if(!M||z.length<2)return;ae=(ae+1)%z.length;const t=r.split(/\s+/),n=t[t.length-1]||"",i=z[ae].slice(n.length);Ae(i)}function Te(){e.write("\x1B[2K\r"),fe(),e.write(r),a<r.length&&e.write(`\x1B[${r.length-a}D`)}function Se(t){t==="left"&&a>0?(a--,e.write("\x1B[D")):t==="right"&&a<r.length&&(a++,e.write("\x1B[C"))}function Qe(t){if(r=r.slice(0,a)+t+r.slice(a),a++,a===r.length)e.write(t);else{const n=r.slice(a-1);e.write(n),e.write(`\x1B[${n.length-1}D`)}}function Xe(){if(a===0)return;r=r.slice(0,a-1)+r.slice(a),a--,e.write("\x1B[D");const t=r.slice(a)+" ";e.write(t),e.write(`\x1B[${t.length}D`)}let P="";const Ye=t=>{for(const n of t){const v=n.charCodeAt(0);if(P){if(P+=n,P==="\x1B[C"||P==="\x1B[D"){P="";continue}else P.length>=3&&(P="");continue}if(n==="\x1B"){P="\x1B";continue}switch(v){case 9:{Ue(),Z();break}case 13:{e.write(`\r
`);const i=r.trim();Ke(i),i&&m.push(i),I=m.length,r="",a=0,i==="clear"||e.write(`\r
`),fe();break}case 127:{Xe(),Z();break}default:v>=32&&v<127&&(Y(),Qe(n),Z())}}};Z(),e.onData(Ye),e.onKey(({key:t,domEvent:n})=>{if(n.key==="ArrowUp"||n.key==="ArrowDown"){if(n.preventDefault(),!m.length)return;I===m.length&&(E=r),n.key==="ArrowUp"&&I>0?I--:n.key==="ArrowDown"&&I<m.length&&I++,r=I===m.length?E:m[I],a=r.length,Te(),Y(),Z();return}if(n.key==="Tab"&&n.shiftKey&&M){n.preventDefault(),Je();return}if(n.key==="ArrowLeft"){n.preventDefault(),Se("left");return}if(n.key==="ArrowRight"){n.preventDefault(),Se("right");return}M&&!["Tab","Shift","Control","Alt","Meta"].includes(n.key)&&Y()}),e.writeln("Type help for command list."),fe()}),Ee();var j=ft();let X;return Me(j,f=>U(A,f),()=>g(A)),We(f=>X=Ce(j,1,"terminal-shell h-full w-full svelte-19z614e",null,X,f),[()=>({focused:g($)})],ze),V(b,j),Re(o,"focusTerminal",re),Re(o,"resizeTerminal",le),qe({focusTerminal:re,resizeTerminal:le})}var ut=ge('<button class="desktop-toggle hidden md:flex svelte-1qekhyf" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-1qekhyf">terminal</span>',1),ht=ge('<button class="desktop-toggle hidden md:flex svelte-1qekhyf" aria-label="Collapse terminal">▶</button>'),mt=ge('<div><div class="md:hidden flex items-center justify-between px-4 py-3 mobile-header svelte-1qekhyf"><span class="mobile-title text-xs svelte-1qekhyf">terminal</span> <button class="mobile-toggle svelte-1qekhyf" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function yt(b,o){Ne(o,!1);const p=nt(!1);De(()=>{const s=sessionStorage.getItem("terminalCollapsed");s?p.set(s==="true"):window.innerWidth<768&&(p.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let c=oe(!1);p.subscribe(s=>U(c,s));function x(){p.update(s=>{const e=!s;return sessionStorage.setItem("terminalCollapsed",e.toString()),e||setTimeout(()=>{g(w)&&g(u)?.resizeTerminal(),g(u)?.focusTerminal()},300),e})}let u=oe(),w=oe(!1);De(()=>{const s=()=>{U(w,window.innerWidth<768)},e=l=>{if(!(g(w)||!l.shiftKey)){if(l.key==="ArrowRight"&&!g(c))l.preventDefault(),l.stopImmediatePropagation(),x();else if(l.key==="ArrowLeft")g(c)?(l.preventDefault(),l.stopImmediatePropagation(),x()):(l.preventDefault(),l.stopImmediatePropagation(),g(u)?.focusTerminal());else if(l.key==="ArrowUp"&&!g(c)){l.preventDefault(),l.stopImmediatePropagation();const h=document.activeElement;h&&h.blur()}}};s(),window.addEventListener("resize",s),window.addEventListener("keydown",e,!0);const d=l=>{if(g(w))return;const h=document.activeElement;if(h&&h.classList.contains("xterm-helper-textarea"))return;const y=document.querySelector("main"),m=60;switch(l.key){case"j":(y??window).scrollBy({top:2*m,behavior:"smooth"});break;case"k":(y??window).scrollBy({top:-2*m,behavior:"smooth"});break;case"h":(y??window).scrollBy({left:-m,behavior:"smooth"});break;case"l":(y??window).scrollBy({left:m,behavior:"smooth"});break;default:return}l.preventDefault()};return window.addEventListener("keydown",d),()=>{window.removeEventListener("resize",s),window.removeEventListener("keydown",e,!0),window.removeEventListener("keydown",d)}}),Ee();var A=mt();let $;var L=se(A),q=Ie(se(L),2),re=se(q);{var le=s=>{var e=Oe("▼");V(s,e)},ce=s=>{var e=Oe("▲");V(s,e)};_e(re,s=>{g(c)?s(le):s(ce,!1)})}ie(q),ie(L);var F=Ie(L,2);{var R=s=>{var e=ut(),d=ot(e);rt(2),$e("click",d,x),V(s,e)},J=(s,e)=>{{var d=l=>{var h=ht();$e("click",h,x),V(l,h)};_e(s,l=>{g(w)||l(d)},e)}};_e(F,s=>{!g(w)&&g(c)?s(R):s(J,!1)})}var Q=Ie(F,2),j=se(Q);let X;var f=se(j);Me(dt(f,{$$legacy:!0}),s=>U(u,s),()=>g(u)),ie(j),ie(Q),ie(A),We((s,e)=>{$=Ce(A,1,"h-full flex flex-col desktop-wrapper svelte-1qekhyf",null,$,s),X=Ce(j,1,"terminal-content body svelte-1qekhyf",null,X,e)},[()=>({"desktop-collapsed":!g(w)&&g(c)}),()=>({"mobile-collapsed":g(w)&&g(c)})],ze),$e("click",q,x),V(b,A),qe()}export{yt as default};
