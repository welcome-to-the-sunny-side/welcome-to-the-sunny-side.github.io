import{o as Re,i as Be,f as We,_ as De,w as et,l as tt,c as Pe,d as Fe,h as nt,b as Le}from"./router.YOqojPGM.js";import{ad as st,X as ot,$ as Me,a0 as ve,_ as Z,d,D as He,a4 as Y,a5 as Ve,q as de,e as Ge,a7 as Te,a6 as ce,a2 as Ce,a3 as le,ae as je,a1 as rt,af as it}from"./template.CVHwsLK3.js";import ct from"./about.BKDt97ao.js";import lt from"./about.Cl4aM1CR.js";import at from"./about.RWUlWApA.js";import dt from"./about.DmETiz7C.js";import ft from"./cf-2056f1.CWUHvRF7.js";import ut from"./cf-2113e.Cl8UtRBg.js";import mt from"./cf-468d.BGfZYA_9.js";import ht from"./about.ME4M5TEQ.js";import pt from"./detect_k_neighbours_bip.DwIEFckk.js";import bt from"./offline_incremental_scc.DjERIihu.js";import _t from"./suffix_tree_funny_construction.w2_kFUV8.js";import gt from"./about.CFDb6g-r.js";import wt from"./home.mgOJEq68.js";import vt from"./void.DsDRx8Cu.js";import yt from"./zetamac.Bgd4015h.js";/* empty css                        */function ze(h,r,p){var l=st(h,r);l&&l.set&&(h[r]=p,ot(()=>{h[r]=null}))}function kt(h){const r={name:"/",type:"dir",path:"/",children:{}};for(const p of h){const y=p.replace(/^\.\/?/,"").split("/");let f=r,b="";for(let T=0;T<y.length;T++){const I=y[T];b+="/"+I;const P=I.includes(".");f.children||(f.children={}),f.children[I]||(f.children[I]={name:I,type:P?"file":"dir",path:b},P||(f.children[I].children={})),f=f.children[I]}}return r}const xt=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/void.md":0});let we=null;function $t(){if(we)return we;const h=xt.map(r=>r.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return we=kt(h),we}function ye(h){const r=h.split("/").filter(Boolean);let p=$t();for(const l of r){if(!p.children||!p.children[l])return null;p=p.children[l]}return p}function ae(h){const r=ye(h);if(!r||r.type!=="dir"||!r.children)return null;const p=[],l=[];for(const[y,f]of Object.entries(r.children))f.type==="dir"?p.push(y):l.push(y);return p.sort(),l.sort(),[...p,...l]}function Se(h){const r=ye(h);return!!r&&r.type==="file"}function W(h){const r=ye(h);return!!r&&r.type==="dir"}function Q(h,r){if(r==="/")return[];const p=r.startsWith("/"),l=r.split("/").filter(Boolean),y=p?[]:[...h];for(const b of l)b===".."?y.pop():b!=="."&&y.push(b);return ye("/"+y.join("/"))?y:null}var It=ve("<div></div>");function At(h,r){Me(r,!1);const l="\x1B[38;2;100;255;218m",f="\x1B[38;2;255;230;120m",b="\x1B[37m";let T=de(),I=de(!0),P,J;function fe(){P?.focus()}function ue(){J?.fit()}const ke=Object.assign({"/src/content/about.md":ct,"/src/content/algo/about.md":lt,"/src/content/algo/notes/about.md":at,"/src/content/algo/problems/about.md":dt,"/src/content/algo/problems/cf-2056f1.md":ft,"/src/content/algo/problems/cf-2113e.md":ut,"/src/content/algo/problems/cf-468d.md":mt,"/src/content/algo/theory/about.md":ht,"/src/content/algo/theory/detect_k_neighbours_bip.md":pt,"/src/content/algo/theory/offline_incremental_scc.md":bt,"/src/content/algo/theory/suffix_tree_funny_construction.md":_t,"/src/content/games/about.md":gt,"/src/content/home.md":wt,"/src/content/void.md":vt}),me=Object.assign({"/src/content/games/zetamac.html":yt});function xe(t){if(!t)return 1/0;const c=/---[\s\S]*?^date:\s*(\d{4}-\d{2}-\d{2})/m.exec(t);if(!c)return 1/0;const m=Date.parse(c[1]);return Number.isNaN(m)?1/0:m}function G(t){const c=he(t);if(c)return xe(c);const m=me["/src/content"+t]??null;if(!m)return 1/0;const e=/<meta\s+name=["']wtss:date["']\s+content=["'](\d{4}-\d{2}-\d{2})["'][^>]*>/i.exec(m);if(!e)return 1/0;const C=Date.parse(e[1]);return Number.isNaN(C)?1/0:C}const M={};function K(t,c){const m=M[t];if(m&&(c?m.max!==void 0:m.min!==void 0))return c?typeof m.max=="number"?m.max:-1/0:typeof m.min=="number"?m.min:1/0;let e=c?-1/0:1/0;const C=ae(t)||[];for(const z of C){const k=t==="/"?"/"+z:`${t}/${z}`;let $;W(k)?$=K(k,c):k.endsWith(".html")?$=G(k):$=c?-1/0:1/0,e=c?Math.max(e,$):Math.min(e,$)}return M[t]||(M[t]={}),c?M[t].max=e:M[t].min=e,e}function ee(t,c,m){const e=m==="desc";return[...c].sort((C,z)=>{const k=t==="/"?"/"+C:`${t}/${C}`,$=t==="/"?"/"+z:`${t}/${z}`;let S=W(k)?K(k,e):G(k),A=W($)?K($,e):G($);Number.isFinite(S)||(S=e?-1/0:1/0),Number.isFinite(A)||(A=e?-1/0:1/0);const te=e?A-S:S-A;return te===0?C.localeCompare(z):te})}function he(t){const c=t.replace(/^\//,"").replace(/\.html$/,".md");return ke["/src/content/"+c]??null}let i;Re(async()=>{Z(I,!0);const{default:t}=await De(async()=>{const{default:o}=await import("./fuse.CvLDeDq6.js");return{default:o}},[]);i=t;const{Terminal:c}=await De(async()=>{const{Terminal:o}=await import("./xterm.CszRhTCM.js").then(s=>s.x);return{Terminal:o}},[]),{FitAddon:m}=await De(async()=>{const{FitAddon:o}=await import("./addon-fit.xGgdMdBE.js").then(s=>s.a);return{FitAddon:o}},[]),e=new c({theme:{background:"#0f0f0f",foreground:"#d0d0d0",cursor:"rgb(100,255,218)"},fontFamily:"IBM Plex Mono, Menlo, monospace",fontSize:13,letterSpacing:.25,cols:80,rows:24,convertEol:!0}),C=new m;J=C,e.loadAddon(C),e.open(d(T)),P=e,C.fit(),e.focus();function z(o){Z(I,o)}e.textarea?.addEventListener("focus",()=>z(!0)),e.textarea?.addEventListener("blur",()=>z(!1));let k=[],$=["/"],S=[],A=0,te="",R="";const Ke=["ls","cd","open","pop","clear","help","grep","skin","skins"];let U=[],pe=0,q=!1,ne="";const be=()=>{const o="/"+k.join("/");e.write(`${l}${o}\x1B[0m $ `)};function Ue(o){if(!o)return;const[s,...a]=o.split(/\s+/);switch(s){case"ls":{const n=a.filter(v=>v.startsWith("-")),u=n.includes("-R")||n.includes("-r"),w=n.includes("-v"),x=a.find(v=>!v.startsWith("-"))||".",F=Q(k,x);if(!F){e.writeln(`ls: cannot access '${x}': No such file or directory`);break}const E="/"+F.join("/");if(Se(E)){e.writeln(`${W(E)?b:f}${x}\x1B[0m`);break}const D=n.includes("-d")||n.includes("-dl"),B=n.includes("-de"),V=D?"desc":B?"asc":null;if(u){const v=[],g=(L,N="")=>{let O="/"+L.join("/"),X=ae(O)||[];V&&(X=ee(O,X,V)),X.forEach((re,$e)=>{const ie=$e===X.length-1,_e=ie?"└─ ":"├─ ",Ie=[...L,re],Ne="/"+Ie.join("/"),Ae=W(Ne),Ze=Ae?b:f;let Oe="";if(w&&!Ae){const ge=G(Ne);Number.isFinite(ge)&&(Oe=`\x1B[2m[${new Date(ge).toISOString().slice(0,10)}]\x1B[0m `)}if(v.push(`${N}${_e}${Oe}${Ze}${re}\x1B[0m`),Ae){const ge=N+(ie?"   ":"│  ");g(Ie,ge)}})};g(F);for(const L of v)e.writeln(L)}else{let v=ae(E)||[];V&&(v=ee(E,v,V)),v.forEach((g,L)=>{const O=L===v.length-1?"└─ ":"├─ ",X=`${E}/${g}`,re=W(X),$e=re?b:f;let ie="";if(w&&!re){const _e=G(X.replace(/\.md$/,".html"));Number.isFinite(_e)&&(ie=`\x1B[2m[${new Date(_e).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${O}${ie}${$e}${g}\x1B[0m`)})}break}case"cd":{const n=a[0]||"/",u=Q(k,n);if(!u){e.writeln(`cd: no such directory: ${n}`);break}const w="/"+u.join("/");if(!W(w)){e.writeln(`cd: not a directory: ${n}`);break}k=u;break}case"open":{const n=a[0];if(!n){e.writeln("open: missing file");break}const u=Q(k,n);if(u&&Se("/"+u.join("/"))){const w="/"+u.join("/");$.push(w),Pe.push(w)}else e.writeln(`open: file not found: ${n}`);break}case"pop":{if($.length>1){$.pop();const n=$[$.length-1];Pe.push(n)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const n=tt();n.forEach((u,w)=>{const x=w===n.length-1?"└─ ":"├─ ";e.writeln(x+u)});break}case"skin":{const n=a[0];if(!n)e.writeln("Usage: skin <name>");else try{et(n),e.writeln(`Now wearing ${n}`)}catch(u){e.writeln(String(u))}break}case"grep":{if(!a.length){e.writeln("grep: usage: grep <pattern> [path]");break}let n=null;if(a.length>1){const g=a[a.length-1];Q(k,g)&&(n=g,a.pop())}const u=a.join(" ").replace(/^"|"$/g,""),w=n??".",x=Q(k,w);if(!x){e.writeln(`grep: ${w}: No such file or directory`);break}const F="/"+x.join("/"),E=[],D=g=>{if(Se(g)&&g.endsWith(".html")){E.push(g);return}W(g)&&(ae(g)||[]).forEach(N=>{const O=g==="/"?"/"+N:`${g}/${N}`;D(O)})};D(F);const B=[];for(const g of E){const L=he(g);L&&L.split(`
`).forEach((N,O)=>{B.push({line:N,file:g,lineNum:O+1})})}const v=new i(B,{keys:["line"],threshold:.4,ignoreLocation:!0,includeScore:!1}).search(u).slice(0,100);v.length?(v.forEach(g=>{const{file:L,lineNum:N,line:O}=g.item;e.writeln(`${f}${L}\x1B[0m:${N}:${O.trim()}`)}),e.writeln(`${v.length} match${v.length===1?"":"es"}`)):e.writeln("grep: no matches");break}case"help":{const n=(x,F)=>x+" ".repeat(Math.max(0,F-x.length)),u=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"grep <pattern> [path]",desc:"fuzzy search markdown files"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${l}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:x,desc:F}of u)e.writeln(`${f}${n(x,14)}\x1B[0m  ${F}`);e.writeln(""),e.writeln(`${l}SHORTCUT        DESCRIPTION\x1B[0m`);const w=[{key:"Tab",desc:"accept autocomplete"},{key:"← / →",desc:"cycle suggestions"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:x,desc:F}of w)e.writeln(`${f}${n(x,14)}\x1B[0m  ${F}`);break}default:e.writeln(`unknown command: ${s}`),e.write("\r")}}function se(){q&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),q=!1,ne="")}function Ee(o){se(),o&&(e.write("\x1B[s"),e.write(`\x1B[90m${o}\x1B[0m`),e.write("\x1B[u"),q=!0,ne=o)}function qe(o){return Ke.filter(s=>s.startsWith(o))}function Xe(o){const s=o.lastIndexOf("/"),a=s===-1?"":o.slice(0,s+1),n=s===-1?o:o.slice(s+1),u=Q(k,a||".");if(!u)return[];const w="/"+u.join("/"),E=(ae(w)||[]).filter(D=>D.startsWith(n)).map(D=>{const B=`${w}/${D}`;return a+(W(B)?D+"/":D)});return E.sort((D,B)=>{const V=D.endsWith("/"),v=B.endsWith("/");return V===v?D.localeCompare(B):V?-1:1}),E.slice(0,20)}function oe(){const o=R.split(/\s+/),s=o[0]||"",a=o[o.length-1]||"";let n=[];if(o.length===1?n=qe(a):["cd","ls","open","grep"].includes(s)&&(n=Xe(a)),U=n,pe=0,U.length){const w=U[0].slice(a.length);Ee(w)}}function Je(){!q||!ne||(R+=ne,e.write(ne),se())}function Qe(o){if(!q||U.length<2)return;pe=(pe+o+U.length)%U.length;const s=R.split(/\s+/),a=s[s.length-1]||"",u=U[pe].slice(a.length);Ee(u)}let H="";const Ye=o=>{for(const s of o){const a=s.charCodeAt(0);if(H){if(H+=s,H==="\x1B[C"||H==="\x1B[D"){H="";continue}else H.length>=3&&(H="");continue}if(s==="\x1B"){H="\x1B";continue}switch(a){case 9:{Je(),oe();break}case 13:{e.write(`\r
`);const n=R.trim();Ue(n),n&&S.push(n),A=S.length,R="",n==="clear"||e.write(`\r
`),be();break}case 127:{R.length&&(R=R.slice(0,-1),e.write("\b \b")),oe();break}default:a>=32&&a<127&&(se(),R+=s,e.write(s),oe())}}};oe(),e.onData(Ye),e.onKey(({key:o,domEvent:s})=>{if(s.key==="ArrowUp"||s.key==="ArrowDown"){if(s.preventDefault(),!S.length)return;A===S.length&&(te=R),s.key==="ArrowUp"&&A>0?A--:s.key==="ArrowDown"&&A<S.length&&A++;const a=A===S.length?te:S[A];e.write("\x1B[2K\r"),be(),R=a,e.write(R),se(),oe();return}q&&(s.key==="ArrowRight"||s.key==="ArrowLeft")?(s.preventDefault(),Qe(s.key==="ArrowRight"?1:-1)):q&&!["Tab","Shift","Control","Alt","Meta","ArrowRight","ArrowLeft"].includes(s.key)&&se()}),e.writeln("Type help for command list."),be()}),Be();var _=It();let j;return We(_,t=>Z(T,t),()=>d(T)),He(t=>j=Fe(_,1,"terminal-shell h-full w-full svelte-1asehid",null,j,t),[()=>({focused:d(I)})],Ge),Y(h,_),ze(r,"focusTerminal",fe),ze(r,"resizeTerminal",ue),Ve({focusTerminal:fe,resizeTerminal:ue})}var Dt=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-twihms">terminal</span>',1),Lt=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Collapse terminal">▶</button>'),Tt=ve('<div><div class="md:hidden flex items-center justify-between px-3 py-2 border-b border-zinc-700"><span class="font-mono text-xs text-zinc-400">terminal</span> <button class="text-zinc-300" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function Xt(h,r){Me(r,!1);const p=nt(!1);Re(()=>{const i=sessionStorage.getItem("terminalCollapsed");i?p.set(i==="true"):window.innerWidth<768&&(p.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let l=de(!1);p.subscribe(i=>Z(l,i));function y(){p.update(i=>{const _=!i;return sessionStorage.setItem("terminalCollapsed",_.toString()),_||setTimeout(()=>{d(b)&&d(f)?.resizeTerminal(),d(f)?.focusTerminal()},300),_})}let f=de(),b=de(!1);Re(()=>{const i=()=>{Z(b,window.innerWidth<768)},_=t=>{if(!(d(b)||!t.shiftKey)){if(t.key==="ArrowRight"&&!d(l))t.preventDefault(),t.stopImmediatePropagation(),y();else if(t.key==="ArrowLeft")d(l)?(t.preventDefault(),t.stopImmediatePropagation(),y()):(t.preventDefault(),t.stopImmediatePropagation(),d(f)?.focusTerminal());else if(t.key==="ArrowUp"&&!d(l)){t.preventDefault(),t.stopImmediatePropagation();const c=document.activeElement;c&&c.blur()}}};i(),window.addEventListener("resize",i),window.addEventListener("keydown",_,!0);const j=t=>{if(d(b))return;const c=document.activeElement;if(c&&c.classList.contains("xterm-helper-textarea"))return;const m=document.querySelector("main"),e=60;switch(t.key){case"j":(m??window).scrollBy({top:2*e,behavior:"smooth"});break;case"k":(m??window).scrollBy({top:-2*e,behavior:"smooth"});break;case"h":(m??window).scrollBy({left:-e,behavior:"smooth"});break;case"l":(m??window).scrollBy({left:e,behavior:"smooth"});break;default:return}t.preventDefault()};return window.addEventListener("keydown",j),()=>{window.removeEventListener("resize",i),window.removeEventListener("keydown",_,!0),window.removeEventListener("keydown",j)}}),Be();var T=Tt();let I;var P=ce(T),J=Ce(ce(P),2),fe=ce(J);{var ue=i=>{var _=je("▼");Y(i,_)},ke=i=>{var _=je("▲");Y(i,_)};Le(fe,i=>{d(l)?i(ue):i(ke,!1)})}le(J),le(P);var me=Ce(P,2);{var xe=i=>{var _=Dt(),j=rt(_);it(2),Te("click",j,y),Y(i,_)},G=(i,_)=>{{var j=t=>{var c=Lt();Te("click",c,y),Y(t,c)};Le(i,t=>{d(b)||t(j)},_)}};Le(me,i=>{!d(b)&&d(l)?i(xe):i(G,!1)})}var M=Ce(me,2),K=ce(M);let ee;var he=ce(K);We(At(he,{$$legacy:!0}),i=>Z(f,i),()=>d(f)),le(K),le(M),le(T),He((i,_)=>{I=Fe(T,1,"h-full flex flex-col bg-zinc-900 desktop-wrapper svelte-twihms",null,I,i),ee=Fe(K,1,"terminal-content body svelte-twihms",null,ee,_)},[()=>({"desktop-collapsed":!d(b)&&d(l),"border-b":d(b)&&!d(l),"border-zinc-700":d(b)&&!d(l)}),()=>({"mobile-collapsed":d(b)&&d(l)})],Ge),Te("click",J,y),Y(h,T),Ve()}export{Xt as default};
