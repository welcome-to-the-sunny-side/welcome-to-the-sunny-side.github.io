import{c as ct,o as Re,a as ft,i as qe,b as He,_ as We,d as Ae,w as dt,l as ut,s as Be,e as ht,f as Te}from"./router.frwClmA4.js";import{C as Ye,t as mt,D as bt,L as pt,E as Oe,F as f,G as gt,I as vt,p as wt,J as le,K as yt,S as kt,M as _t,N as xt,P as It,O as ae,Q as $t,y as Xe,R as Ie,T as Je,U as oe,B as Qe,V as Pe,W as be,X as Fe,Y as pe,Z as Ge,_ as Dt,$ as St}from"./template.C3ZF97LW.js";/* empty css                        */function Ke(o,r,h){var l=Ye(o,r);l&&l.set&&(o[r]=h,mt(()=>{o[r]=null}))}function Ve(o){return o.ctx?.d??!1}function Ct(o,r,h,l){var p=!xt||(h&It)!==0,u=(h&$t)!==0,g=!1,I;[I,g]=ct(()=>o[r]);var _=kt in o||_t in o,v=(Ye(o,r)?.set??(_&&r in o&&(d=>o[r]=d)))||void 0,A=l,N=!0,K=!1,X=()=>(K=!0,N&&(N=!1,A=l),A);I===void 0&&l!==void 0&&(v&&p&&bt(),I=X(),v&&v(I));var E;if(p)E=()=>{var d=o[r];return d===void 0?X():(N=!0,K=!1,d)};else{var T=Oe(()=>o[r]);T.f|=pt,E=()=>{var d=f(T);return d!==void 0&&(A=void 0),d===void 0?A:d}}if(v){var J=o.$$legacy;return function(d,O){return arguments.length>0?((!p||!O||J||g)&&v(O?E():d),d):E()}}var G=!1,z=ae(I),w=gt(()=>{var d=E(),O=f(z);return G?(G=!1,O):z.v=d});return f(w),w.equals=vt,function(d,O){if(arguments.length>0){const i=O?f(w):p&&u?wt(d):d;if(!w.equals(i)){if(G=!0,le(z,i),K&&A!==void 0&&(A=i),Ve(w))return d;yt(()=>f(w))}return d}return Ve(w)?w.v:f(w)}}function Lt(o){const r={name:"/",type:"dir",path:"/",children:{}};for(const h of o){const p=h.replace(/^\.\/?/,"").split("/");let u=r,g="";for(let I=0;I<p.length;I++){const _=p[I];g+="/"+_;const v=_.includes(".");u.children||(u.children={}),u.children[_]||(u.children[_]={name:_,type:v?"file":"dir",path:g},v||(u.children[_].children={})),u=u.children[_]}}return r}const At=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/contests/about.md":0,"/src/content/algo/contests/arc-205.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-1967c.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2056f2.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/about.md":0,"/src/content/misc/void.md":0});let ke=null;function Tt(){if(ke)return ke;const o=At.map(r=>r.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return ke=Lt(o),ke}function $e(o){const r=o.split("/").filter(Boolean);let h=Tt();for(const l of r){if(!h.children||!h.children[l])return null;h=h.children[l]}return h}function _e(o){const r=$e(o);if(!r||r.type!=="dir"||!r.children)return null;const h=[],l=[];for(const[p,u]of Object.entries(r.children))u.type==="dir"?h.push(p):l.push(p);return h.sort(),l.sort(),[...h,...l]}function Ue(o){const r=$e(o);return!!r&&r.type==="file"}function Y(o){const r=$e(o);return!!r&&r.type==="dir"}function xe(o,r){if(r==="/")return[];const h=r.startsWith("/"),l=r.split("/").filter(Boolean),p=h?[]:[...o];for(const g of l)g===".."?p.pop():g!=="."&&p.push(g);return $e("/"+p.join("/"))?p:null}var Pt=Ie("<div></div>");function Ft(o,r){Xe(r,!1);const l="\x1B[38;2;100;255;218m",u="\x1B[38;2;255;230;120m",g="\x1B[37m";let I=ae(),_=Ct(r,"isFocused",12,!0),v,A;function N(){v?.focus()}function K(){A?.fit()}let X={},E=!1,T=null;const J=["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"];let G=0,z=null;function w(a){return X[a]??1/0}const d={};function O(a,D){const e=d[a];if(e&&(D?e.max!==void 0:e.min!==void 0))return D?typeof e.max=="number"?e.max:-1/0:typeof e.min=="number"?e.min:1/0;let S=D?-1/0:1/0;const U=_e(a)||[];for(const P of U){const L=a==="/"?"/"+P:`${a}/${P}`;let $;Y(L)?$=O(L,D):L.endsWith(".html")?$=w(L):$=D?-1/0:1/0,S=D?Math.max(S,$):Math.min(S,$)}return d[a]||(d[a]={}),D?d[a].max=S:d[a].min=S,S}function i(a,D,e){const S=e==="desc";return[...D].sort((U,P)=>{const L=a==="/"?"/"+U:`${a}/${U}`,$=a==="/"?"/"+P:`${a}/${P}`;let F=Y(L)?O(L,S):w(L),Q=Y($)?O($,S):w($);Number.isFinite(F)||(F=S?-1/0:1/0),Number.isFinite(Q)||(Q=S?-1/0:1/0);const c=S?Q-F:F-Q;return c===0?U.localeCompare(P):c})}function y(){T||!v||(v.write("\r\x1B[2K"),v.write(`${J[0]} Loading...`),T=setInterval(()=>{G=(G+1)%J.length,v?.write(`\r\x1B[2K${J[G]} Loading...`)},100))}function V(a){T&&(clearInterval(T),T=null),v&&(v.write("\r\x1B[K"),v.write(`${u}✓ Page loaded successfully\x1B[0m\r
`),a&&a())}Re(async()=>{_(!0);try{const t=await fetch("/vfs-date-index.json",{cache:"force-cache"});t.ok&&(X=await t.json())}catch{}const{Terminal:a}=await We(async()=>{const{Terminal:t}=await import("./xterm.CszRhTCM.js").then(n=>n.x);return{Terminal:t}},[]),{FitAddon:D}=await We(async()=>{const{FitAddon:t}=await import("./addon-fit.xGgdMdBE.js").then(n=>n.a);return{FitAddon:t}},[]),e=new a({theme:{background:"#0a0a0a",foreground:"#e0e0e0",cursor:"#64ffda",cursorAccent:"#0a0a0a",selectionBackground:"rgba(100, 255, 218, 0.2)",selectionForeground:"#e0e0e0",black:"#0a0a0a",red:"#ff6b6b",green:"#51cf66",yellow:"#ffd43b",blue:"#339af0",magenta:"#f06595",cyan:"#64ffda",white:"#e0e0e0",brightBlack:"#495057",brightRed:"#ff8787",brightGreen:"#69db7c",brightYellow:"#ffe066",brightBlue:"#4dabf7",brightMagenta:"#f783ac",brightCyan:"#7fecec",brightWhite:"#f8f9fa"},cursorBlink:!1,fontFamily:"IBM Plex Mono, SF Mono, Menlo, Monaco, Consolas, monospace",fontSize:14,fontWeight:"400",letterSpacing:.5,cols:80,rows:24,convertEol:!0,allowProposedApi:!0,smoothScrollDuration:120}),S=new D;A=S,e.loadAddon(S),e.open(f(I)),v=e,S.fit(),e.focus();function U(t){_(t)}e.textarea?.addEventListener("focus",()=>U(!0)),e.textarea?.addEventListener("blur",()=>U(!1));let P=[],L=["/"],$=[],F=0,Q="",c="",m=0;const Ze=["ls","cd","open","pop","clear","help","skin","skins"];let ne=[],ge=0,Z=!1,re="";const ce=()=>{const t="/"+P.join("/");e.write(`${l}${t}\x1B[0m $ `)};function et(t){if(!t)return;const[n,...x]=t.split(/\s+/);switch(n){case"ls":{const s=x.filter(B=>B.startsWith("-")),k=s.includes("-R")||s.includes("-r"),C=s.includes("-v"),R=x.find(B=>!B.startsWith("-"))||".",M=xe(P,R);if(!M){e.writeln(`ls: cannot access '${R}': No such file or directory`);break}const H="/"+M.join("/");if(Ue(H)){e.writeln(`${Y(H)?g:u}${R}\x1B[0m`);break}const W=s.includes("-d")||s.includes("-dl"),se=s.includes("-de"),ee=W?"desc":se?"asc":null;if(k){const B=[],ue=(ie,De="")=>{let ve="/"+ie.join("/"),te=_e(ve)||[];ee&&(te=i(ve,te,ee)),te.forEach((he,Se)=>{const me=Se===te.length-1,we=me?"└─ ":"├─ ",Ce=[...ie,he],ze="/"+Ce.join("/"),Le=Y(ze),at=Le?g:u;let Me="";if(C&&!Le){const ye=w(ze);Number.isFinite(ye)&&(Me=`\x1B[2m[${new Date(ye).toISOString().slice(0,10)}]\x1B[0m `)}if(B.push(`${De}${we}${Me}${at}${he}\x1B[0m`),Le){const ye=De+(me?"   ":"│  ");ue(Ce,ye)}})};ue(M);for(const ie of B)e.writeln(ie)}else{let B=_e(H)||[];ee&&(B=i(H,B,ee)),B.forEach((ue,ie)=>{const ve=ie===B.length-1?"└─ ":"├─ ",te=`${H}/${ue}`,he=Y(te),Se=he?g:u;let me="";if(C&&!he){const we=w(te.replace(/\.md$/,".html"));Number.isFinite(we)&&(me=`\x1B[2m[${new Date(we).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${ve}${me}${Se}${ue}\x1B[0m`)})}break}case"cd":{const s=x[0]||"/",k=xe(P,s);if(!k){e.writeln(`cd: no such directory: ${s}`);break}const C="/"+k.join("/");if(!Y(C)){e.writeln(`cd: not a directory: ${s}`);break}P=k;break}case"open":{const s=x[0];if(!s){e.writeln("open: missing file");break}const k=xe(P,s);if(k&&Ue("/"+k.join("/"))){const C="/"+k.join("/");L.push(C),Ae.push(C)}else e.writeln(`open: file not found: ${s}`);break}case"pop":{if(L.length>1){L.pop();const s=L[L.length-1];Ae.push(s)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const s=ut();s.forEach((k,C)=>{const R=C===s.length-1?"└─ ":"├─ ";e.writeln(R+k)});break}case"skin":{const s=x[0];if(!s)e.writeln("Usage: skin <name>");else try{dt(s),e.writeln(`Now wearing ${s}`)}catch(k){e.writeln(String(k))}break}case"help":{const s=(R,M)=>R+" ".repeat(Math.max(0,M-R.length)),k=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${l}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:R,desc:M}of k)e.writeln(`${u}${s(R,14)}\x1B[0m  ${M}`);e.writeln(""),e.writeln(`${l}SHORTCUT        DESCRIPTION\x1B[0m`);const C=[{key:"Tab",desc:"accept autocomplete"},{key:"Shift+Tab",desc:"cycle suggestions"},{key:"← / →",desc:"move cursor left/right"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:R,desc:M}of C)e.writeln(`${u}${s(R,14)}\x1B[0m  ${M}`);break}default:e.writeln(`unknown command: ${n}`),e.write("\r")}}function fe(){Z&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),Z=!1,re="")}function Ee(t){if(fe(),!t)return;e.write("\x1B[s");const n=m<c.length?`\x1B[${c.length-m}C`:"";e.write(n),e.write(`\x1B[90m${t}\x1B[0m`),e.write("\x1B[u"),Z=!0,re=t}function tt(t){return Ze.filter(n=>n.startsWith(t))}function nt(t){const n=t.lastIndexOf("/"),x=n===-1?"":t.slice(0,n+1),s=n===-1?t:t.slice(n+1),k=xe(P,x||".");if(!k)return[];const C="/"+k.join("/"),H=(_e(C)||[]).filter(W=>W.startsWith(s)).map(W=>{const se=`${C}/${W}`;return x+(Y(se)?W+"/":W)});return H.sort((W,se)=>{const ee=W.endsWith("/"),B=se.endsWith("/");return ee===B?W.localeCompare(se):ee?-1:1}),H.slice(0,20)}function de(){const t=c.split(/\s+/),n=t[0]||"",x=t[t.length-1]||"";let s=[];if(t.length===1?s=tt(x):["cd","ls","open"].includes(n)&&(s=nt(x)),ne=s,ge=0,ne.length){const C=ne[0].slice(x.length);Ee(C)}}function rt(){!Z||!re||(c=c.slice(0,m)+re+c.slice(m),m+=re.length,m===c.length?e.write(re):je(),fe())}function st(){if(!Z||ne.length<2)return;ge=(ge+1)%ne.length;const t=c.split(/\s+/),n=t[t.length-1]||"",s=ne[ge].slice(n.length);Ee(s)}function je(){e.write("\x1B[2K\r"),ce(),e.write(c),m<c.length&&e.write(`\x1B[${c.length-m}D`)}function Ne(t){t==="left"&&m>0?(m--,e.write("\x1B[D")):t==="right"&&m<c.length&&(m++,e.write("\x1B[C"))}function it(t){if(c=c.slice(0,m)+t+c.slice(m),m++,m===c.length)e.write(t);else{const n=c.slice(m-1);e.write(n),e.write(`\x1B[${n.length-1}D`)}}function ot(){if(m===0)return;c=c.slice(0,m-1)+c.slice(m),m--,e.write("\x1B[D");const t=c.slice(m)+" ";e.write(t),e.write(`\x1B[${t.length}D`)}let q="";const lt=t=>{if(!E)for(const n of t){const x=n.charCodeAt(0);if(q){if(q+=n,q==="\x1B[C"||q==="\x1B[D"){q="";continue}else q.length>=3&&(q="");continue}if(n==="\x1B"){q="\x1B";continue}switch(x){case 9:{rt(),de();break}case 13:{e.write(`\r
`);const s=c.trim();et(s),s&&$.push(s),F=$.length,c="",m=0,s==="clear"||e.write(`\r
`),ce();break}case 127:{ot(),de();break}default:x>=32&&x<127&&(fe(),it(n),de())}}};de(),e.onData(lt),e.onKey(({key:t,domEvent:n})=>{if(E){n.preventDefault();return}if(n.key==="ArrowUp"||n.key==="ArrowDown"){if(n.preventDefault(),!$.length)return;F===$.length&&(Q=c),n.key==="ArrowUp"&&F>0?F--:n.key==="ArrowDown"&&F<$.length&&F++,c=F===$.length?Q:$[F],m=c.length,je(),fe(),de();return}if(n.key==="Tab"&&n.shiftKey&&Z){n.preventDefault(),st();return}if(n.key==="ArrowLeft"){n.preventDefault(),Ne("left");return}if(n.key==="ArrowRight"){n.preventDefault(),Ne("right");return}Z&&!["Tab","Shift","Control","Alt","Meta"].includes(n.key)&&fe()}),z=Ae.loading.subscribe(t=>{E=t,t?y():V(ce)}),e.writeln("Type help for command list."),ce()}),ft(()=>{z&&z(),T&&clearInterval(T)}),qe();var b=Pt();let j;return He(b,a=>le(I,a),()=>f(I)),Je(a=>j=Be(b,1,"terminal-shell h-full w-full svelte-7500li",null,j,a),[()=>({focused:_()})],Oe),oe(o,b),Ke(r,"focusTerminal",N),Ke(r,"resizeTerminal",K),Qe({focusTerminal:N,resizeTerminal:K})}var Rt=Ie('<button class="desktop-toggle hidden md:flex svelte-ktovrz" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-ktovrz">terminal</span>',1),Bt=Ie('<button class="desktop-toggle hidden md:flex svelte-ktovrz" aria-label="Collapse terminal">▶</button>'),Ot=Ie('<div><div class="md:hidden flex items-center justify-between px-4 py-3 mobile-header svelte-ktovrz"><span class="mobile-title text-xs svelte-ktovrz">terminal</span> <button class="mobile-toggle svelte-ktovrz" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function Mt(o,r){Xe(r,!1);const h=ht(!1);Re(()=>{const i=sessionStorage.getItem("terminalCollapsed");i?h.set(i==="true"):window.innerWidth<768&&(h.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let l=ae(!1);h.subscribe(i=>le(l,i));function p(){h.update(i=>{const y=!i;return sessionStorage.setItem("terminalCollapsed",y.toString()),y||setTimeout(()=>{f(g)&&f(u)?.resizeTerminal(),f(u)?.focusTerminal()},300),y})}let u=ae(),g=ae(!1),I=ae(!1);Re(()=>{const i=()=>{le(g,window.innerWidth<768)},y=b=>{if(!(f(g)||!b.shiftKey)){if(b.key==="ArrowRight"&&!f(l))b.preventDefault(),b.stopImmediatePropagation(),p();else if(b.key==="ArrowLeft")f(l)?(b.preventDefault(),b.stopImmediatePropagation(),p()):(b.preventDefault(),b.stopImmediatePropagation(),f(u)?.focusTerminal());else if(b.key==="ArrowUp"&&!f(l)){b.preventDefault(),b.stopImmediatePropagation();const j=document.activeElement;j&&j.blur()}}};i(),window.addEventListener("resize",i),window.addEventListener("keydown",y,!0);const V=b=>{if(f(g))return;const j=document.activeElement;if(j&&j.classList.contains("xterm-helper-textarea"))return;const a=document.querySelector("main"),D=60;switch(b.key){case"j":(a??window).scrollBy({top:2*D,behavior:"smooth"});break;case"k":(a??window).scrollBy({top:-2*D,behavior:"smooth"});break;case"h":(a??window).scrollBy({left:-D,behavior:"smooth"});break;case"l":(a??window).scrollBy({left:D,behavior:"smooth"});break;default:return}b.preventDefault()};return window.addEventListener("keydown",V),()=>{window.removeEventListener("resize",i),window.removeEventListener("keydown",y,!0),window.removeEventListener("keydown",V)}}),qe();var _=Ot();let v;var A=be(_),N=Fe(be(A),2),K=be(N);{var X=i=>{var y=Ge("▼");oe(i,y)},E=i=>{var y=Ge("▲");oe(i,y)};Te(K,i=>{f(l)?i(X):i(E,!1)})}pe(N),pe(A);var T=Fe(A,2);{var J=i=>{var y=Rt(),V=Dt(y);St(2),Pe("click",V,p),oe(i,y)},G=(i,y)=>{{var V=b=>{var j=Bt();Pe("click",j,p),oe(b,j)};Te(i,b=>{f(g)||b(V)},y)}};Te(T,i=>{!f(g)&&f(l)?i(J):i(G,!1)})}var z=Fe(T,2),w=be(z);let d;var O=be(w);He(Ft(O,{get isFocused(){return f(I)},set isFocused(i){le(I,i)},$$legacy:!0}),i=>le(u,i),()=>f(u)),pe(w),pe(z),pe(_),Je((i,y)=>{v=Be(_,1,"h-full flex flex-col desktop-wrapper svelte-ktovrz",null,v,i),d=Be(w,1,"terminal-content body svelte-ktovrz",null,d,y)},[()=>({"desktop-collapsed":!f(g)&&f(l),focused:f(I)}),()=>({"mobile-collapsed":f(g)&&f(l)})],Oe),Pe("click",N,p),oe(o,_),Qe()}export{Mt as default};
