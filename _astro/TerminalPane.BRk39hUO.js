import{c as ft,o as Re,a as dt,i as He,b as Ye,_ as qe,d as xe,w as ut,l as ht,g as mt,s as je,e as bt,f as Pe,h as pt}from"./router.vtwier0s.js";import{C as Xe,t as gt,D as wt,L as vt,E as Oe,F as o,G as yt,I as _t,p as xt,J as re,K as kt,S as $t,M as It,N as Dt,P as St,O as se,Q as Ct,y as Je,R as De,T as Qe,U as ce,B as Ze,V as Fe,W as pe,X as Be,Y as ge,Z as Ge,_ as At,$ as Lt}from"./template.C3ZF97LW.js";/* empty css                        */function Ke(i,s,m){var a=Xe(i,s);a&&a.set&&(i[s]=m,gt(()=>{i[s]=null}))}function Ve(i){return i.ctx?.d??!1}function Tt(i,s,m,a){var w=!Dt||(m&St)!==0,u=(m&Ct)!==0,b=!1,x;[x,b]=ft(()=>i[s]);var I=$t in i||It in i,h=(Xe(i,s)?.set??(I&&s in i&&(d=>i[s]=d)))||void 0,R=a,M=!0,N=!1,Q=()=>(N=!0,M&&(M=!1,R=a),R);x===void 0&&a!==void 0&&(h&&w&&wt(),x=Q(),h&&h(x));var O;if(w)O=()=>{var d=i[s];return d===void 0?Q():(M=!0,N=!1,d)};else{var j=Oe(()=>i[s]);j.f|=vt,O=()=>{var d=o(j);return d!==void 0&&(R=void 0),d===void 0?R:d}}if(h){var V=i.$$legacy;return function(d,A){return arguments.length>0?((!w||!A||V||b)&&h(A?O():d),d):O()}}var q=!1,G=se(x),C=yt(()=>{var d=O(),A=o(G);return q?(q=!1,A):G.v=d});return o(C),C.equals=_t,function(d,A){if(arguments.length>0){const K=A?o(C):w&&u?xt(d):d;if(!C.equals(K)){if(q=!0,re(G,K),N&&R!==void 0&&(R=K),Ve(C))return d;kt(()=>o(C))}return d}return Ve(C)?C.v:o(C)}}function Pt(i){const s={name:"/",type:"dir",path:"/",children:{}};for(const m of i){const w=m.replace(/^\.\/?/,"").split("/");let u=s,b="";for(let x=0;x<w.length;x++){const I=w[x];b+="/"+I;const h=I.includes(".");u.children||(u.children={}),u.children[I]||(u.children[I]={name:I,type:h?"file":"dir",path:b},h||(u.children[I].children={})),u=u.children[I]}}return s}const Ft=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/contests/about.md":0,"/src/content/algo/contests/arc-205.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-1967c.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2056f2.md":0,"/src/content/algo/problems/cf-2068e.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/about.md":0,"/src/content/misc/void.md":0});let ke=null;function Bt(){if(ke)return ke;const i=Ft.map(s=>s.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return ke=Pt(i),ke}function Se(i){const s=i.split("/").filter(Boolean);let m=Bt();for(const a of s){if(!m.children||!m.children[a])return null;m=m.children[a]}return m}function $e(i){const s=Se(i);if(!s||s.type!=="dir"||!s.children)return null;const m=[],a=[];for(const[w,u]of Object.entries(s.children))u.type==="dir"?m.push(w):a.push(w);return m.sort(),a.sort(),[...m,...a]}function Ue(i){const s=Se(i);return!!s&&s.type==="file"}function J(i){const s=Se(i);return!!s&&s.type==="dir"}function Ie(i,s){if(s==="/")return[];const m=s.startsWith("/"),a=s.split("/").filter(Boolean),w=m?[]:[...i];for(const b of a)b===".."?w.pop():b!=="."&&w.push(b);return Se("/"+w.join("/"))?w:null}var Rt=De("<div></div>");function jt(i,s){Je(s,!1);const a="\x1B[38;2;100;255;218m",u="\x1B[38;2;255;230;120m",b="\x1B[37m";let x=se(),I=Tt(s,"isFocused",12,!0),h,R;function M(){h?.focus()}function N(){R?.fit()}let Q={},O=!1,j=null;const V=["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"];let q=0,G=null,C=!1;function d(c){return Q[c]??1/0}const A={};function K(c,D){const e=A[c];if(e&&(D?e.max!==void 0:e.min!==void 0))return D?typeof e.max=="number"?e.max:-1/0:typeof e.min=="number"?e.min:1/0;let S=D?-1/0:1/0;const H=$e(c)||[];for(const P of H){const L=c==="/"?"/"+P:`${c}/${P}`;let k;J(L)?k=K(L,D):L.endsWith(".html")?k=d(L):k=D?-1/0:1/0,S=D?Math.max(S,k):Math.min(S,k)}return A[c]||(A[c]={}),D?A[c].max=S:A[c].min=S,S}function l(c,D,e){const S=e==="desc";return[...D].sort((H,P)=>{const L=c==="/"?"/"+H:`${c}/${H}`,k=c==="/"?"/"+P:`${c}/${P}`;let F=J(L)?K(L,S):d(L),Z=J(k)?K(k,S):d(k);Number.isFinite(F)||(F=S?-1/0:1/0),Number.isFinite(Z)||(Z=S?-1/0:1/0);const f=S?Z-F:F-Z;return f===0?H.localeCompare(P):f})}function y(){j||!h||(h.write("\r\x1B[2K"),h.write(`${V[0]} Loading...`),j=setInterval(()=>{q=(q+1)%V.length,h?.write(`\r\x1B[2K${V[q]} Loading...`)},100))}function U(c){j&&(clearInterval(j),j=null),h&&(h.write("\r\x1B[K"),h.write(`${u}✓ Page loaded successfully\x1B[0m\r
`),h.write(`\r
`),c&&c())}Re(async()=>{I(!0);try{const t=await fetch("/vfs-date-index.json",{cache:"force-cache"});t.ok&&(Q=await t.json())}catch{}const{Terminal:c}=await qe(async()=>{const{Terminal:t}=await import("./xterm.CszRhTCM.js").then(n=>n.x);return{Terminal:t}},[]),{FitAddon:D}=await qe(async()=>{const{FitAddon:t}=await import("./addon-fit.xGgdMdBE.js").then(n=>n.a);return{FitAddon:t}},[]),e=new c({theme:{background:"#0a0a0a",foreground:"#e0e0e0",cursor:"#64ffda",cursorAccent:"#0a0a0a",selectionBackground:"rgba(100, 255, 218, 0.2)",selectionForeground:"#e0e0e0",black:"#0a0a0a",red:"#ff6b6b",green:"#51cf66",yellow:"#ffd43b",blue:"#339af0",magenta:"#f06595",cyan:"#64ffda",white:"#e0e0e0",brightBlack:"#495057",brightRed:"#ff8787",brightGreen:"#69db7c",brightYellow:"#ffe066",brightBlue:"#4dabf7",brightMagenta:"#f783ac",brightCyan:"#7fecec",brightWhite:"#f8f9fa"},cursorBlink:!1,fontFamily:"IBM Plex Mono, SF Mono, Menlo, Monaco, Consolas, monospace",fontSize:14,fontWeight:"400",letterSpacing:.5,cols:80,rows:24,convertEol:!0,allowProposedApi:!0,smoothScrollDuration:120}),S=new D;R=S,e.loadAddon(S),e.open(o(x)),h=e,S.fit(),e.focus();function H(t){I(t)}e.textarea?.addEventListener("focus",()=>H(!0)),e.textarea?.addEventListener("blur",()=>H(!1));let P=[],L=["/"],k=[],F=0,Z="",f="",p=0;const et=["ls","cd","open","pop","clear","help","skin","skins"];let ie=[],we=0,ee=!1,le="";const fe=()=>{const t="/"+P.join("/");e.write(`${a}${t}\x1B[0m $ `)};function tt(t){if(!t)return!1;const[n,..._]=t.split(/\s+/);switch(n){case"ls":{const r=_.filter(B=>B.startsWith("-")),v=r.includes("-R")||r.includes("-r"),$=r.includes("-v"),T=_.find(B=>!B.startsWith("-"))||".",z=Ie(P,T);if(!z)return e.writeln(`ls: cannot access '${T}': No such file or directory`),!1;const X="/"+z.join("/");if(Ue(X))return e.writeln(`${J(X)?b:u}${T}\x1B[0m`),!1;const W=r.includes("-d")||r.includes("-dl"),oe=r.includes("-de"),te=W?"desc":oe?"asc":null;if(v){const B=[],he=(ae,Ce="")=>{let ve="/"+ae.join("/"),ne=$e(ve)||[];te&&(ne=l(ve,ne,te)),ne.forEach((me,Ae)=>{const be=Ae===ne.length-1,ye=be?"└─ ":"├─ ",Le=[...ae,me],ze="/"+Le.join("/"),Te=J(ze),ct=Te?b:u;let We="";if($&&!Te){const _e=d(ze);Number.isFinite(_e)&&(We=`\x1B[2m[${new Date(_e).toISOString().slice(0,10)}]\x1B[0m `)}if(B.push(`${Ce}${ye}${We}${ct}${me}\x1B[0m`),Te){const _e=Ce+(be?"   ":"│  ");he(Le,_e)}})};he(z);for(const ae of B)e.writeln(ae)}else{let B=$e(X)||[];te&&(B=l(X,B,te)),B.forEach((he,ae)=>{const ve=ae===B.length-1?"└─ ":"├─ ",ne=`${X}/${he}`,me=J(ne),Ae=me?b:u;let be="";if($&&!me){const ye=d(ne.replace(/\.md$/,".html"));Number.isFinite(ye)&&(be=`\x1B[2m[${new Date(ye).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${ve}${be}${Ae}${he}\x1B[0m`)})}return!1}case"cd":{const r=_[0]||"/",v=Ie(P,r);if(!v){e.writeln(`cd: no such directory: ${r}`);break}const $="/"+v.join("/");if(!J($)){e.writeln(`cd: not a directory: ${r}`);break}return P=v,!1}case"open":{const r=_[0];if(!r)return e.writeln("open: missing file"),!1;const v=Ie(P,r);if(v&&Ue("/"+v.join("/"))){const $="/"+v.join("/");return mt(xe)===$?(e.writeln(`Already viewing: ${r}`),!1):(L.push($),xe.push($),!0)}else return e.writeln(`open: file not found: ${r}`),!1}case"pop":if(L.length>1){L.pop();const r=L[L.length-1];return xe.push(r),!0}else return e.writeln("pop: history empty"),!1;case"clear":return e.clear(),!1;case"skins":{const r=ht();return r.forEach((v,$)=>{const T=$===r.length-1?"└─ ":"├─ ";e.writeln(T+v)}),!1}case"skin":{const r=_[0];if(!r)e.writeln("Usage: skin <name>");else try{ut(r),e.writeln(`Now wearing ${r}`)}catch(v){e.writeln(String(v))}return!1}case"help":{const r=(T,z)=>T+" ".repeat(Math.max(0,z-T.length)),v=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${a}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:T,desc:z}of v)e.writeln(`${u}${r(T,14)}\x1B[0m  ${z}`);e.writeln(""),e.writeln(`${a}SHORTCUT        DESCRIPTION\x1B[0m`);const $=[{key:"Tab",desc:"accept autocomplete"},{key:"Shift+Tab",desc:"cycle suggestions"},{key:"← / →",desc:"move cursor left/right"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:T,desc:z}of $)e.writeln(`${u}${r(T,14)}\x1B[0m  ${z}`);return!1}default:return e.writeln(`unknown command: ${n}`),e.write("\r"),!1}return!1}function de(){ee&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),ee=!1,le="")}function Ee(t){if(de(),!t)return;e.write("\x1B[s");const n=p<f.length?`\x1B[${f.length-p}C`:"";e.write(n),e.write(`\x1B[90m${t}\x1B[0m`),e.write("\x1B[u"),ee=!0,le=t}function nt(t){return et.filter(n=>n.startsWith(t))}function rt(t){const n=t.lastIndexOf("/"),_=n===-1?"":t.slice(0,n+1),r=n===-1?t:t.slice(n+1),v=Ie(P,_||".");if(!v)return[];const $="/"+v.join("/"),X=($e($)||[]).filter(W=>W.startsWith(r)).map(W=>{const oe=`${$}/${W}`;return _+(J(oe)?W+"/":W)});return X.sort((W,oe)=>{const te=W.endsWith("/"),B=oe.endsWith("/");return te===B?W.localeCompare(oe):te?-1:1}),X.slice(0,20)}function ue(){const t=f.split(/\s+/),n=t[0]||"",_=t[t.length-1]||"";let r=[];if(t.length===1?r=nt(_):["cd","ls","open"].includes(n)&&(r=rt(_)),ie=r,we=0,ie.length){const $=ie[0].slice(_.length);Ee($)}}function st(){!ee||!le||(f=f.slice(0,p)+le+f.slice(p),p+=le.length,p===f.length?e.write(le):Me(),de())}function it(){if(!ee||ie.length<2)return;we=(we+1)%ie.length;const t=f.split(/\s+/),n=t[t.length-1]||"",r=ie[we].slice(n.length);Ee(r)}function Me(){e.write("\x1B[2K\r"),fe(),e.write(f),p<f.length&&e.write(`\x1B[${f.length-p}D`)}function Ne(t){t==="left"&&p>0?(p--,e.write("\x1B[D")):t==="right"&&p<f.length&&(p++,e.write("\x1B[C"))}function lt(t){if(f=f.slice(0,p)+t+f.slice(p),p++,p===f.length)e.write(t);else{const n=f.slice(p-1);e.write(n),e.write(`\x1B[${n.length-1}D`)}}function ot(){if(p===0)return;f=f.slice(0,p-1)+f.slice(p),p--,e.write("\x1B[D");const t=f.slice(p)+" ";e.write(t),e.write(`\x1B[${t.length}D`)}let Y="";const at=t=>{if(!O)for(const n of t){const _=n.charCodeAt(0);if(Y){if(Y+=n,Y==="\x1B[C"||Y==="\x1B[D"){Y="";continue}else Y.length>=3&&(Y="");continue}if(n==="\x1B"){Y="\x1B";continue}switch(_){case 9:{st(),ue();break}case 13:{e.write(`\r
`);const r=f.trim(),v=tt(r);r&&k.push(r),F=k.length,f="",p=0,r==="clear"?fe():v||(e.write(`\r
`),fe());break}case 127:{ot(),ue();break}default:_>=32&&_<127&&(de(),lt(n),ue())}}};ue(),e.onData(at),e.onKey(({key:t,domEvent:n})=>{if(O){n.preventDefault();return}if(n.key==="ArrowUp"||n.key==="ArrowDown"){if(n.preventDefault(),!k.length)return;F===k.length&&(Z=f),n.key==="ArrowUp"&&F>0?F--:n.key==="ArrowDown"&&F<k.length&&F++,f=F===k.length?Z:k[F],p=f.length,Me(),de(),ue();return}if(n.key==="Tab"&&n.shiftKey&&ee){n.preventDefault(),it();return}if(n.key==="ArrowLeft"){n.preventDefault(),Ne("left");return}if(n.key==="ArrowRight"){n.preventDefault(),Ne("right");return}ee&&!["Tab","Shift","Control","Alt","Meta"].includes(n.key)&&de()}),e.writeln("Type help for command list."),e.writeln(""),fe(),C=!0,G=xe.loading.subscribe(t=>{if(O=t,t)y();else{if(!C)return;U(fe)}})}),dt(()=>{G&&G(),j&&clearInterval(j)}),He();var g=Rt();let E;return Ye(g,c=>re(x,c),()=>o(x)),Qe(c=>E=je(g,1,"terminal-shell h-full w-full svelte-7500li",null,E,c),[()=>({focused:I()})],Oe),ce(i,g),Ke(s,"focusTerminal",M),Ke(s,"resizeTerminal",N),Ze({focusTerminal:M,resizeTerminal:N})}var Ot=De('<button class="desktop-toggle hidden md:flex svelte-1yuj3zq" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-1yuj3zq">terminal</span>',1),Et=De('<button class="desktop-toggle hidden md:flex svelte-1yuj3zq" aria-label="Collapse terminal">▶</button>'),Mt=De('<div><div class="md:hidden flex items-center justify-between px-4 py-3 mobile-header svelte-1yuj3zq"><span class="mobile-title text-xs svelte-1yuj3zq">terminal</span> <button class="mobile-toggle svelte-1yuj3zq" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function Gt(i,s){Je(s,!1);const m=bt(!1);Re(()=>{const l=sessionStorage.getItem("terminalCollapsed");l?m.set(l==="true"):window.innerWidth<768&&(m.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let a=se(!1);m.subscribe(l=>re(a,l));function w(){m.update(l=>{const y=!l;return sessionStorage.setItem("terminalCollapsed",y.toString()),y||setTimeout(()=>{o(b)&&o(u)?.resizeTerminal(),o(u)?.focusTerminal()},300),y})}let u=se(),b=se(!1),x=se(!1),I=se(480);Re(()=>{const l=()=>{re(b,window.innerWidth<768),o(b)||(re(I,Math.max(320,Math.min(600,window.innerWidth*.3))),setTimeout(()=>{o(u)?.resizeTerminal()},100))},y=g=>{if(!(o(b)||!g.shiftKey)){if(g.key==="ArrowRight"&&!o(a))g.preventDefault(),g.stopImmediatePropagation(),w();else if(g.key==="ArrowLeft")o(a)?(g.preventDefault(),g.stopImmediatePropagation(),w()):(g.preventDefault(),g.stopImmediatePropagation(),o(u)?.focusTerminal());else if(g.key==="ArrowUp"&&!o(a)){g.preventDefault(),g.stopImmediatePropagation();const E=document.activeElement;E&&E.blur()}}};l(),window.addEventListener("resize",l),window.addEventListener("keydown",y,!0);const U=g=>{if(o(b))return;const E=document.activeElement;if(E&&E.classList.contains("xterm-helper-textarea"))return;const c=document.querySelector("main"),D=60;switch(g.key){case"j":(c??window).scrollBy({top:2*D,behavior:"smooth"});break;case"k":(c??window).scrollBy({top:-2*D,behavior:"smooth"});break;case"h":(c??window).scrollBy({left:-D,behavior:"smooth"});break;case"l":(c??window).scrollBy({left:D,behavior:"smooth"});break;default:return}g.preventDefault()};return window.addEventListener("keydown",U),()=>{window.removeEventListener("resize",l),window.removeEventListener("keydown",y,!0),window.removeEventListener("keydown",U)}}),He();var h=Mt();let R;var M=pe(h),N=Be(pe(M),2),Q=pe(N);{var O=l=>{var y=Ge("▼");ce(l,y)},j=l=>{var y=Ge("▲");ce(l,y)};Pe(Q,l=>{o(a)?l(O):l(j,!1)})}ge(N),ge(M);var V=Be(M,2);{var q=l=>{var y=Ot(),U=At(y);Lt(2),Fe("click",U,w),ce(l,y)},G=(l,y)=>{{var U=g=>{var E=Et();Fe("click",E,w),ce(g,E)};Pe(l,g=>{o(b)||g(U)},y)}};Pe(V,l=>{!o(b)&&o(a)?l(q):l(G,!1)})}var C=Be(V,2),d=pe(C);let A;var K=pe(d);Ye(jt(K,{get isFocused(){return o(x)},set isFocused(l){re(x,l)},$$legacy:!0}),l=>re(u,l),()=>o(u)),ge(d),ge(C),ge(h),Qe((l,y)=>{R=je(h,1,"h-full flex flex-col desktop-wrapper svelte-1yuj3zq",null,R,l),pt(h,o(b)?"":`width: ${o(I)}px`),A=je(d,1,"terminal-content body svelte-1yuj3zq",null,A,y)},[()=>({"desktop-collapsed":!o(b)&&o(a),focused:o(x)}),()=>({"mobile-collapsed":o(b)&&o(a)})],Oe),Fe("click",N,w),ce(i,h),Ze()}export{Gt as default};
