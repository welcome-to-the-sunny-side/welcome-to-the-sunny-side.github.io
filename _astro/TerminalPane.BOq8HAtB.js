import{o as De,i as Ee,b as Me,_ as Pe,w as et,l as tt,c as Be,s as Ce,a as nt,d as _e}from"./router.C-4rq7JE.js";import{C as st,t as it,y as Ne,D as ge,E as V,F as g,G as We,I as H,B as qe,J as oe,K as ze,L as $e,M as se,N as Ie,O as ie,P as Oe,Q as ot,R as rt}from"./template.WFYKrgdx.js";/* empty css                        */function Re(b,o,p){var l=st(b,o);l&&l.set&&(b[o]=p,it(()=>{b[o]=null}))}function ct(b){const o={name:"/",type:"dir",path:"/",children:{}};for(const p of b){const x=p.replace(/^\.\/?/,"").split("/");let u=o,w="";for(let A=0;A<x.length;A++){const $=x[A];w+="/"+$;const L=$.includes(".");u.children||(u.children={}),u.children[$]||(u.children[$]={name:$,type:L?"file":"dir",path:w},L||(u.children[$].children={})),u=u.children[$]}}return o}const lt=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/contests/about.md":0,"/src/content/algo/contests/arc-205.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-1967c.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2056f2.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/about.md":0,"/src/content/misc/void.md":0});let me=null;function at(){if(me)return me;const b=lt.map(o=>o.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return me=ct(b),me}function we(b){const o=b.split("/").filter(Boolean);let p=at();for(const l of o){if(!p.children||!p.children[l])return null;p=p.children[l]}return p}function be(b){const o=we(b);if(!o||o.type!=="dir"||!o.children)return null;const p=[],l=[];for(const[x,u]of Object.entries(o.children))u.type==="dir"?p.push(x):l.push(x);return p.sort(),l.sort(),[...p,...l]}function je(b){const o=we(b);return!!o&&o.type==="file"}function O(b){const o=we(b);return!!o&&o.type==="dir"}function pe(b,o){if(o==="/")return[];const p=o.startsWith("/"),l=o.split("/").filter(Boolean),x=p?[]:[...b];for(const w of l)w===".."?x.pop():w!=="."&&x.push(w);return we("/"+x.join("/"))?x:null}var ft=ge("<div></div>");function dt(b,o){Ne(o,!1);const l="\x1B[38;2;100;255;218m",u="\x1B[38;2;255;230;120m",w="\x1B[37m";let A=oe(),$=oe(!0),L,q;function re(){L?.focus()}function ce(){q?.fit()}let le={};function F(a){return le[a]??1/0}const R={};function U(a,s){const e=R[a];if(e&&(s?e.max!==void 0:e.min!==void 0))return s?typeof e.max=="number"?e.max:-1/0:typeof e.min=="number"?e.min:1/0;let f=s?-1/0:1/0;const r=be(a)||[];for(const h of r){const y=a==="/"?"/"+h:`${a}/${h}`;let m;O(y)?m=U(y,s):y.endsWith(".html")?m=F(y):m=s?-1/0:1/0,f=s?Math.max(f,m):Math.min(f,m)}return R[a]||(R[a]={}),s?R[a].max=f:R[a].min=f,f}function J(a,s,e){const f=e==="desc";return[...s].sort((r,h)=>{const y=a==="/"?"/"+r:`${a}/${r}`,m=a==="/"?"/"+h:`${a}/${h}`;let I=O(y)?U(y,f):F(y),E=O(m)?U(m,f):F(m);Number.isFinite(I)||(I=f?-1/0:1/0),Number.isFinite(E)||(E=f?-1/0:1/0);const c=f?E-I:I-E;return c===0?r.localeCompare(h):c})}De(async()=>{V($,!0);try{const t=await fetch("/vfs-date-index.json",{cache:"force-cache"});t.ok&&(le=await t.json())}catch{}const{Terminal:a}=await Pe(async()=>{const{Terminal:t}=await import("./xterm.CszRhTCM.js").then(n=>n.x);return{Terminal:t}},[]),{FitAddon:s}=await Pe(async()=>{const{FitAddon:t}=await import("./addon-fit.xGgdMdBE.js").then(n=>n.a);return{FitAddon:t}},[]),e=new a({theme:{background:"#0a0a0a",foreground:"#e0e0e0",cursor:"#64ffda",cursorAccent:"#0a0a0a",selectionBackground:"rgba(100, 255, 218, 0.2)",selectionForeground:"#e0e0e0",black:"#0a0a0a",red:"#ff6b6b",green:"#51cf66",yellow:"#ffd43b",blue:"#339af0",magenta:"#f06595",cyan:"#64ffda",white:"#e0e0e0",brightBlack:"#495057",brightRed:"#ff8787",brightGreen:"#69db7c",brightYellow:"#ffe066",brightBlue:"#4dabf7",brightMagenta:"#f783ac",brightCyan:"#7fecec",brightWhite:"#f8f9fa"},cursorBlink:!1,fontFamily:"IBM Plex Mono, SF Mono, Menlo, Monaco, Consolas, monospace",fontSize:14,fontWeight:"400",letterSpacing:.5,cols:80,rows:24,convertEol:!0,allowProposedApi:!0,smoothScrollDuration:120}),f=new s;q=f,e.loadAddon(f),e.open(g(A)),L=e,f.fit(),e.focus();function r(t){V($,t)}e.textarea?.addEventListener("focus",()=>r(!0)),e.textarea?.addEventListener("blur",()=>r(!1));let h=[],y=["/"],m=[],I=0,E="",c="",d=0;const Ge=["ls","cd","open","pop","clear","help","skin","skins"];let z=[],ae=0,M=!1,X="";const fe=()=>{const t="/"+h.join("/");e.write(`${l}${t}\x1B[0m $ `)};function Ke(t){if(!t)return;const[n,...v]=t.split(/\s+/);switch(n){case"ls":{const i=v.filter(C=>C.startsWith("-")),k=i.includes("-R")||i.includes("-r"),_=i.includes("-v"),D=v.find(C=>!C.startsWith("-"))||".",T=pe(h,D);if(!T){e.writeln(`ls: cannot access '${D}': No such file or directory`);break}const B="/"+T.join("/");if(je(B)){e.writeln(`${O(B)?w:u}${D}\x1B[0m`);break}const S=i.includes("-d")||i.includes("-dl"),G=i.includes("-de"),N=S?"desc":G?"asc":null;if(k){const C=[],ee=(K,ye="")=>{let de="/"+K.join("/"),W=be(de)||[];N&&(W=J(de,W,N)),W.forEach((te,ke)=>{const ne=ke===W.length-1,ue=ne?"└─ ":"├─ ",ve=[...K,te],Le="/"+ve.join("/"),xe=O(Le),Ze=xe?w:u;let Fe="";if(_&&!xe){const he=F(Le);Number.isFinite(he)&&(Fe=`\x1B[2m[${new Date(he).toISOString().slice(0,10)}]\x1B[0m `)}if(C.push(`${ye}${ue}${Fe}${Ze}${te}\x1B[0m`),xe){const he=ye+(ne?"   ":"│  ");ee(ve,he)}})};ee(T);for(const K of C)e.writeln(K)}else{let C=be(B)||[];N&&(C=J(B,C,N)),C.forEach((ee,K)=>{const de=K===C.length-1?"└─ ":"├─ ",W=`${B}/${ee}`,te=O(W),ke=te?w:u;let ne="";if(_&&!te){const ue=F(W.replace(/\.md$/,".html"));Number.isFinite(ue)&&(ne=`\x1B[2m[${new Date(ue).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${de}${ne}${ke}${ee}\x1B[0m`)})}break}case"cd":{const i=v[0]||"/",k=pe(h,i);if(!k){e.writeln(`cd: no such directory: ${i}`);break}const _="/"+k.join("/");if(!O(_)){e.writeln(`cd: not a directory: ${i}`);break}h=k;break}case"open":{const i=v[0];if(!i){e.writeln("open: missing file");break}const k=pe(h,i);if(k&&je("/"+k.join("/"))){const _="/"+k.join("/");y.push(_),Be.push(_)}else e.writeln(`open: file not found: ${i}`);break}case"pop":{if(y.length>1){y.pop();const i=y[y.length-1];Be.push(i)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const i=tt();i.forEach((k,_)=>{const D=_===i.length-1?"└─ ":"├─ ";e.writeln(D+k)});break}case"skin":{const i=v[0];if(!i)e.writeln("Usage: skin <name>");else try{et(i),e.writeln(`Now wearing ${i}`)}catch(k){e.writeln(String(k))}break}case"help":{const i=(D,T)=>D+" ".repeat(Math.max(0,T-D.length)),k=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${l}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:D,desc:T}of k)e.writeln(`${u}${i(D,14)}\x1B[0m  ${T}`);e.writeln(""),e.writeln(`${l}SHORTCUT        DESCRIPTION\x1B[0m`);const _=[{key:"Tab",desc:"accept autocomplete"},{key:"Shift+Tab",desc:"cycle suggestions"},{key:"← / →",desc:"move cursor left/right"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:D,desc:T}of _)e.writeln(`${u}${i(D,14)}\x1B[0m  ${T}`);break}default:e.writeln(`unknown command: ${n}`),e.write("\r")}}function Y(){M&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),M=!1,X="")}function Ae(t){if(Y(),!t)return;e.write("\x1B[s");const n=d<c.length?`\x1B[${c.length-d}C`:"";e.write(n),e.write(`\x1B[90m${t}\x1B[0m`),e.write("\x1B[u"),M=!0,X=t}function He(t){return Ge.filter(n=>n.startsWith(t))}function Ve(t){const n=t.lastIndexOf("/"),v=n===-1?"":t.slice(0,n+1),i=n===-1?t:t.slice(n+1),k=pe(h,v||".");if(!k)return[];const _="/"+k.join("/"),B=(be(_)||[]).filter(S=>S.startsWith(i)).map(S=>{const G=`${_}/${S}`;return v+(O(G)?S+"/":S)});return B.sort((S,G)=>{const N=S.endsWith("/"),C=G.endsWith("/");return N===C?S.localeCompare(G):N?-1:1}),B.slice(0,20)}function Z(){const t=c.split(/\s+/),n=t[0]||"",v=t[t.length-1]||"";let i=[];if(t.length===1?i=He(v):["cd","ls","open"].includes(n)&&(i=Ve(v)),z=i,ae=0,z.length){const _=z[0].slice(v.length);Ae(_)}}function Ue(){!M||!X||(c=c.slice(0,d)+X+c.slice(d),d+=X.length,Te(),Y())}function Je(){if(!M||z.length<2)return;ae=(ae+1)%z.length;const t=c.split(/\s+/),n=t[t.length-1]||"",i=z[ae].slice(n.length);Ae(i)}function Te(){e.write("\x1B[2K\r"),fe(),e.write(c),d<c.length&&e.write(`\x1B[${c.length-d}D`)}function Se(t){t==="left"&&d>0?(d--,e.write("\x1B[D")):t==="right"&&d<c.length&&(d++,e.write("\x1B[C"))}function Qe(t){if(c=c.slice(0,d)+t+c.slice(d),d++,d===c.length)e.write(t);else{const n=c.slice(d-1);e.write(n),e.write(`\x1B[${n.length-1}D`)}}function Xe(){if(d===0)return;c=c.slice(0,d-1)+c.slice(d),d--,e.write("\x1B[D");const t=c.slice(d)+" ";e.write(t),e.write(`\x1B[${t.length}D`)}let P="";const Ye=t=>{for(const n of t){const v=n.charCodeAt(0);if(P){if(P+=n,P==="\x1B[C"||P==="\x1B[D"){P="";continue}else P.length>=3&&(P="");continue}if(n==="\x1B"){P="\x1B";continue}switch(v){case 9:{Ue(),Z();break}case 13:{e.write(`\r
`);const i=c.trim();Ke(i),i&&m.push(i),I=m.length,c="",d=0,i==="clear"||e.write(`\r
`),fe();break}case 127:{Xe(),Z();break}default:v>=32&&v<127&&(Y(),Qe(n),Z())}}};Z(),e.onData(Ye),e.onKey(({key:t,domEvent:n})=>{if(n.key==="ArrowUp"||n.key==="ArrowDown"){if(n.preventDefault(),!m.length)return;I===m.length&&(E=c),n.key==="ArrowUp"&&I>0?I--:n.key==="ArrowDown"&&I<m.length&&I++,c=I===m.length?E:m[I],d=c.length,Te(),Y(),Z();return}if(n.key==="Tab"&&n.shiftKey&&M){n.preventDefault(),Je();return}if(n.key==="ArrowLeft"){n.preventDefault(),Se("left");return}if(n.key==="ArrowRight"){n.preventDefault(),Se("right");return}M&&!["Tab","Shift","Control","Alt","Meta"].includes(n.key)&&Y()}),e.writeln("Type help for command list."),fe()}),Ee();var j=ft();let Q;return Me(j,a=>V(A,a),()=>g(A)),We(a=>Q=Ce(j,1,"terminal-shell h-full w-full svelte-19z614e",null,Q,a),[()=>({focused:g($)})],ze),H(b,j),Re(o,"focusTerminal",re),Re(o,"resizeTerminal",ce),qe({focusTerminal:re,resizeTerminal:ce})}var ut=ge('<button class="desktop-toggle hidden md:flex svelte-1qekhyf" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-1qekhyf">terminal</span>',1),ht=ge('<button class="desktop-toggle hidden md:flex svelte-1qekhyf" aria-label="Collapse terminal">▶</button>'),mt=ge('<div><div class="md:hidden flex items-center justify-between px-4 py-3 mobile-header svelte-1qekhyf"><span class="mobile-title text-xs svelte-1qekhyf">terminal</span> <button class="mobile-toggle svelte-1qekhyf" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function yt(b,o){Ne(o,!1);const p=nt(!1);De(()=>{const s=sessionStorage.getItem("terminalCollapsed");s?p.set(s==="true"):window.innerWidth<768&&(p.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let l=oe(!1);p.subscribe(s=>V(l,s));function x(){p.update(s=>{const e=!s;return sessionStorage.setItem("terminalCollapsed",e.toString()),e||setTimeout(()=>{g(w)&&g(u)?.resizeTerminal(),g(u)?.focusTerminal()},300),e})}let u=oe(),w=oe(!1);De(()=>{const s=()=>{V(w,window.innerWidth<768)},e=r=>{if(!(g(w)||!r.shiftKey)){if(r.key==="ArrowRight"&&!g(l))r.preventDefault(),r.stopImmediatePropagation(),x();else if(r.key==="ArrowLeft")g(l)?(r.preventDefault(),r.stopImmediatePropagation(),x()):(r.preventDefault(),r.stopImmediatePropagation(),g(u)?.focusTerminal());else if(r.key==="ArrowUp"&&!g(l)){r.preventDefault(),r.stopImmediatePropagation();const h=document.activeElement;h&&h.blur()}}};s(),window.addEventListener("resize",s),window.addEventListener("keydown",e,!0);const f=r=>{if(g(w))return;const h=document.activeElement;if(h&&h.classList.contains("xterm-helper-textarea"))return;const y=document.querySelector("main"),m=60;switch(r.key){case"j":(y??window).scrollBy({top:2*m,behavior:"smooth"});break;case"k":(y??window).scrollBy({top:-2*m,behavior:"smooth"});break;case"h":(y??window).scrollBy({left:-m,behavior:"smooth"});break;case"l":(y??window).scrollBy({left:m,behavior:"smooth"});break;default:return}r.preventDefault()};return window.addEventListener("keydown",f),()=>{window.removeEventListener("resize",s),window.removeEventListener("keydown",e,!0),window.removeEventListener("keydown",f)}}),Ee();var A=mt();let $;var L=se(A),q=Ie(se(L),2),re=se(q);{var ce=s=>{var e=Oe("▼");H(s,e)},le=s=>{var e=Oe("▲");H(s,e)};_e(re,s=>{g(l)?s(ce):s(le,!1)})}ie(q),ie(L);var F=Ie(L,2);{var R=s=>{var e=ut(),f=ot(e);rt(2),$e("click",f,x),H(s,e)},U=(s,e)=>{{var f=r=>{var h=ht();$e("click",h,x),H(r,h)};_e(s,r=>{g(w)||r(f)},e)}};_e(F,s=>{!g(w)&&g(l)?s(R):s(U,!1)})}var J=Ie(F,2),j=se(J);let Q;var a=se(j);Me(dt(a,{$$legacy:!0}),s=>V(u,s),()=>g(u)),ie(j),ie(J),ie(A),We((s,e)=>{$=Ce(A,1,"h-full flex flex-col desktop-wrapper svelte-1qekhyf",null,$,s),Q=Ce(j,1,"terminal-content body svelte-1qekhyf",null,Q,e)},[()=>({"desktop-collapsed":!g(w)&&g(l)}),()=>({"mobile-collapsed":g(w)&&g(l)})],ze),$e("click",q,x),H(b,A),qe()}export{yt as default};
