import{o as Re,i as Be,f as We,_ as De,w as et,l as tt,e as Pe,c as Fe,h as nt,b as Le}from"./router.lTAKfsPg.js";import{ad as ot,X as st,$ as Me,a0 as ve,_ as Z,d as f,D as He,a4 as Y,a5 as Ve,q as fe,e as Ge,a7 as Te,a6 as ce,a2 as Ce,a3 as le,ae as je,a1 as rt,af as it}from"./template.CVHwsLK3.js";import ct from"./about.BKDt97ao.js";import lt from"./about.Cl4aM1CR.js";import at from"./about.wv7e_aDv.js";import ft from"./about.DmETiz7C.js";import dt from"./cf-1967c.Cm97SFHG.js";import mt from"./cf-2056f1.uryPofdA.js";import ut from"./cf-2056f2.5CJYskyK.js";import ht from"./cf-2113e.Cl8UtRBg.js";import pt from"./cf-468d.BGfZYA_9.js";import bt from"./about.ME4M5TEQ.js";import _t from"./detect_k_neighbours_bip.DwIEFckk.js";import gt from"./offline_incremental_scc.DjERIihu.js";import wt from"./suffix_tree_funny_construction.w2_kFUV8.js";import vt from"./about.DNWgHey0.js";import yt from"./home.mgOJEq68.js";import kt from"./about.ArFzgRQy.js";import xt from"./void.DsDRx8Cu.js";import $t from"./zetamac.Bgd4015h.js";/* empty css                        */function ze(h,r,p){var l=ot(h,r);l&&l.set&&(h[r]=p,st(()=>{h[r]=null}))}function It(h){const r={name:"/",type:"dir",path:"/",children:{}};for(const p of h){const y=p.replace(/^\.\/?/,"").split("/");let d=r,b="";for(let T=0;T<y.length;T++){const I=y[T];b+="/"+I;const P=I.includes(".");d.children||(d.children={}),d.children[I]||(d.children[I]={name:I,type:P?"file":"dir",path:b},P||(d.children[I].children={})),d=d.children[I]}}return r}const At=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-1967c.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2056f2.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/about.md":0,"/src/content/misc/void.md":0});let we=null;function Dt(){if(we)return we;const h=At.map(r=>r.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return we=It(h),we}function ye(h){const r=h.split("/").filter(Boolean);let p=Dt();for(const l of r){if(!p.children||!p.children[l])return null;p=p.children[l]}return p}function ae(h){const r=ye(h);if(!r||r.type!=="dir"||!r.children)return null;const p=[],l=[];for(const[y,d]of Object.entries(r.children))d.type==="dir"?p.push(y):l.push(y);return p.sort(),l.sort(),[...p,...l]}function Se(h){const r=ye(h);return!!r&&r.type==="file"}function W(h){const r=ye(h);return!!r&&r.type==="dir"}function Q(h,r){if(r==="/")return[];const p=r.startsWith("/"),l=r.split("/").filter(Boolean),y=p?[]:[...h];for(const b of l)b===".."?y.pop():b!=="."&&y.push(b);return ye("/"+y.join("/"))?y:null}var Lt=ve("<div></div>");function Tt(h,r){Me(r,!1);const l="\x1B[38;2;100;255;218m",d="\x1B[38;2;255;230;120m",b="\x1B[37m";let T=fe(),I=fe(!0),P,J;function de(){P?.focus()}function me(){J?.fit()}const ke=Object.assign({"/src/content/about.md":ct,"/src/content/algo/about.md":lt,"/src/content/algo/notes/about.md":at,"/src/content/algo/problems/about.md":ft,"/src/content/algo/problems/cf-1967c.md":dt,"/src/content/algo/problems/cf-2056f1.md":mt,"/src/content/algo/problems/cf-2056f2.md":ut,"/src/content/algo/problems/cf-2113e.md":ht,"/src/content/algo/problems/cf-468d.md":pt,"/src/content/algo/theory/about.md":bt,"/src/content/algo/theory/detect_k_neighbours_bip.md":_t,"/src/content/algo/theory/offline_incremental_scc.md":gt,"/src/content/algo/theory/suffix_tree_funny_construction.md":wt,"/src/content/games/about.md":vt,"/src/content/home.md":yt,"/src/content/misc/about.md":kt,"/src/content/misc/void.md":xt}),ue=Object.assign({"/src/content/games/zetamac.html":$t});function xe(t){if(!t)return 1/0;const c=/---[\s\S]*?^date:\s*(\d{4}-\d{2}-\d{2})/m.exec(t);if(!c)return 1/0;const u=Date.parse(c[1]);return Number.isNaN(u)?1/0:u}function G(t){const c=he(t);if(c)return xe(c);const u=ue["/src/content"+t]??null;if(!u)return 1/0;const e=/<meta\s+name=["']wtss:date["']\s+content=["'](\d{4}-\d{2}-\d{2})["'][^>]*>/i.exec(u);if(!e)return 1/0;const C=Date.parse(e[1]);return Number.isNaN(C)?1/0:C}const M={};function K(t,c){const u=M[t];if(u&&(c?u.max!==void 0:u.min!==void 0))return c?typeof u.max=="number"?u.max:-1/0:typeof u.min=="number"?u.min:1/0;let e=c?-1/0:1/0;const C=ae(t)||[];for(const z of C){const k=t==="/"?"/"+z:`${t}/${z}`;let $;W(k)?$=K(k,c):k.endsWith(".html")?$=G(k):$=c?-1/0:1/0,e=c?Math.max(e,$):Math.min(e,$)}return M[t]||(M[t]={}),c?M[t].max=e:M[t].min=e,e}function ee(t,c,u){const e=u==="desc";return[...c].sort((C,z)=>{const k=t==="/"?"/"+C:`${t}/${C}`,$=t==="/"?"/"+z:`${t}/${z}`;let S=W(k)?K(k,e):G(k),A=W($)?K($,e):G($);Number.isFinite(S)||(S=e?-1/0:1/0),Number.isFinite(A)||(A=e?-1/0:1/0);const te=e?A-S:S-A;return te===0?C.localeCompare(z):te})}function he(t){const c=t.replace(/^\//,"").replace(/\.html$/,".md");return ke["/src/content/"+c]??null}let i;Re(async()=>{Z(I,!0);const{default:t}=await De(async()=>{const{default:s}=await import("./fuse.CvLDeDq6.js");return{default:s}},[]);i=t;const{Terminal:c}=await De(async()=>{const{Terminal:s}=await import("./xterm.CszRhTCM.js").then(o=>o.x);return{Terminal:s}},[]),{FitAddon:u}=await De(async()=>{const{FitAddon:s}=await import("./addon-fit.xGgdMdBE.js").then(o=>o.a);return{FitAddon:s}},[]),e=new c({theme:{background:"#0f0f0f",foreground:"#d0d0d0",cursor:"rgb(100,255,218)"},fontFamily:"IBM Plex Mono, Menlo, monospace",fontSize:13,letterSpacing:.25,cols:80,rows:24,convertEol:!0}),C=new u;J=C,e.loadAddon(C),e.open(f(T)),P=e,C.fit(),e.focus();function z(s){Z(I,s)}e.textarea?.addEventListener("focus",()=>z(!0)),e.textarea?.addEventListener("blur",()=>z(!1));let k=[],$=["/"],S=[],A=0,te="",R="";const Ke=["ls","cd","open","pop","clear","help","grep","skin","skins"];let U=[],pe=0,q=!1,ne="";const be=()=>{const s="/"+k.join("/");e.write(`${l}${s}\x1B[0m $ `)};function Ue(s){if(!s)return;const[o,...a]=s.split(/\s+/);switch(o){case"ls":{const n=a.filter(v=>v.startsWith("-")),m=n.includes("-R")||n.includes("-r"),w=n.includes("-v"),x=a.find(v=>!v.startsWith("-"))||".",F=Q(k,x);if(!F){e.writeln(`ls: cannot access '${x}': No such file or directory`);break}const E="/"+F.join("/");if(Se(E)){e.writeln(`${W(E)?b:d}${x}\x1B[0m`);break}const D=n.includes("-d")||n.includes("-dl"),B=n.includes("-de"),V=D?"desc":B?"asc":null;if(m){const v=[],g=(L,N="")=>{let O="/"+L.join("/"),X=ae(O)||[];V&&(X=ee(O,X,V)),X.forEach((re,$e)=>{const ie=$e===X.length-1,_e=ie?"└─ ":"├─ ",Ie=[...L,re],Ne="/"+Ie.join("/"),Ae=W(Ne),Ze=Ae?b:d;let Oe="";if(w&&!Ae){const ge=G(Ne);Number.isFinite(ge)&&(Oe=`\x1B[2m[${new Date(ge).toISOString().slice(0,10)}]\x1B[0m `)}if(v.push(`${N}${_e}${Oe}${Ze}${re}\x1B[0m`),Ae){const ge=N+(ie?"   ":"│  ");g(Ie,ge)}})};g(F);for(const L of v)e.writeln(L)}else{let v=ae(E)||[];V&&(v=ee(E,v,V)),v.forEach((g,L)=>{const O=L===v.length-1?"└─ ":"├─ ",X=`${E}/${g}`,re=W(X),$e=re?b:d;let ie="";if(w&&!re){const _e=G(X.replace(/\.md$/,".html"));Number.isFinite(_e)&&(ie=`\x1B[2m[${new Date(_e).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${O}${ie}${$e}${g}\x1B[0m`)})}break}case"cd":{const n=a[0]||"/",m=Q(k,n);if(!m){e.writeln(`cd: no such directory: ${n}`);break}const w="/"+m.join("/");if(!W(w)){e.writeln(`cd: not a directory: ${n}`);break}k=m;break}case"open":{const n=a[0];if(!n){e.writeln("open: missing file");break}const m=Q(k,n);if(m&&Se("/"+m.join("/"))){const w="/"+m.join("/");$.push(w),Pe.push(w)}else e.writeln(`open: file not found: ${n}`);break}case"pop":{if($.length>1){$.pop();const n=$[$.length-1];Pe.push(n)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const n=tt();n.forEach((m,w)=>{const x=w===n.length-1?"└─ ":"├─ ";e.writeln(x+m)});break}case"skin":{const n=a[0];if(!n)e.writeln("Usage: skin <name>");else try{et(n),e.writeln(`Now wearing ${n}`)}catch(m){e.writeln(String(m))}break}case"grep":{if(!a.length){e.writeln("grep: usage: grep <pattern> [path]");break}let n=null;if(a.length>1){const g=a[a.length-1];Q(k,g)&&(n=g,a.pop())}const m=a.join(" ").replace(/^"|"$/g,""),w=n??".",x=Q(k,w);if(!x){e.writeln(`grep: ${w}: No such file or directory`);break}const F="/"+x.join("/"),E=[],D=g=>{if(Se(g)&&g.endsWith(".html")){E.push(g);return}W(g)&&(ae(g)||[]).forEach(N=>{const O=g==="/"?"/"+N:`${g}/${N}`;D(O)})};D(F);const B=[];for(const g of E){const L=he(g);L&&L.split(`
`).forEach((N,O)=>{B.push({line:N,file:g,lineNum:O+1})})}const v=new i(B,{keys:["line"],threshold:.4,ignoreLocation:!0,includeScore:!1}).search(m).slice(0,100);v.length?(v.forEach(g=>{const{file:L,lineNum:N,line:O}=g.item;e.writeln(`${d}${L}\x1B[0m:${N}:${O.trim()}`)}),e.writeln(`${v.length} match${v.length===1?"":"es"}`)):e.writeln("grep: no matches");break}case"help":{const n=(x,F)=>x+" ".repeat(Math.max(0,F-x.length)),m=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"grep <pattern> [path]",desc:"fuzzy search markdown files"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${l}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:x,desc:F}of m)e.writeln(`${d}${n(x,14)}\x1B[0m  ${F}`);e.writeln(""),e.writeln(`${l}SHORTCUT        DESCRIPTION\x1B[0m`);const w=[{key:"Tab",desc:"accept autocomplete"},{key:"← / →",desc:"cycle suggestions"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:x,desc:F}of w)e.writeln(`${d}${n(x,14)}\x1B[0m  ${F}`);break}default:e.writeln(`unknown command: ${o}`),e.write("\r")}}function oe(){q&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),q=!1,ne="")}function Ee(s){oe(),s&&(e.write("\x1B[s"),e.write(`\x1B[90m${s}\x1B[0m`),e.write("\x1B[u"),q=!0,ne=s)}function qe(s){return Ke.filter(o=>o.startsWith(s))}function Xe(s){const o=s.lastIndexOf("/"),a=o===-1?"":s.slice(0,o+1),n=o===-1?s:s.slice(o+1),m=Q(k,a||".");if(!m)return[];const w="/"+m.join("/"),E=(ae(w)||[]).filter(D=>D.startsWith(n)).map(D=>{const B=`${w}/${D}`;return a+(W(B)?D+"/":D)});return E.sort((D,B)=>{const V=D.endsWith("/"),v=B.endsWith("/");return V===v?D.localeCompare(B):V?-1:1}),E.slice(0,20)}function se(){const s=R.split(/\s+/),o=s[0]||"",a=s[s.length-1]||"";let n=[];if(s.length===1?n=qe(a):["cd","ls","open","grep"].includes(o)&&(n=Xe(a)),U=n,pe=0,U.length){const w=U[0].slice(a.length);Ee(w)}}function Je(){!q||!ne||(R+=ne,e.write(ne),oe())}function Qe(s){if(!q||U.length<2)return;pe=(pe+s+U.length)%U.length;const o=R.split(/\s+/),a=o[o.length-1]||"",m=U[pe].slice(a.length);Ee(m)}let H="";const Ye=s=>{for(const o of s){const a=o.charCodeAt(0);if(H){if(H+=o,H==="\x1B[C"||H==="\x1B[D"){H="";continue}else H.length>=3&&(H="");continue}if(o==="\x1B"){H="\x1B";continue}switch(a){case 9:{Je(),se();break}case 13:{e.write(`\r
`);const n=R.trim();Ue(n),n&&S.push(n),A=S.length,R="",n==="clear"||e.write(`\r
`),be();break}case 127:{R.length&&(R=R.slice(0,-1),e.write("\b \b")),se();break}default:a>=32&&a<127&&(oe(),R+=o,e.write(o),se())}}};se(),e.onData(Ye),e.onKey(({key:s,domEvent:o})=>{if(o.key==="ArrowUp"||o.key==="ArrowDown"){if(o.preventDefault(),!S.length)return;A===S.length&&(te=R),o.key==="ArrowUp"&&A>0?A--:o.key==="ArrowDown"&&A<S.length&&A++;const a=A===S.length?te:S[A];e.write("\x1B[2K\r"),be(),R=a,e.write(R),oe(),se();return}q&&(o.key==="ArrowRight"||o.key==="ArrowLeft")?(o.preventDefault(),Qe(o.key==="ArrowRight"?1:-1)):q&&!["Tab","Shift","Control","Alt","Meta","ArrowRight","ArrowLeft"].includes(o.key)&&oe()}),e.writeln("Type help for command list."),be()}),Be();var _=Lt();let j;return We(_,t=>Z(T,t),()=>f(T)),He(t=>j=Fe(_,1,"terminal-shell h-full w-full svelte-1asehid",null,j,t),[()=>({focused:f(I)})],Ge),Y(h,_),ze(r,"focusTerminal",de),ze(r,"resizeTerminal",me),Ve({focusTerminal:de,resizeTerminal:me})}var Ct=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-twihms">terminal</span>',1),St=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Collapse terminal">▶</button>'),Rt=ve('<div><div class="md:hidden flex items-center justify-between px-3 py-2 border-b border-zinc-700"><span class="font-mono text-xs text-zinc-400">terminal</span> <button class="text-zinc-300" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function tn(h,r){Me(r,!1);const p=nt(!1);Re(()=>{const i=sessionStorage.getItem("terminalCollapsed");i?p.set(i==="true"):window.innerWidth<768&&(p.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let l=fe(!1);p.subscribe(i=>Z(l,i));function y(){p.update(i=>{const _=!i;return sessionStorage.setItem("terminalCollapsed",_.toString()),_||setTimeout(()=>{f(b)&&f(d)?.resizeTerminal(),f(d)?.focusTerminal()},300),_})}let d=fe(),b=fe(!1);Re(()=>{const i=()=>{Z(b,window.innerWidth<768)},_=t=>{if(!(f(b)||!t.shiftKey)){if(t.key==="ArrowRight"&&!f(l))t.preventDefault(),t.stopImmediatePropagation(),y();else if(t.key==="ArrowLeft")f(l)?(t.preventDefault(),t.stopImmediatePropagation(),y()):(t.preventDefault(),t.stopImmediatePropagation(),f(d)?.focusTerminal());else if(t.key==="ArrowUp"&&!f(l)){t.preventDefault(),t.stopImmediatePropagation();const c=document.activeElement;c&&c.blur()}}};i(),window.addEventListener("resize",i),window.addEventListener("keydown",_,!0);const j=t=>{if(f(b))return;const c=document.activeElement;if(c&&c.classList.contains("xterm-helper-textarea"))return;const u=document.querySelector("main"),e=60;switch(t.key){case"j":(u??window).scrollBy({top:2*e,behavior:"smooth"});break;case"k":(u??window).scrollBy({top:-2*e,behavior:"smooth"});break;case"h":(u??window).scrollBy({left:-e,behavior:"smooth"});break;case"l":(u??window).scrollBy({left:e,behavior:"smooth"});break;default:return}t.preventDefault()};return window.addEventListener("keydown",j),()=>{window.removeEventListener("resize",i),window.removeEventListener("keydown",_,!0),window.removeEventListener("keydown",j)}}),Be();var T=Rt();let I;var P=ce(T),J=Ce(ce(P),2),de=ce(J);{var me=i=>{var _=je("▼");Y(i,_)},ke=i=>{var _=je("▲");Y(i,_)};Le(de,i=>{f(l)?i(me):i(ke,!1)})}le(J),le(P);var ue=Ce(P,2);{var xe=i=>{var _=Ct(),j=rt(_);it(2),Te("click",j,y),Y(i,_)},G=(i,_)=>{{var j=t=>{var c=St();Te("click",c,y),Y(t,c)};Le(i,t=>{f(b)||t(j)},_)}};Le(ue,i=>{!f(b)&&f(l)?i(xe):i(G,!1)})}var M=Ce(ue,2),K=ce(M);let ee;var he=ce(K);We(Tt(he,{$$legacy:!0}),i=>Z(d,i),()=>f(d)),le(K),le(M),le(T),He((i,_)=>{I=Fe(T,1,"h-full flex flex-col bg-zinc-900 desktop-wrapper svelte-twihms",null,I,i),ee=Fe(K,1,"terminal-content body svelte-twihms",null,ee,_)},[()=>({"desktop-collapsed":!f(b)&&f(l),"border-b":f(b)&&!f(l),"border-zinc-700":f(b)&&!f(l)}),()=>({"mobile-collapsed":f(b)&&f(l)})],Ge),Te("click",J,y),Y(h,T),Ve()}export{tn as default};
