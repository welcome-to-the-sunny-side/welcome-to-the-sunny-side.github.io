import{d as Ne,o as be,i as Pe,b as Le,_ as fe,c as ye,w as We,a as ue}from"./router.DsAZkUE9.js";import{h as xe,Z as Be,_ as Ve,M as Te,V as ie,N as G,d,D as Ie,T as V,U as Ce,q as Y,e as Ee,$ as he,W as U,Y as me,X,a0 as $e,S as Ge,a1 as qe}from"./template.Dw7YDvgc.js";import He from"./about.BKDt97ao.js";import Ke from"./cf1422-e.Be3ARA11.js";import Ue from"./cf468-d.CGzVCCu3.js";import Xe from"./counting_problem_tricks.D4tGbFjb.js";import Ye from"./detect_k_neighbours_bip.DwIEFckk.js";import Ze from"./offline_incremental_scc.DjERIihu.js";import Je from"./suffix_tree_funny_construction.BQJjlJ64.js";import Qe from"./home.jkQ9JjAb.js";import et from"./xyz.BvfFwKLB.js";/* empty css                        */function ge(i,n,c,r,h,o){var f=i.__className;if(xe||f!==c||f===void 0){var v=Ne(c,r,o);(!xe||v!==i.getAttribute("class"))&&(v==null?i.removeAttribute("class"):i.className=v),i.__className=c}else if(o&&h!==o)for(var g in o){var L=!!o[g];(h==null||L!==!!h[g])&&i.classList.toggle(g,L)}return o}function Ae(i,n,c){var r=Be(i,n);r&&r.set&&(i[n]=c,Ve(()=>{i[n]=null}))}function tt(i){const n={name:"/",type:"dir",path:"/",children:{}};for(const c of i){const h=c.replace(/^\.\/?/,"").split("/");let o=n,f="";for(let v=0;v<h.length;v++){const g=h[v];f+="/"+g;const L=g.includes(".");o.children||(o.children={}),o.children[g]||(o.children[g]={name:g,type:L?"file":"dir",path:f},L||(o.children[g].children={})),o=o.children[g]}}return n}const nt=Object.keys({"/src/content/about.md":0,"/src/content/algo/blogs/cf1422-e.md":0,"/src/content/algo/blogs/cf468-d.md":0,"/src/content/algo/blogs/counting_problem_tricks.md":0,"/src/content/algo/blogs/detect_k_neighbours_bip.md":0,"/src/content/algo/blogs/offline_incremental_scc.md":0,"/src/content/algo/blogs/suffix_tree_funny_construction.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/xyz.md":0});let se=null;function ot(){if(se)return se;const i=nt.map(n=>n.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return se=tt(i),se}function le(i){const n=i.split("/").filter(Boolean);let c=ot();for(const r of n){if(!c.children||!c.children[r])return null;c=c.children[r]}return c}function re(i){const n=le(i);if(!n||n.type!=="dir"||!n.children)return null;const c=[],r=[];for(const[h,o]of Object.entries(n.children))o.type==="dir"?c.push(h):r.push(h);return c.sort(),r.sort(),[...c,...r]}function pe(i){const n=le(i);return!!n&&n.type==="file"}function W(i){const n=le(i);return!!n&&n.type==="dir"}function B(i,n){if(n==="/")return[];const c=n.startsWith("/"),r=n.split("/").filter(Boolean),h=c?[]:[...i];for(const f of r)f===".."?h.pop():f!=="."&&h.push(f);return le("/"+h.join("/"))?h:null}var st=ie("<div></div>");function rt(i,n){Te(n,!1);const r="\x1B[38;2;100;255;218m",o="\x1B[38;2;255;230;120m",f="\x1B[37m";let v=Y(),g=Y(!0),L,z;function Z(){L?.focus()}function J(){z?.fit()}const ce=Object.assign({"/src/content/about.md":He,"/src/content/algo/blogs/cf1422-e.md":Ke,"/src/content/algo/blogs/cf468-d.md":Ue,"/src/content/algo/blogs/counting_problem_tricks.md":Xe,"/src/content/algo/blogs/detect_k_neighbours_bip.md":Ye,"/src/content/algo/blogs/offline_incremental_scc.md":Ze,"/src/content/algo/blogs/suffix_tree_funny_construction.md":Je,"/src/content/home.md":Qe,"/src/content/misc/xyz.md":et});function Q(T){const M=T.replace(/^\//,"").replace(/\.html$/,".md");return ce["/src/content/"+M]??null}let ee;be(async()=>{G(g,!0);const{default:T}=await fe(async()=>{const{default:t}=await import("./fuse.CvLDeDq6.js");return{default:t}},[]);ee=T;const{Terminal:M}=await fe(async()=>{const{Terminal:t}=await import("./xterm.CszRhTCM.js").then(s=>s.x);return{Terminal:t}},[]),{FitAddon:ae}=await fe(async()=>{const{FitAddon:t}=await import("./addon-fit.xGgdMdBE.js").then(s=>s.a);return{FitAddon:t}},[]),e=new M({theme:{background:"#0f0f0f",foreground:"#d0d0d0",cursor:"rgb(100,255,218)"},fontFamily:"IBM Plex Mono, Menlo, monospace",fontSize:13,letterSpacing:.25,cols:80,rows:24,convertEol:!0}),m=new ae;z=m,e.loadAddon(m),e.open(d(v)),L=e,m.fit(),e.focus();function C(t){G(g,t)}e.textarea?.addEventListener("focus",()=>C(!0)),e.textarea?.addEventListener("blur",()=>C(!1));let l=[],y=["/"],x="";const N=["ls","cd","open","pop","clear","help","grep"];let D=[],te=0,F=!1,K="";const _e=()=>{const t="/"+l.join("/");e.write(`${r}${t}\x1B[0m $ `)};function Re(t){if(!t)return;const[s,...u]=t.split(/\s+/);switch(s){case"ls":{const a=u.filter(k=>k.startsWith("-")),b=a.includes("-R")||a.includes("-r"),_=u.find(k=>!k.startsWith("-"))||".",$=B(l,_);if(!$){e.writeln(`ls: cannot access '${_}': No such file or directory`);break}const P="/"+$.join("/");if(pe(P)){e.writeln(`${W(P)?f:o}${_}\x1B[0m`);break}if(b){const k=[],w=(A,O="")=>{const I=re("/"+A.join("/"))||[];I.forEach((p,S)=>{const R=S===I.length-1,j=R?"└─ ":"├─ ",ve=[...A,p],je="/"+ve.join("/"),ke=W(je),ze=ke?f:o;if(k.push(`${O}${j}${ze}${p}\x1B[0m`),ke){const Me=O+(R?"   ":"│  ");w(ve,Me)}})};w($);for(const A of k)e.writeln(A)}else{const k=re(P)||[];k.forEach((w,A)=>{const I=A===k.length-1?"└─ ":"├─ ",p=W(`${P}/${w}`)?f:o;e.writeln(`${I}${p}${w}\x1B[0m`)})}break}case"cd":{const a=u[0]||"/",b=B(l,a);if(!b){e.writeln(`cd: no such directory: ${a}`);break}const _="/"+b.join("/");if(!W(_)){e.writeln(`cd: not a directory: ${a}`);break}l=b;break}case"open":{const a=u[0];if(!a){e.writeln("open: missing file");break}const b=B(l,a);if(b&&pe("/"+b.join("/"))){const _="/"+b.join("/");y.push(_),ye.push(_)}else e.writeln(`open: file not found: ${a}`);break}case"pop":{if(y.length>1){y.pop();const a=y[y.length-1];ye.push(a)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"grep":{if(!u.length){e.writeln("grep: usage: grep <pattern> [path]");break}let a=null;if(u.length>1){const p=u[u.length-1];B(l,p)&&(a=p,u.pop())}const b=u.join(" ").replace(/^"|"$/g,""),_=a??".",$=B(l,_);if(!$){e.writeln(`grep: ${_}: No such file or directory`);break}const P="/"+$.join("/"),k=[],w=p=>{if(pe(p)&&p.endsWith(".html")){k.push(p);return}W(p)&&(re(p)||[]).forEach(R=>{const j=p==="/"?"/"+R:`${p}/${R}`;w(j)})};w(P);const A=[];for(const p of k){const S=Q(p);S&&S.split(`
`).forEach((R,j)=>{A.push({line:R,file:p,lineNum:j+1})})}const I=new ee(A,{keys:["line"],threshold:.4,ignoreLocation:!0,includeScore:!1}).search(b).slice(0,100);I.length?(I.forEach(p=>{const{file:S,lineNum:R,line:j}=p.item;e.writeln(`${o}${S}\x1B[0m:${R}:${j.trim()}`)}),e.writeln(`${I.length} match${I.length===1?"":"es"}`)):e.writeln("grep: no matches");break}case"help":{const a=($,P)=>$+" ".repeat(Math.max(0,P-$.length)),b=[{cmd:"ls [-R] [path]",desc:"list directory (recursive with -R)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"grep <pattern> [path]",desc:"fuzzy search markdown files"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${r}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:$,desc:P}of b)e.writeln(`${o}${a($,14)}\x1B[0m  ${P}`);e.writeln(""),e.writeln(`${r}SHORTCUT        DESCRIPTION\x1B[0m`);const _=[{key:"Tab",desc:"accept autocomplete"},{key:"← / →",desc:"cycle suggestions"},{key:"Shift+←",desc:"collapse terminal"},{key:"Shift+→",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:$,desc:P}of _)e.writeln(`${o}${a($,14)}\x1B[0m  ${P}`);break}default:e.writeln(`unknown command: ${s}`),e.write("\r")}}function ne(){F&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),F=!1,K="")}function we(t){ne(),t&&(e.write("\x1B[s"),e.write(`\x1B[90m${t}\x1B[0m`),e.write("\x1B[u"),F=!0,K=t)}function Se(t){return N.filter(s=>s.startsWith(t))}function De(t){const s=t.lastIndexOf("/"),u=s===-1?"":t.slice(0,s+1),a=s===-1?t:t.slice(s+1),b=B(l,u||".");if(!b)return[];const _="/"+b.join("/"),k=(re(_)||[]).filter(w=>w.startsWith(a)).map(w=>{const A=`${_}/${w}`;return u+(W(A)?w+"/":w)});return k.sort((w,A)=>{const O=w.endsWith("/"),I=A.endsWith("/");return O===I?w.localeCompare(A):O?-1:1}),k.slice(0,20)}function oe(){const t=x.split(/\s+/),s=t[0]||"",u=t[t.length-1]||"";let a=[];if(t.length===1?a=Se(u):["cd","ls","open","grep"].includes(s)&&(a=De(u)),D=a,te=0,D.length){const _=D[0].slice(u.length);we(_)}}function Fe(){!F||!K||(x+=K,e.write(K),ne())}function de(t){if(!F||D.length<2)return;te=(te+t+D.length)%D.length;const s=x.split(/\s+/),u=s[s.length-1]||"",b=D[te].slice(u.length);we(b)}let E="";const Oe=t=>{for(const s of t){const u=s.charCodeAt(0);if(E){if(E+=s,E==="\x1B[C"){de(1),E="";continue}else if(E==="\x1B[D"){de(-1),E="";continue}else E.length>=3&&(E="");continue}if(s==="\x1B"){E="\x1B";continue}switch(u){case 9:{Fe(),oe();break}case 13:{e.write(`\r
`),Re(x.trim()),x="",e.write(`\r
`),_e();break}case 127:{x.length&&(x=x.slice(0,-1),e.write("\b \b")),oe();break}default:u>=32&&u<127&&(ne(),x+=s,e.write(s),oe())}}};oe(),e.onData(Oe),e.onKey(({key:t,domEvent:s})=>{F&&(s.key==="ArrowRight"||s.key==="ArrowLeft")?(s.preventDefault(),de(s.key==="ArrowRight"?1:-1)):F&&!["Tab","Shift","Control","Alt","Meta","ArrowRight","ArrowLeft"].includes(s.key)&&ne()}),e.writeln("Type help for command list."),_e()}),Pe();var q=st();let H;return Le(q,T=>G(v,T),()=>d(v)),Ie(T=>H=ge(q,1,"terminal-shell h-full w-full svelte-1asehid",null,H,T),[()=>({focused:d(g)})],Ee),V(i,q),Ae(n,"focusTerminal",Z),Ae(n,"resizeTerminal",J),Ce({focusTerminal:Z,resizeTerminal:J})}var it=ie('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-twihms">terminal</span>',1),lt=ie('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Collapse terminal">▶</button>'),ct=ie('<div><div class="md:hidden flex items-center justify-between px-3 py-2 border-b border-zinc-700"><span class="font-mono text-xs text-zinc-400">terminal</span> <button class="text-zinc-300" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function kt(i,n){Te(n,!1);const c=We(!1);be(()=>{const e=sessionStorage.getItem("terminalCollapsed");e?c.set(e==="true"):window.innerWidth<768&&(c.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let r=Y(!1);c.subscribe(e=>G(r,e));function h(){c.update(e=>{const m=!e;return sessionStorage.setItem("terminalCollapsed",m.toString()),m||setTimeout(()=>{d(f)&&d(o)?.resizeTerminal(),d(o)?.focusTerminal()},300),m})}let o=Y(),f=Y(!1);be(()=>{const e=()=>{G(f,window.innerWidth<768)},m=l=>{if(!(d(f)||!l.shiftKey)){if(l.key==="ArrowRight"&&!d(r))l.preventDefault(),l.stopImmediatePropagation(),h();else if(l.key==="ArrowLeft")d(r)?(l.preventDefault(),l.stopImmediatePropagation(),h()):(l.preventDefault(),l.stopImmediatePropagation(),d(o)?.focusTerminal());else if(l.key==="ArrowUp"&&!d(r)){l.preventDefault(),l.stopImmediatePropagation();const y=document.activeElement;y&&y.blur()}}};e(),window.addEventListener("resize",e),window.addEventListener("keydown",m,!0);const C=l=>{if(d(f))return;const y=document.activeElement;if(y&&y.classList.contains("xterm-helper-textarea"))return;const x=document.querySelector("main"),N=60;switch(l.key){case"j":(x??window).scrollBy({top:2*N,behavior:"smooth"});break;case"k":(x??window).scrollBy({top:-2*N,behavior:"smooth"});break;case"h":(x??window).scrollBy({left:-N,behavior:"smooth"});break;case"l":(x??window).scrollBy({left:N,behavior:"smooth"});break;default:return}l.preventDefault()};return window.addEventListener("keydown",C),()=>{window.removeEventListener("resize",e),window.removeEventListener("keydown",m,!0),window.removeEventListener("keydown",C)}}),Pe();var v=ct();let g;var L=U(v),z=me(U(L),2),Z=U(z);{var J=e=>{var m=$e("▼");V(e,m)},ce=e=>{var m=$e("▲");V(e,m)};ue(Z,e=>{d(r)?e(J):e(ce,!1)})}X(z),X(L);var Q=me(L,2);{var ee=e=>{var m=it(),C=Ge(m);qe(2),he("click",C,h),V(e,m)},q=(e,m)=>{{var C=l=>{var y=lt();he("click",y,h),V(l,y)};ue(e,l=>{d(f)||l(C)},m)}};ue(Q,e=>{!d(f)&&d(r)?e(ee):e(q,!1)})}var H=me(Q,2),T=U(H);let M;var ae=U(T);Le(rt(ae,{$$legacy:!0}),e=>G(o,e),()=>d(o)),X(T),X(H),X(v),Ie((e,m)=>{g=ge(v,1,"h-full flex flex-col bg-zinc-900 desktop-wrapper svelte-twihms",null,g,e),M=ge(T,1,"terminal-content body svelte-twihms",null,M,m)},[()=>({"desktop-collapsed":!d(f)&&d(r),"border-b":d(f)&&!d(r),"border-zinc-700":d(f)&&!d(r)}),()=>({"mobile-collapsed":d(f)&&d(r)})],Ee),he("click",z,h),V(i,v),Ce()}export{kt as default};
