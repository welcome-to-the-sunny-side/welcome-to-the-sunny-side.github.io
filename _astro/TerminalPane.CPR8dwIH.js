import{c as nt,o as De,i as Me,b as We,_ as Re,w as st,l as rt,a as je,s as Ce,d as it,e as xe}from"./router.DQB7XzEH.js";import{C as Ge,t as ot,D as lt,L as ct,E as Se,F as d,G as at,I as ft,p as dt,J as ee,K as ut,S as ht,M as mt,N as bt,P as pt,O as te,Q as gt,y as Ve,R as ge,T as ze,U as Z,B as Ke,V as Ie,W as le,X as $e,Y as ce,Z as Be,_ as vt,$ as wt}from"./template.C3ZF97LW.js";/* empty css                        */function Oe(l,r,u){var a=Ge(l,r);a&&a.set&&(l[r]=u,ot(()=>{l[r]=null}))}function Ee(l){return l.ctx?.d??!1}function yt(l,r,u,a){var p=!bt||(u&pt)!==0,h=(u&gt)!==0,g=!1,I;[I,g]=nt(()=>l[r]);var k=ht in l||mt in l,S=(Ge(l,r)?.set??(k&&r in l&&(n=>l[r]=n)))||void 0,A=a,R=!0,E=!1,V=()=>(E=!0,R&&(R=!1,A=a),A);I===void 0&&a!==void 0&&(S&&p&&lt(),I=V(),S&&S(I));var T;if(p)T=()=>{var n=l[r];return n===void 0?V():(R=!0,E=!1,n)};else{var F=Se(()=>l[r]);F.f|=ct,T=()=>{var n=d(F);return n!==void 0&&(A=void 0),n===void 0?A:n}}if(S){var z=l.$$legacy;return function(n,w){return arguments.length>0?((!p||!w||z||g)&&S(w?T():n),n):T()}}var N=!1,j=te(I),$=at(()=>{var n=T(),w=d(j);return N?(N=!1,w):j.v=n});return d($),$.equals=ft,function(n,w){if(arguments.length>0){const e=w?d($):p&&h?dt(n):n;if(!$.equals(e)){if(N=!0,ee(j,e),E&&A!==void 0&&(A=e),Ee($))return n;ut(()=>d($))}return n}return Ee($)?$.v:d($)}}function kt(l){const r={name:"/",type:"dir",path:"/",children:{}};for(const u of l){const p=u.replace(/^\.\/?/,"").split("/");let h=r,g="";for(let I=0;I<p.length;I++){const k=p[I];g+="/"+k;const S=k.includes(".");h.children||(h.children={}),h.children[k]||(h.children[k]={name:k,type:S?"file":"dir",path:g},S||(h.children[k].children={})),h=h.children[k]}}return r}const _t=Object.keys({"/src/content/about.md":0,"/src/content/algo/about.md":0,"/src/content/algo/contests/about.md":0,"/src/content/algo/contests/arc-205.md":0,"/src/content/algo/notes/about.md":0,"/src/content/algo/problems/about.md":0,"/src/content/algo/problems/cf-1967c.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/algo/problems/cf-2056f2.md":0,"/src/content/algo/problems/cf-2113e.md":0,"/src/content/algo/problems/cf-468d.md":0,"/src/content/algo/theory/about.md":0,"/src/content/algo/theory/detect_k_neighbours_bip.md":0,"/src/content/algo/theory/offline_incremental_scc.md":0,"/src/content/algo/theory/suffix_tree_funny_construction.md":0,"/src/content/games/about.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/about.md":0,"/src/content/misc/void.md":0});let me=null;function xt(){if(me)return me;const l=_t.map(r=>r.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return me=kt(l),me}function ve(l){const r=l.split("/").filter(Boolean);let u=xt();for(const a of r){if(!u.children||!u.children[a])return null;u=u.children[a]}return u}function be(l){const r=ve(l);if(!r||r.type!=="dir"||!r.children)return null;const u=[],a=[];for(const[p,h]of Object.entries(r.children))h.type==="dir"?u.push(p):a.push(p);return u.sort(),a.sort(),[...u,...a]}function Ne(l){const r=ve(l);return!!r&&r.type==="file"}function G(l){const r=ve(l);return!!r&&r.type==="dir"}function pe(l,r){if(r==="/")return[];const u=r.startsWith("/"),a=r.split("/").filter(Boolean),p=u?[]:[...l];for(const g of a)g===".."?p.pop():g!=="."&&p.push(g);return ve("/"+p.join("/"))?p:null}var It=ge("<div></div>");function $t(l,r){Ve(r,!1);const a="\x1B[38;2;100;255;218m",h="\x1B[38;2;255;230;120m",g="\x1B[37m";let I=te(),k=yt(r,"isFocused",12,!0),S,A;function R(){S?.focus()}function E(){A?.fit()}let V={};function T(n){return V[n]??1/0}const F={};function z(n,w){const e=F[n];if(e&&(w?e.max!==void 0:e.min!==void 0))return w?typeof e.max=="number"?e.max:-1/0:typeof e.min=="number"?e.min:1/0;let o=w?-1/0:1/0;const C=be(n)||[];for(const c of C){const b=n==="/"?"/"+c:`${n}/${c}`;let v;G(b)?v=z(b,w):b.endsWith(".html")?v=T(b):v=w?-1/0:1/0,o=w?Math.max(o,v):Math.min(o,v)}return F[n]||(F[n]={}),w?F[n].max=o:F[n].min=o,o}function N(n,w,e){const o=e==="desc";return[...w].sort((C,c)=>{const b=n==="/"?"/"+C:`${n}/${C}`,v=n==="/"?"/"+c:`${n}/${c}`;let _=G(b)?z(b,o):T(b),K=G(v)?z(v,o):T(v);Number.isFinite(_)||(_=o?-1/0:1/0),Number.isFinite(K)||(K=o?-1/0:1/0);const f=o?K-_:_-K;return f===0?C.localeCompare(c):f})}De(async()=>{k(!0);try{const t=await fetch("/vfs-date-index.json",{cache:"force-cache"});t.ok&&(V=await t.json())}catch{}const{Terminal:n}=await Re(async()=>{const{Terminal:t}=await import("./xterm.CszRhTCM.js").then(s=>s.x);return{Terminal:t}},[]),{FitAddon:w}=await Re(async()=>{const{FitAddon:t}=await import("./addon-fit.xGgdMdBE.js").then(s=>s.a);return{FitAddon:t}},[]),e=new n({theme:{background:"#0a0a0a",foreground:"#e0e0e0",cursor:"#64ffda",cursorAccent:"#0a0a0a",selectionBackground:"rgba(100, 255, 218, 0.2)",selectionForeground:"#e0e0e0",black:"#0a0a0a",red:"#ff6b6b",green:"#51cf66",yellow:"#ffd43b",blue:"#339af0",magenta:"#f06595",cyan:"#64ffda",white:"#e0e0e0",brightBlack:"#495057",brightRed:"#ff8787",brightGreen:"#69db7c",brightYellow:"#ffe066",brightBlue:"#4dabf7",brightMagenta:"#f783ac",brightCyan:"#7fecec",brightWhite:"#f8f9fa"},cursorBlink:!1,fontFamily:"IBM Plex Mono, SF Mono, Menlo, Monaco, Consolas, monospace",fontSize:14,fontWeight:"400",letterSpacing:.5,cols:80,rows:24,convertEol:!0,allowProposedApi:!0,smoothScrollDuration:120}),o=new w;A=o,e.loadAddon(o),e.open(d(I)),S=e,o.fit(),e.focus();function C(t){k(t)}e.textarea?.addEventListener("focus",()=>C(!0)),e.textarea?.addEventListener("blur",()=>C(!1));let c=[],b=["/"],v=[],_=0,K="",f="",m=0;const Ue=["ls","cd","open","pop","clear","help","skin","skins"];let Y=[],ae=0,U=!1,X="";const fe=()=>{const t="/"+c.join("/");e.write(`${a}${t}\x1B[0m $ `)};function qe(t){if(!t)return;const[s,...x]=t.split(/\s+/);switch(s){case"ls":{const i=x.filter(P=>P.startsWith("-")),y=i.includes("-R")||i.includes("-r"),D=i.includes("-v"),L=x.find(P=>!P.startsWith("-"))||".",B=pe(c,L);if(!B){e.writeln(`ls: cannot access '${L}': No such file or directory`);break}const W="/"+B.join("/");if(Ne(W)){e.writeln(`${G(W)?g:h}${L}\x1B[0m`);break}const O=i.includes("-d")||i.includes("-dl"),J=i.includes("-de"),q=O?"desc":J?"asc":null;if(y){const P=[],re=(Q,we="")=>{let de="/"+Q.join("/"),H=be(de)||[];q&&(H=N(de,H,q)),H.forEach((ie,ye)=>{const oe=ye===H.length-1,ue=oe?"└─ ":"├─ ",ke=[...Q,ie],Pe="/"+ke.join("/"),_e=G(Pe),tt=_e?g:h;let Fe="";if(D&&!_e){const he=T(Pe);Number.isFinite(he)&&(Fe=`\x1B[2m[${new Date(he).toISOString().slice(0,10)}]\x1B[0m `)}if(P.push(`${we}${ue}${Fe}${tt}${ie}\x1B[0m`),_e){const he=we+(oe?"   ":"│  ");re(ke,he)}})};re(B);for(const Q of P)e.writeln(Q)}else{let P=be(W)||[];q&&(P=N(W,P,q)),P.forEach((re,Q)=>{const de=Q===P.length-1?"└─ ":"├─ ",H=`${W}/${re}`,ie=G(H),ye=ie?g:h;let oe="";if(D&&!ie){const ue=T(H.replace(/\.md$/,".html"));Number.isFinite(ue)&&(oe=`\x1B[2m[${new Date(ue).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${de}${oe}${ye}${re}\x1B[0m`)})}break}case"cd":{const i=x[0]||"/",y=pe(c,i);if(!y){e.writeln(`cd: no such directory: ${i}`);break}const D="/"+y.join("/");if(!G(D)){e.writeln(`cd: not a directory: ${i}`);break}c=y;break}case"open":{const i=x[0];if(!i){e.writeln("open: missing file");break}const y=pe(c,i);if(y&&Ne("/"+y.join("/"))){const D="/"+y.join("/");b.push(D),je.push(D)}else e.writeln(`open: file not found: ${i}`);break}case"pop":{if(b.length>1){b.pop();const i=b[b.length-1];je.push(i)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const i=rt();i.forEach((y,D)=>{const L=D===i.length-1?"└─ ":"├─ ";e.writeln(L+y)});break}case"skin":{const i=x[0];if(!i)e.writeln("Usage: skin <name>");else try{st(i),e.writeln(`Now wearing ${i}`)}catch(y){e.writeln(String(y))}break}case"help":{const i=(L,B)=>L+" ".repeat(Math.max(0,B-L.length)),y=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${a}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:L,desc:B}of y)e.writeln(`${h}${i(L,14)}\x1B[0m  ${B}`);e.writeln(""),e.writeln(`${a}SHORTCUT        DESCRIPTION\x1B[0m`);const D=[{key:"Tab",desc:"accept autocomplete"},{key:"Shift+Tab",desc:"cycle suggestions"},{key:"← / →",desc:"move cursor left/right"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:L,desc:B}of D)e.writeln(`${h}${i(L,14)}\x1B[0m  ${B}`);break}default:e.writeln(`unknown command: ${s}`),e.write("\r")}}function ne(){U&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),U=!1,X="")}function Ae(t){if(ne(),!t)return;e.write("\x1B[s");const s=m<f.length?`\x1B[${f.length-m}C`:"";e.write(s),e.write(`\x1B[90m${t}\x1B[0m`),e.write("\x1B[u"),U=!0,X=t}function He(t){return Ue.filter(s=>s.startsWith(t))}function Ye(t){const s=t.lastIndexOf("/"),x=s===-1?"":t.slice(0,s+1),i=s===-1?t:t.slice(s+1),y=pe(c,x||".");if(!y)return[];const D="/"+y.join("/"),W=(be(D)||[]).filter(O=>O.startsWith(i)).map(O=>{const J=`${D}/${O}`;return x+(G(J)?O+"/":O)});return W.sort((O,J)=>{const q=O.endsWith("/"),P=J.endsWith("/");return q===P?O.localeCompare(J):q?-1:1}),W.slice(0,20)}function se(){const t=f.split(/\s+/),s=t[0]||"",x=t[t.length-1]||"";let i=[];if(t.length===1?i=He(x):["cd","ls","open"].includes(s)&&(i=Ye(x)),Y=i,ae=0,Y.length){const D=Y[0].slice(x.length);Ae(D)}}function Xe(){!U||!X||(f=f.slice(0,m)+X+f.slice(m),m+=X.length,m===f.length?e.write(X):Te(),ne())}function Je(){if(!U||Y.length<2)return;ae=(ae+1)%Y.length;const t=f.split(/\s+/),s=t[t.length-1]||"",i=Y[ae].slice(s.length);Ae(i)}function Te(){e.write("\x1B[2K\r"),fe(),e.write(f),m<f.length&&e.write(`\x1B[${f.length-m}D`)}function Le(t){t==="left"&&m>0?(m--,e.write("\x1B[D")):t==="right"&&m<f.length&&(m++,e.write("\x1B[C"))}function Qe(t){if(f=f.slice(0,m)+t+f.slice(m),m++,m===f.length)e.write(t);else{const s=f.slice(m-1);e.write(s),e.write(`\x1B[${s.length-1}D`)}}function Ze(){if(m===0)return;f=f.slice(0,m-1)+f.slice(m),m--,e.write("\x1B[D");const t=f.slice(m)+" ";e.write(t),e.write(`\x1B[${t.length}D`)}let M="";const et=t=>{for(const s of t){const x=s.charCodeAt(0);if(M){if(M+=s,M==="\x1B[C"||M==="\x1B[D"){M="";continue}else M.length>=3&&(M="");continue}if(s==="\x1B"){M="\x1B";continue}switch(x){case 9:{Xe(),se();break}case 13:{e.write(`\r
`);const i=f.trim();qe(i),i&&v.push(i),_=v.length,f="",m=0,i==="clear"||e.write(`\r
`),fe();break}case 127:{Ze(),se();break}default:x>=32&&x<127&&(ne(),Qe(s),se())}}};se(),e.onData(et),e.onKey(({key:t,domEvent:s})=>{if(s.key==="ArrowUp"||s.key==="ArrowDown"){if(s.preventDefault(),!v.length)return;_===v.length&&(K=f),s.key==="ArrowUp"&&_>0?_--:s.key==="ArrowDown"&&_<v.length&&_++,f=_===v.length?K:v[_],m=f.length,Te(),ne(),se();return}if(s.key==="Tab"&&s.shiftKey&&U){s.preventDefault(),Je();return}if(s.key==="ArrowLeft"){s.preventDefault(),Le("left");return}if(s.key==="ArrowRight"){s.preventDefault(),Le("right");return}U&&!["Tab","Shift","Control","Alt","Meta"].includes(s.key)&&ne()}),e.writeln("Type help for command list."),fe()}),Me();var j=It();let $;return We(j,n=>ee(I,n),()=>d(I)),ze(n=>$=Ce(j,1,"terminal-shell h-full w-full svelte-7500li",null,$,n),[()=>({focused:k()})],Se),Z(l,j),Oe(r,"focusTerminal",R),Oe(r,"resizeTerminal",E),Ke({focusTerminal:R,resizeTerminal:E})}var Dt=ge('<button class="desktop-toggle hidden md:flex svelte-4kf8jp" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-4kf8jp">terminal</span>',1),Ct=ge('<button class="desktop-toggle hidden md:flex svelte-4kf8jp" aria-label="Collapse terminal">▶</button>'),St=ge('<div><div class="md:hidden flex items-center justify-between px-4 py-3 mobile-header svelte-4kf8jp"><span class="mobile-title text-xs svelte-4kf8jp">terminal</span> <button class="mobile-toggle svelte-4kf8jp" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function Ft(l,r){Ve(r,!1);const u=it(!1);De(()=>{const e=sessionStorage.getItem("terminalCollapsed");e?u.set(e==="true"):window.innerWidth<768&&(u.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let a=te(!1);u.subscribe(e=>ee(a,e));function p(){u.update(e=>{const o=!e;return sessionStorage.setItem("terminalCollapsed",o.toString()),o||setTimeout(()=>{d(g)&&d(h)?.resizeTerminal(),d(h)?.focusTerminal()},300),o})}let h=te(),g=te(!1),I=te(!1);De(()=>{const e=()=>{ee(g,window.innerWidth<768)},o=c=>{if(!(d(g)||!c.shiftKey)){if(c.key==="ArrowRight"&&!d(a))c.preventDefault(),c.stopImmediatePropagation(),p();else if(c.key==="ArrowLeft")d(a)?(c.preventDefault(),c.stopImmediatePropagation(),p()):(c.preventDefault(),c.stopImmediatePropagation(),d(h)?.focusTerminal());else if(c.key==="ArrowUp"&&!d(a)){c.preventDefault(),c.stopImmediatePropagation();const b=document.activeElement;b&&b.blur()}}};e(),window.addEventListener("resize",e),window.addEventListener("keydown",o,!0);const C=c=>{if(d(g))return;const b=document.activeElement;if(b&&b.classList.contains("xterm-helper-textarea"))return;const v=document.querySelector("main"),_=60;switch(c.key){case"j":(v??window).scrollBy({top:2*_,behavior:"smooth"});break;case"k":(v??window).scrollBy({top:-2*_,behavior:"smooth"});break;case"h":(v??window).scrollBy({left:-_,behavior:"smooth"});break;case"l":(v??window).scrollBy({left:_,behavior:"smooth"});break;default:return}c.preventDefault()};return window.addEventListener("keydown",C),()=>{window.removeEventListener("resize",e),window.removeEventListener("keydown",o,!0),window.removeEventListener("keydown",C)}}),Me();var k=St();let S;var A=le(k),R=$e(le(A),2),E=le(R);{var V=e=>{var o=Be("▼");Z(e,o)},T=e=>{var o=Be("▲");Z(e,o)};xe(E,e=>{d(a)?e(V):e(T,!1)})}ce(R),ce(A);var F=$e(A,2);{var z=e=>{var o=Dt(),C=vt(o);wt(2),Ie("click",C,p),Z(e,o)},N=(e,o)=>{{var C=c=>{var b=Ct();Ie("click",b,p),Z(c,b)};xe(e,c=>{d(g)||c(C)},o)}};xe(F,e=>{!d(g)&&d(a)?e(z):e(N,!1)})}var j=$e(F,2),$=le(j);let n;var w=le($);We($t(w,{get isFocused(){return d(I)},set isFocused(e){ee(I,e)},$$legacy:!0}),e=>ee(h,e),()=>d(h)),ce($),ce(j),ce(k),ze((e,o)=>{S=Ce(k,1,"h-full flex flex-col desktop-wrapper svelte-4kf8jp",null,S,e),n=Ce($,1,"terminal-content body svelte-4kf8jp",null,n,o)},[()=>({"desktop-collapsed":!d(g)&&d(a),focused:d(I)}),()=>({"mobile-collapsed":d(g)&&d(a)})],Se),Ie("click",R,p),Z(l,k),Ke()}export{Ft as default};
