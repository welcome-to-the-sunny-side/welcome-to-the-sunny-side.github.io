import{d as tt,o as Fe,i as Me,b as He,_ as Le,c as je,w as nt,a as Te}from"./router.DsAZkUE9.js";import{h as ze,Z as st,_ as it,M as Ve,V as we,N as Q,d as m,D as Ge,T as J,U as Ke,q as fe,e as Ue,$ as Ce,W as ce,Y as Se,X as le,a0 as Be,S as ot,a1 as rt}from"./template.Dw7YDvgc.js";import ct from"./about.BKDt97ao.js";import lt from"./cf1422-e.Be3ARA11.js";import at from"./cf468-d.CGzVCCu3.js";import ft from"./counting_problem_tricks.D4tGbFjb.js";import dt from"./detect_k_neighbours_bip.DwIEFckk.js";import ut from"./offline_incremental_scc.DjERIihu.js";import mt from"./suffix_tree_funny_construction.BQJjlJ64.js";import ht from"./home.jkQ9JjAb.js";import pt from"./xyz.BvfFwKLB.js";import bt from"./zetamac.D4VJdTGl.js";/* empty css                        */function Ne(a,o,d,l,b,c){var h=a.__className;if(ze||h!==d||h===void 0){var $=tt(d,l,c);(!ze||$!==a.getAttribute("class"))&&($==null?a.removeAttribute("class"):a.className=$),a.__className=d}else if(c&&b!==c)for(var v in c){var C=!!c[v];(b==null||C!==!!b[v])&&a.classList.toggle(v,C)}return c}function We(a,o,d){var l=st(a,o);l&&l.set&&(a[o]=d,it(()=>{a[o]=null}))}function gt(a){const o={name:"/",type:"dir",path:"/",children:{}};for(const d of a){const b=d.replace(/^\.\/?/,"").split("/");let c=o,h="";for(let $=0;$<b.length;$++){const v=b[$];h+="/"+v;const C=v.includes(".");c.children||(c.children={}),c.children[v]||(c.children[v]={name:v,type:C?"file":"dir",path:h},C||(c.children[v].children={})),c=c.children[v]}}return o}const _t=Object.keys({"/src/content/about.md":0,"/src/content/algo/blogs/cf1422-e.md":0,"/src/content/algo/blogs/cf468-d.md":0,"/src/content/algo/blogs/counting_problem_tricks.md":0,"/src/content/algo/blogs/detect_k_neighbours_bip.md":0,"/src/content/algo/blogs/offline_incremental_scc.md":0,"/src/content/algo/blogs/suffix_tree_funny_construction.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/xyz.md":0});let _e=null;function wt(){if(_e)return _e;const a=_t.map(o=>o.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return _e=gt(a),_e}function ve(a){const o=a.split("/").filter(Boolean);let d=wt();for(const l of o){if(!d.children||!d.children[l])return null;d=d.children[l]}return d}function ae(a){const o=ve(a);if(!o||o.type!=="dir"||!o.children)return null;const d=[],l=[];for(const[b,c]of Object.entries(o.children))c.type==="dir"?d.push(b):l.push(b);return d.sort(),l.sort(),[...d,...l]}function Re(a){const o=ve(a);return!!o&&o.type==="file"}function M(a){const o=ve(a);return!!o&&o.type==="dir"}function Z(a,o){if(o==="/")return[];const d=o.startsWith("/"),l=o.split("/").filter(Boolean),b=d?[]:[...a];for(const h of l)h===".."?b.pop():h!=="."&&b.push(h);return ve("/"+b.join("/"))?b:null}var vt=we("<div></div>");function yt(a,o){Ve(o,!1);const l="\x1B[38;2;100;255;218m",c="\x1B[38;2;255;230;120m",h="\x1B[37m";let $=fe(),v=fe(!0),C,Y;function de(){C?.focus()}function ue(){Y?.fit()}const ye=Object.assign({"/src/content/about.md":ct,"/src/content/algo/blogs/cf1422-e.md":lt,"/src/content/algo/blogs/cf468-d.md":at,"/src/content/algo/blogs/counting_problem_tricks.md":ft,"/src/content/algo/blogs/detect_k_neighbours_bip.md":dt,"/src/content/algo/blogs/offline_incremental_scc.md":ut,"/src/content/algo/blogs/suffix_tree_funny_construction.md":mt,"/src/content/home.md":ht,"/src/content/misc/xyz.md":pt}),me=Object.assign({"/src/content/games/zetamac.html":bt});function ke(t){if(!t)return 1/0;const f=/---[\s\S]*?^date:\s*(\d{4}-\d{2}-\d{2})/m.exec(t);if(!f)return 1/0;const p=Date.parse(f[1]);return Number.isNaN(p)?1/0:p}function G(t){const f=he(t);if(f)return ke(f);const p=me["/src/content"+t]??null;if(!p)return 1/0;const e=/<meta\s+name=["']wtss:date["']\s+content=["'](\d{4}-\d{2}-\d{2})["'][^>]*>/i.exec(p);if(!e)return 1/0;const S=Date.parse(e[1]);return Number.isNaN(S)?1/0:S}const H={};function K(t,f){const p=H[t];if(p&&(f?p.max!==void 0:p.min!==void 0))return f?typeof p.max=="number"?p.max:-1/0:typeof p.min=="number"?p.min:1/0;let e=f?-1/0:1/0;const S=ae(t)||[];for(const z of S){const k=t==="/"?"/"+z:`${t}/${z}`;let I;M(k)?I=K(k,f):k.endsWith(".html")?I=G(k):I=f?-1/0:1/0,e=f?Math.max(e,I):Math.min(e,I)}return H[t]||(H[t]={}),f?H[t].max=e:H[t].min=e,e}function ee(t,f,p){const e=p==="desc";return[...f].sort((S,z)=>{const k=t==="/"?"/"+S:`${t}/${S}`,I=t==="/"?"/"+z:`${t}/${z}`;let R=M(k)?K(k,e):G(k),D=M(I)?K(I,e):G(I);Number.isFinite(R)||(R=e?-1/0:1/0),Number.isFinite(D)||(D=e?-1/0:1/0);const te=e?D-R:R-D;return te===0?S.localeCompare(z):te})}function he(t){const f=t.replace(/^\//,"").replace(/\.html$/,".md");return ye["/src/content/"+f]??null}let r;Fe(async()=>{Q(v,!0);const{default:t}=await Le(async()=>{const{default:s}=await import("./fuse.CvLDeDq6.js");return{default:s}},[]);r=t;const{Terminal:f}=await Le(async()=>{const{Terminal:s}=await import("./xterm.CszRhTCM.js").then(n=>n.x);return{Terminal:s}},[]),{FitAddon:p}=await Le(async()=>{const{FitAddon:s}=await import("./addon-fit.xGgdMdBE.js").then(n=>n.a);return{FitAddon:s}},[]),e=new f({theme:{background:"#0f0f0f",foreground:"#d0d0d0",cursor:"rgb(100,255,218)"},fontFamily:"IBM Plex Mono, Menlo, monospace",fontSize:13,letterSpacing:.25,cols:80,rows:24,convertEol:!0}),S=new p;Y=S,e.loadAddon(S),e.open(m($)),C=e,S.fit(),e.focus();function z(s){Q(v,s)}e.textarea?.addEventListener("focus",()=>z(!0)),e.textarea?.addEventListener("blur",()=>z(!1));let k=[],I=["/"],R=[],D=0,te="",F="";const qe=["ls","cd","open","pop","clear","help","grep"];let U=[],pe=0,q=!1,ne="";const xe=()=>{const s="/"+k.join("/");e.write(`${l}${s}\x1B[0m $ `)};function Xe(s){if(!s)return;const[n,...u]=s.split(/\s+/);switch(n){case"ls":{const i=u.filter(y=>y.startsWith("-")),w=i.includes("-R")||i.includes("-r"),x=i.includes("-v"),A=u.find(y=>!y.startsWith("-"))||".",N=Z(k,A);if(!N){e.writeln(`ls: cannot access '${A}': No such file or directory`);break}const O="/"+N.join("/");if(Re(O)){e.writeln(`${M(O)?h:c}${A}\x1B[0m`);break}const L=i.includes("-d")||i.includes("-dl"),W=i.includes("-de"),V=L?"desc":W?"asc":null;if(w){const y=[],_=(T,E="")=>{let P="/"+T.join("/"),X=ae(P)||[];V&&(X=ee(P,X,V)),X.forEach((oe,Ie)=>{const re=Ie===X.length-1,be=re?"└─ ":"├─ ",Ae=[...T,oe],Ee="/"+Ae.join("/"),De=M(Ee),et=De?h:c;let Pe="";if(x&&!De){const ge=G(Ee);Number.isFinite(ge)&&(Pe=`\x1B[2m[${new Date(ge).toISOString().slice(0,10)}]\x1B[0m `)}if(y.push(`${E}${be}${Pe}${et}${oe}\x1B[0m`),De){const ge=E+(re?"   ":"│  ");_(Ae,ge)}})};_(N);for(const T of y)e.writeln(T)}else{let y=ae(O)||[];V&&(y=ee(O,y,V)),y.forEach((_,T)=>{const P=T===y.length-1?"└─ ":"├─ ",X=`${O}/${_}`,oe=M(X),Ie=oe?h:c;let re="";if(x&&!oe){const be=G(X.replace(/\.md$/,".html"));Number.isFinite(be)&&(re=`\x1B[2m[${new Date(be).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${P}${re}${Ie}${_}\x1B[0m`)})}break}case"cd":{const i=u[0]||"/",w=Z(k,i);if(!w){e.writeln(`cd: no such directory: ${i}`);break}const x="/"+w.join("/");if(!M(x)){e.writeln(`cd: not a directory: ${i}`);break}k=w;break}case"open":{const i=u[0];if(!i){e.writeln("open: missing file");break}const w=Z(k,i);if(w&&Re("/"+w.join("/"))){const x="/"+w.join("/");I.push(x),je.push(x)}else e.writeln(`open: file not found: ${i}`);break}case"pop":{if(I.length>1){I.pop();const i=I[I.length-1];je.push(i)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"grep":{if(!u.length){e.writeln("grep: usage: grep <pattern> [path]");break}let i=null;if(u.length>1){const _=u[u.length-1];Z(k,_)&&(i=_,u.pop())}const w=u.join(" ").replace(/^"|"$/g,""),x=i??".",A=Z(k,x);if(!A){e.writeln(`grep: ${x}: No such file or directory`);break}const N="/"+A.join("/"),O=[],L=_=>{if(Re(_)&&_.endsWith(".html")){O.push(_);return}M(_)&&(ae(_)||[]).forEach(E=>{const P=_==="/"?"/"+E:`${_}/${E}`;L(P)})};L(N);const W=[];for(const _ of O){const T=he(_);T&&T.split(`
`).forEach((E,P)=>{W.push({line:E,file:_,lineNum:P+1})})}const y=new r(W,{keys:["line"],threshold:.4,ignoreLocation:!0,includeScore:!1}).search(w).slice(0,100);y.length?(y.forEach(_=>{const{file:T,lineNum:E,line:P}=_.item;e.writeln(`${c}${T}\x1B[0m:${E}:${P.trim()}`)}),e.writeln(`${y.length} match${y.length===1?"":"es"}`)):e.writeln("grep: no matches");break}case"help":{const i=(A,N)=>A+" ".repeat(Math.max(0,N-A.length)),w=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"grep <pattern> [path]",desc:"fuzzy search markdown files"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${l}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:A,desc:N}of w)e.writeln(`${c}${i(A,14)}\x1B[0m  ${N}`);e.writeln(""),e.writeln(`${l}SHORTCUT        DESCRIPTION\x1B[0m`);const x=[{key:"Tab",desc:"accept autocomplete"},{key:"← / →",desc:"cycle suggestions"},{key:"Shift+←",desc:"collapse terminal"},{key:"Shift+→",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:A,desc:N}of x)e.writeln(`${c}${i(A,14)}\x1B[0m  ${N}`);break}default:e.writeln(`unknown command: ${n}`),e.write("\r")}}function se(){q&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),q=!1,ne="")}function Oe(s){se(),s&&(e.write("\x1B[s"),e.write(`\x1B[90m${s}\x1B[0m`),e.write("\x1B[u"),q=!0,ne=s)}function Ye(s){return qe.filter(n=>n.startsWith(s))}function Ze(s){const n=s.lastIndexOf("/"),u=n===-1?"":s.slice(0,n+1),i=n===-1?s:s.slice(n+1),w=Z(k,u||".");if(!w)return[];const x="/"+w.join("/"),O=(ae(x)||[]).filter(L=>L.startsWith(i)).map(L=>{const W=`${x}/${L}`;return u+(M(W)?L+"/":L)});return O.sort((L,W)=>{const V=L.endsWith("/"),y=W.endsWith("/");return V===y?L.localeCompare(W):V?-1:1}),O.slice(0,20)}function ie(){const s=F.split(/\s+/),n=s[0]||"",u=s[s.length-1]||"";let i=[];if(s.length===1?i=Ye(u):["cd","ls","open","grep"].includes(n)&&(i=Ze(u)),U=i,pe=0,U.length){const x=U[0].slice(u.length);Oe(x)}}function Je(){!q||!ne||(F+=ne,e.write(ne),se())}function $e(s){if(!q||U.length<2)return;pe=(pe+s+U.length)%U.length;const n=F.split(/\s+/),u=n[n.length-1]||"",w=U[pe].slice(u.length);Oe(w)}let B="";const Qe=s=>{for(const n of s){const u=n.charCodeAt(0);if(B){if(B+=n,B==="\x1B[C"){$e(1),B="";continue}else if(B==="\x1B[D"){$e(-1),B="";continue}else B.length>=3&&(B="");continue}if(n==="\x1B"){B="\x1B";continue}switch(u){case 9:{Je(),ie();break}case 13:{e.write(`\r
`);const i=F.trim();Xe(i),i&&R.push(i),D=R.length,F="",e.write(`\r
`),xe();break}case 127:{F.length&&(F=F.slice(0,-1),e.write("\b \b")),ie();break}default:u>=32&&u<127&&(se(),F+=n,e.write(n),ie())}}};ie(),e.onData(Qe),e.onKey(({key:s,domEvent:n})=>{if(n.key==="ArrowUp"||n.key==="ArrowDown"){if(n.preventDefault(),!R.length)return;D===R.length&&(te=F),n.key==="ArrowUp"&&D>0?D--:n.key==="ArrowDown"&&D<R.length&&D++;const u=D===R.length?te:R[D];e.write("\x1B[2K\r"),xe(),F=u,e.write(F),se(),ie();return}q&&(n.key==="ArrowRight"||n.key==="ArrowLeft")?(n.preventDefault(),$e(n.key==="ArrowRight"?1:-1)):q&&!["Tab","Shift","Control","Alt","Meta","ArrowRight","ArrowLeft"].includes(n.key)&&se()}),e.writeln("Type help for command list."),xe()}),Me();var g=vt();let j;return He(g,t=>Q($,t),()=>m($)),Ge(t=>j=Ne(g,1,"terminal-shell h-full w-full svelte-1asehid",null,j,t),[()=>({focused:m(v)})],Ue),J(a,g),We(o,"focusTerminal",de),We(o,"resizeTerminal",ue),Ke({focusTerminal:de,resizeTerminal:ue})}var kt=we('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-twihms">terminal</span>',1),xt=we('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Collapse terminal">▶</button>'),$t=we('<div><div class="md:hidden flex items-center justify-between px-3 py-2 border-b border-zinc-700"><span class="font-mono text-xs text-zinc-400">terminal</span> <button class="text-zinc-300" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function zt(a,o){Ve(o,!1);const d=nt(!1);Fe(()=>{const r=sessionStorage.getItem("terminalCollapsed");r?d.set(r==="true"):window.innerWidth<768&&(d.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let l=fe(!1);d.subscribe(r=>Q(l,r));function b(){d.update(r=>{const g=!r;return sessionStorage.setItem("terminalCollapsed",g.toString()),g||setTimeout(()=>{m(h)&&m(c)?.resizeTerminal(),m(c)?.focusTerminal()},300),g})}let c=fe(),h=fe(!1);Fe(()=>{const r=()=>{Q(h,window.innerWidth<768)},g=t=>{if(!(m(h)||!t.shiftKey)){if(t.key==="ArrowRight"&&!m(l))t.preventDefault(),t.stopImmediatePropagation(),b();else if(t.key==="ArrowLeft")m(l)?(t.preventDefault(),t.stopImmediatePropagation(),b()):(t.preventDefault(),t.stopImmediatePropagation(),m(c)?.focusTerminal());else if(t.key==="ArrowUp"&&!m(l)){t.preventDefault(),t.stopImmediatePropagation();const f=document.activeElement;f&&f.blur()}}};r(),window.addEventListener("resize",r),window.addEventListener("keydown",g,!0);const j=t=>{if(m(h))return;const f=document.activeElement;if(f&&f.classList.contains("xterm-helper-textarea"))return;const p=document.querySelector("main"),e=60;switch(t.key){case"j":(p??window).scrollBy({top:2*e,behavior:"smooth"});break;case"k":(p??window).scrollBy({top:-2*e,behavior:"smooth"});break;case"h":(p??window).scrollBy({left:-e,behavior:"smooth"});break;case"l":(p??window).scrollBy({left:e,behavior:"smooth"});break;default:return}t.preventDefault()};return window.addEventListener("keydown",j),()=>{window.removeEventListener("resize",r),window.removeEventListener("keydown",g,!0),window.removeEventListener("keydown",j)}}),Me();var $=$t();let v;var C=ce($),Y=Se(ce(C),2),de=ce(Y);{var ue=r=>{var g=Be("▼");J(r,g)},ye=r=>{var g=Be("▲");J(r,g)};Te(de,r=>{m(l)?r(ue):r(ye,!1)})}le(Y),le(C);var me=Se(C,2);{var ke=r=>{var g=kt(),j=ot(g);rt(2),Ce("click",j,b),J(r,g)},G=(r,g)=>{{var j=t=>{var f=xt();Ce("click",f,b),J(t,f)};Te(r,t=>{m(h)||t(j)},g)}};Te(me,r=>{!m(h)&&m(l)?r(ke):r(G,!1)})}var H=Se(me,2),K=ce(H);let ee;var he=ce(K);He(yt(he,{$$legacy:!0}),r=>Q(c,r),()=>m(c)),le(K),le(H),le($),Ge((r,g)=>{v=Ne($,1,"h-full flex flex-col bg-zinc-900 desktop-wrapper svelte-twihms",null,v,r),ee=Ne(K,1,"terminal-content body svelte-twihms",null,ee,g)},[()=>({"desktop-collapsed":!m(h)&&m(l),"border-b":m(h)&&!m(l),"border-zinc-700":m(h)&&!m(l)}),()=>({"mobile-collapsed":m(h)&&m(l)})],Ue),Ce("click",Y,b),J(a,$),Ke()}export{zt as default};
