<!DOCTYPE html><html lang="en" class="h-full"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Welcome to the Sunny Side!</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-FDGES615HV"></script><script type="module">window.dataLayer=window.dataLayer||[];function a(){dataLayer.push(arguments)}a("js",new Date);a("config","G-FDGES615HV");</script><script type="module">
    import { currentSkin } from '/src/stores/skin.ts';
    currentSkin.subscribe((skin) => {
      const rootCls = `h-full bg-bg text-text ${skin.classes.body}`;
      document.documentElement.className = rootCls;
      document.body.className = rootCls;
      // set CSS variables on :root
      const rs = document.documentElement.style;
      Object.entries(skin.cssVars).forEach(([k,v]) => rs.setProperty(`--${k}`, v));
      if (skin.inlineStyles?.body) {
        Object.assign(document.body.style, skin.inlineStyles.body);
      }
    });
  </script><link rel="stylesheet" href="/_astro/_slug_.B_lpCp7p.css"></head> <body class="h-full"> <div class="h-screen w-screen grid grid-cols-1 md:grid-cols-[1fr_auto] grid-rows-[auto_1fr] md:grid-rows-1"> <!-- Content --> <main class="overflow-y-auto overflow-x-hidden order-2 md:order-none bg-surface text-text transition-colors duration-150 ease-retro"> <div id="ssr-fallback" class="p-4 prose prose-invert max-w-none"><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Zetamac Arithmetic Sprint</title>
  <meta name="wtss:date" content="2025-06-14" />
  <!-- Chart.js for performance graphs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="bg-surface text-text flex flex-col items-center justify-center min-h-screen p-4">
  <!-- Settings Panel -->
  <section id="settings" class="w-full max-w-3xl mx-auto flex flex-col justify-center items-center min-h-[70vh] space-y-8 py-8">
    <header class="space-y-2 w-full flex flex-col items-center">
      <h1 class="text-3xl font-semibold text-accent">Arithmetic Sprint</h1>
      <p class="text-sm text-text-muted">Solve as many problems as you can before the timer runs out.</p>
    </header>

    <!-- Operation Selection -->
    <div class="w-full grid grid-cols-1 sm:grid-cols-2 gap-8">
      <!-- Addition -->
      <label class="flex flex-col items-center gap-4 group">
        <input id="chk-add" type="checkbox" checked class="peer hidden" />
        <span class="text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]">+</span>
        <div class="text-xs text-center space-x-1">
          (<input id="add-min1" type="number" value="2" class="w-12 text-center rounded bg-surface" />
          to
          <input id="add-max1" type="number" value="100" class="w-12 text-center rounded bg-surface" />)
          +
          (<input id="add-min2" type="number" value="2" class="w-12 text-center rounded bg-surface" />
          to
          <input id="add-max2" type="number" value="100" class="w-12 text-center rounded bg-surface" />)
        </div>
      </label>

      <!-- Multiplication -->
      <label class="flex flex-col items-center gap-4 group">
        <input id="chk-mul" type="checkbox" checked class="peer hidden" />
        <span class="text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]
        ">×</span>
        <div class="text-xs text-center space-x-1">
          (<input id="mul-min1" type="number" value="2" class="w-12 text-center rounded bg-surface" />
          to
          <input id="mul-max1" type="number" value="12" class="w-12 text-center rounded bg-surface" />)
          ×
          (<input id="mul-min2" type="number" value="2" class="w-12 text-center rounded bg-surface" />
          to
          <input id="mul-max2" type="number" value="100" class="w-12 text-center rounded bg-surface" />)
        </div>
      </label>

      <!-- Subtraction -->
      <label class="flex flex-col items-center gap-2 group">
        <input id="chk-sub" type="checkbox" checked class="peer hidden" />
        <span title="Uses the addition ranges; problems presented in reverse." class="text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]">−</span>
      </label>

      <!-- Division -->
      <label class="flex flex-col items-center gap-2 group">
        <input id="chk-div" type="checkbox" checked class="peer hidden" />
        <span title="Uses the multiplication ranges; asks for product ÷ first factor." class="text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]">÷</span>
      </label>
    </div>

    <!-- Duration -->
    <div>
      <label class="font-medium flex items-center gap-2">Duration (seconds):
        <input id="duration" type="number" min="5" max="600" value="120" class="w-24 text-center rounded bg-surface" />
      </label>
    </div>

        <!-- Display options -->
    <div class="flex items-center gap-6 flex-wrap text-sm">
      <label class="flex items-center gap-2"><input id="opt-show-timer" type="checkbox" checked class="accent-accent" /> Show timer</label>
      <label class="flex items-center gap-2"><input id="opt-show-counter" type="checkbox" checked class="accent-accent" /> Show counter</label>
    </div>

    <button id="btn-start" class="mt-4 inline-block px-6 py-3 rounded bg-accent text-bg font-semibold hover:bg-accent/90 transition">Start</button>
  </section>

  <!-- Game Panel -->
  <section id="game" class="hidden w-full max-w-3xl mx-auto py-12 flex flex-col items-center gap-8">
    <div id="timer" class="text-accent text-xl font-mono"></div>
    <div id="problem" class="text-4xl font-semibold"></div>
    <input id="answer" type="text" inputmode="numeric" pattern="[0-9]*" autocomplete="off" class="w-48 text-3xl text-center bg-surface rounded focus:outline-none focus:ring-2 focus:ring-accent" />
    <div id="score" class="text-sm text-text-muted"></div>
  </section>

  <!-- Summary Panel -->
  <section id="summary" class="hidden w-full max-w-3xl mx-auto py-12 text-center space-y-6">
    <h2 class="text-2xl font-semibold text-accent">Time's up!</h2>
    <p id="summary-text" class="text-lg"></p>
    <button id="btn-restart" class="px-4 py-2 rounded bg-accent text-bg font-semibold hover:bg-accent/90 transition">Play Again</button>
  </section>

<script>
(function () {
  // Prevent double-initialization when navigating away and back in the SPA
  if (window.__zetamacLoaded) return;
  window.__zetamacLoaded = true;
  const settingsEl = document.getElementById('settings');
  const gameEl = document.getElementById('game');
  const summaryEl = document.getElementById('summary');
  const problemEl = document.getElementById('problem');
  const answerEl = document.getElementById('answer');
  const timerEl = document.getElementById('timer');
  const optShowTimerEl = document.getElementById('opt-show-timer');
  const optShowCounterEl = document.getElementById('opt-show-counter');
  const scoreEl = document.getElementById('score');
  const summaryText = document.getElementById('summary-text');

  let opts = {};
  const runData = [];
  let problemStartTime = 0;
  let currentMistakes = 0;
  let currentType = '';
  let duration = 120;
  let timeLeft = 0;
  let solved = 0;
  let currentAnswer = 0;
  let timerId;

  // Utility
  const randInt = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

  function nextProblem() {
    const pool = [];
    if (opts.add) pool.push('add');
    if (opts.sub) pool.push('sub');
    if (opts.mul) pool.push('mul');
    if (opts.div) pool.push('div');
    if (!pool.length) return;
    currentType = pool[Math.floor(Math.random() * pool.length)];
  const type = currentType;
  problemStartTime = Date.now();
  currentMistakes = 0;

    let a, b, display;
    switch (type) {
      case 'add':
        a = randInt(opts.addMin1, opts.addMax1);
        b = randInt(opts.addMin2, opts.addMax2);
        currentAnswer = a + b;
        display = `${a} + ${b} =`;
        break;
      case 'sub':
        a = randInt(opts.addMin1, opts.addMax1);
        b = randInt(opts.addMin2, opts.addMax2);
        if (b > a) [a, b] = [b, a]; // ensure non-negative result
        currentAnswer = a - b;
        display = `${a} − ${b} =`;
        break;
      case 'mul':
        a = randInt(opts.mulMin1, opts.mulMax1);
        b = randInt(opts.mulMin2, opts.mulMax2);
        currentAnswer = a * b;
        display = `${a} × ${b} =`;
        break;
      case 'div':
      // Division is asked as (product) ÷ (first factor) = ? where answer is second factor
      a = randInt(opts.mulMin1, opts.mulMax1); // first factor (e.g., 2‒12)
      b = randInt(opts.mulMin2, opts.mulMax2); // second factor
      currentAnswer = b; // ask for second factor
      const product = a * b;
      display = `${product} ÷ ${a} =`;
      break;
    }
    problemEl.textContent = display;
    answerEl.value = '';
    answerEl.focus();
  }

  document.getElementById('btn-start').addEventListener('click', () => {
    opts = {
      add: document.getElementById('chk-add').checked,
      sub: document.getElementById('chk-sub').checked,
      mul: document.getElementById('chk-mul').checked,
      div: document.getElementById('chk-div').checked,
      addMin1: +document.getElementById('add-min1').value || 2,
      addMax1: +document.getElementById('add-max1').value || 100,
      addMin2: +document.getElementById('add-min2').value || 2,
      addMax2: +document.getElementById('add-max2').value || 100,
      mulMin1: +document.getElementById('mul-min1').value || 2,
      mulMax1: +document.getElementById('mul-max1').value || 12,
      mulMin2: +document.getElementById('mul-min2').value || 2,
      mulMax2: +document.getElementById('mul-max2').value || 100,
      showTimer: optShowTimerEl.checked,
      showCounter: optShowCounterEl.checked,
    };

    duration = Math.min(600, Math.max(5, +document.getElementById('duration').value || 120));
    timeLeft = duration;
    solved = 0;
    runData.length = 0; // clear data from previous runs

    settingsEl.classList.add('hidden');
    summaryEl.classList.add('hidden');
    gameEl.classList.remove('hidden');

    if (opts.showTimer) timerEl.textContent = timeLeft;
    if (opts.showCounter) scoreEl.textContent = `Solved: 0`; else scoreEl.textContent = '';
    nextProblem();

    clearInterval(timerId);
    timerId = setInterval(() => {
      timeLeft -= 1;
      if (opts.showTimer) timerEl.textContent = timeLeft;
      if (timeLeft <= 0) finish();
    }, 1000);
  });

  function finish() {
    clearInterval(timerId);
    gameEl.classList.add('hidden');
    summaryEl.classList.remove('hidden');

    // aggregate stats
    const byType = {};
    runData.forEach(d => {
      if (!byType[d.type]) byType[d.type] = { count: 0, timeSum: 0, mistakes: 0 };
      byType[d.type].count += 1;
      byType[d.type].timeSum += d.time;
      byType[d.type].mistakes += d.mistakes;
    });

    const ppm = (solved / (duration / 60)).toFixed(1);
    const bestPPM = parseFloat(localStorage.getItem('zetamacBestPPM') || '0');
    const newRecord = ppm > bestPPM;
    if (newRecord) localStorage.setItem('zetamacBestPPM', ppm);

    // build summary HTML (Monkeytype-inspired)
    summaryEl.innerHTML = `
      <div class="flex flex-col md:flex-row gap-8 w-full">
        <div class="flex-1 text-left space-y-4">
          <div class="text-3xl font-bold text-accent">${solved}</div>
          <div class="text-sm">problems solved</div>

          <div class="text-3xl font-bold text-accent">${duration}</div>
          <div class="text-sm">time(s)</div>

          <div class="text-3xl font-bold text-accent">${ppm}</div>
          <div class="text-sm">speed(ppm)</div>
        </div>
        <div class="flex-[2]">
          <canvas id="chart-run" class="w-full h-64"></canvas>
          <canvas id="chart-op" class="w-full h-40 mt-6"></canvas>
        </div>
      </div>
      <button id="btn-restart" class="mt-8 px-4 py-2 rounded bg-accent text-bg font-semibold hover:bg-accent/90 transition">Play Again</button>
    `;

    // chart data
    const times = runData.map(d=>d.time);
    const mistakes = runData.map(d=>d.mistakes);
    const ctx = document.getElementById('chart-run');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: runData.map((_,i)=>i+1),
        datasets: [
          {
            type: 'line',
            label: 'Time (s)',
            data: times,
            borderColor: '#facc15',
            backgroundColor: 'transparent',
            yAxisID: 'y',
            tension: 0.3,
          },
          {
            type: 'bar',
            label: 'Mistakes',
            data: mistakes,
            backgroundColor: 'rgba(239,68,68,0.5)',
            yAxisID: 'y1',
          }
        ]
      },
      options: {
        scales: {
          y: { beginAtZero: true, ticks:{color:'#ddd'}, grid:{color:'#444'}},
          y1: { beginAtZero: true, position:'right', ticks:{color:'#ddd'}, grid:{display:false}},
          x: { ticks:{color:'#ddd'}, grid:{color:'#444'} }
        },
        plugins:{legend:{labels:{color:'#ddd'}}}
      }
    });

    // operation bar chart
    const opLabels = Object.keys(byType).map(t=>({add:'+ ',sub:'− ',mul:'× ',div:'÷ '}[t]||t));
    const opTimes = opLabels.map((_,i)=>{const t=Object.keys(byType)[i];return (byType[t].timeSum/byType[t].count).toFixed(2)});
    const opMist = opLabels.map((_,i)=>{const t=Object.keys(byType)[i];return (byType[t].mistakes/byType[t].count).toFixed(2)});
    const ctx2 = document.getElementById('chart-op');
    new Chart(ctx2, {
      type: 'bar',
      data:{
        labels: opLabels,
        datasets:[
          { label:'Avg Time (s)', data: opTimes, backgroundColor:'#facc15', yAxisID:'y' },
          { label:'Avg Mistakes', data: opMist, backgroundColor:'rgba(239,68,68,0.6)', yAxisID:'y1' }
        ]
      },
      options:{
        scales:{ y:{beginAtZero:true,ticks:{color:'#ddd'}}, y1:{beginAtZero:true, position:'right', ticks:{color:'#ddd'}, grid:{display:false}}, x:{ticks:{color:'#ddd'}}},
        plugins:{legend:{labels:{color:'#ddd'}}}
      }
    });

    // restart listener
    summaryEl.querySelector('#btn-restart').addEventListener('click', ()=>{
      settingsEl.classList.remove('hidden');
      summaryEl.classList.add('hidden');
    });
  }

  answerEl.addEventListener('input', () => {
    const val = answerEl.value.trim();
    if (val === '') return;
    const ansStr = currentAnswer.toString();
    if (!ansStr.startsWith(val)) {
      currentMistakes += 1;
    }
    if (+val === currentAnswer) {
      solved += 1;
      if (opts.showCounter) scoreEl.textContent = `Solved: ${solved}`;
      runData.push({
        type: currentType,
        time: (Date.now() - problemStartTime) / 1000,
        mistakes: currentMistakes
      });
      nextProblem();
    }
  });

  document.getElementById('btn-restart').addEventListener('click', () => {
    settingsEl.classList.remove('hidden');
    summaryEl.classList.add('hidden');
  });
  // global key shortcuts
  document.addEventListener('keydown', (e)=>{
    // determine context
    const inGame = !gameEl.classList.contains('hidden');
    const inSettings = !settingsEl.classList.contains('hidden');
    const inSummary = !summaryEl.classList.contains('hidden');
    if (e.key === 'Escape' && inGame) {
      clearInterval(timerId);
      gameEl.classList.add('hidden');
      settingsEl.classList.remove('hidden');
    } else if (e.key === 'Escape' && inSummary) {
      summaryEl.classList.add('hidden');
      settingsEl.classList.remove('hidden');
    }
    if (e.key === 'Enter') {
      if (!settingsEl.classList.contains('hidden')) {
        document.getElementById('btn-start').click();
      } else if (!summaryEl.classList.contains('hidden')) {
        summaryEl.querySelector('#btn-restart').click();
      }
    }
  });
})();
</script>
</body>
</html></div> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z1qprbG" component-url="/_astro/ContentPane.CWksgNm-.js" component-export="default" renderer-url="/_astro/client.svelte.B5-DceF6.js" props="{&quot;ssrPath&quot;:[0,&quot;/games/zetamac.html&quot;],&quot;ssrHtml&quot;:[0,&quot;&lt;!DOCTYPE html&gt;\n&lt;html lang=\&quot;en\&quot;&gt;\n&lt;head&gt;\n  &lt;meta charset=\&quot;utf-8\&quot; /&gt;\n  &lt;title&gt;Zetamac Arithmetic Sprint&lt;/title&gt;\n  &lt;meta name=\&quot;wtss:date\&quot; content=\&quot;2025-06-14\&quot; /&gt;\n  &lt;!-- Chart.js for performance graphs --&gt;\n  &lt;script src=\&quot;https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js\&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body class=\&quot;bg-surface text-text flex flex-col items-center justify-center min-h-screen p-4\&quot;&gt;\n  &lt;!-- Settings Panel --&gt;\n  &lt;section id=\&quot;settings\&quot; class=\&quot;w-full max-w-3xl mx-auto flex flex-col justify-center items-center min-h-[70vh] space-y-8 py-8\&quot;&gt;\n    &lt;header class=\&quot;space-y-2 w-full flex flex-col items-center\&quot;&gt;\n      &lt;h1 class=\&quot;text-3xl font-semibold text-accent\&quot;&gt;Arithmetic Sprint&lt;/h1&gt;\n      &lt;p class=\&quot;text-sm text-text-muted\&quot;&gt;Solve as many problems as you can before the timer runs out.&lt;/p&gt;\n    &lt;/header&gt;\n\n    &lt;!-- Operation Selection --&gt;\n    &lt;div class=\&quot;w-full grid grid-cols-1 sm:grid-cols-2 gap-8\&quot;&gt;\n      &lt;!-- Addition --&gt;\n      &lt;label class=\&quot;flex flex-col items-center gap-4 group\&quot;&gt;\n        &lt;input id=\&quot;chk-add\&quot; type=\&quot;checkbox\&quot; checked class=\&quot;peer hidden\&quot; /&gt;\n        &lt;span class=\&quot;text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]\&quot;&gt;+&lt;/span&gt;\n        &lt;div class=\&quot;text-xs text-center space-x-1\&quot;&gt;\n          (&lt;input id=\&quot;add-min1\&quot; type=\&quot;number\&quot; value=\&quot;2\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;\n          to\n          &lt;input id=\&quot;add-max1\&quot; type=\&quot;number\&quot; value=\&quot;100\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;)\n          +\n          (&lt;input id=\&quot;add-min2\&quot; type=\&quot;number\&quot; value=\&quot;2\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;\n          to\n          &lt;input id=\&quot;add-max2\&quot; type=\&quot;number\&quot; value=\&quot;100\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;)\n        &lt;/div&gt;\n      &lt;/label&gt;\n\n      &lt;!-- Multiplication --&gt;\n      &lt;label class=\&quot;flex flex-col items-center gap-4 group\&quot;&gt;\n        &lt;input id=\&quot;chk-mul\&quot; type=\&quot;checkbox\&quot; checked class=\&quot;peer hidden\&quot; /&gt;\n        &lt;span class=\&quot;text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]\n        \&quot;&gt;×&lt;/span&gt;\n        &lt;div class=\&quot;text-xs text-center space-x-1\&quot;&gt;\n          (&lt;input id=\&quot;mul-min1\&quot; type=\&quot;number\&quot; value=\&quot;2\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;\n          to\n          &lt;input id=\&quot;mul-max1\&quot; type=\&quot;number\&quot; value=\&quot;12\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;)\n          ×\n          (&lt;input id=\&quot;mul-min2\&quot; type=\&quot;number\&quot; value=\&quot;2\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;\n          to\n          &lt;input id=\&quot;mul-max2\&quot; type=\&quot;number\&quot; value=\&quot;100\&quot; class=\&quot;w-12 text-center rounded bg-surface\&quot; /&gt;)\n        &lt;/div&gt;\n      &lt;/label&gt;\n\n      &lt;!-- Subtraction --&gt;\n      &lt;label class=\&quot;flex flex-col items-center gap-2 group\&quot;&gt;\n        &lt;input id=\&quot;chk-sub\&quot; type=\&quot;checkbox\&quot; checked class=\&quot;peer hidden\&quot; /&gt;\n        &lt;span title=\&quot;Uses the addition ranges; problems presented in reverse.\&quot; class=\&quot;text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]\&quot;&gt;−&lt;/span&gt;\n      &lt;/label&gt;\n\n      &lt;!-- Division --&gt;\n      &lt;label class=\&quot;flex flex-col items-center gap-2 group\&quot;&gt;\n        &lt;input id=\&quot;chk-div\&quot; type=\&quot;checkbox\&quot; checked class=\&quot;peer hidden\&quot; /&gt;\n        &lt;span title=\&quot;Uses the multiplication ranges; asks for product ÷ first factor.\&quot; class=\&quot;text-6xl sm:text-7xl font-mono transition peer-checked:text-accent peer-checked:drop-shadow-[0_0_18px_theme(colors.accent.DEFAULT)]\&quot;&gt;÷&lt;/span&gt;\n      &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Duration --&gt;\n    &lt;div&gt;\n      &lt;label class=\&quot;font-medium flex items-center gap-2\&quot;&gt;Duration (seconds):\n        &lt;input id=\&quot;duration\&quot; type=\&quot;number\&quot; min=\&quot;5\&quot; max=\&quot;600\&quot; value=\&quot;120\&quot; class=\&quot;w-24 text-center rounded bg-surface\&quot; /&gt;\n      &lt;/label&gt;\n    &lt;/div&gt;\n\n        &lt;!-- Display options --&gt;\n    &lt;div class=\&quot;flex items-center gap-6 flex-wrap text-sm\&quot;&gt;\n      &lt;label class=\&quot;flex items-center gap-2\&quot;&gt;&lt;input id=\&quot;opt-show-timer\&quot; type=\&quot;checkbox\&quot; checked class=\&quot;accent-accent\&quot; /&gt; Show timer&lt;/label&gt;\n      &lt;label class=\&quot;flex items-center gap-2\&quot;&gt;&lt;input id=\&quot;opt-show-counter\&quot; type=\&quot;checkbox\&quot; checked class=\&quot;accent-accent\&quot; /&gt; Show counter&lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;button id=\&quot;btn-start\&quot; class=\&quot;mt-4 inline-block px-6 py-3 rounded bg-accent text-bg font-semibold hover:bg-accent/90 transition\&quot;&gt;Start&lt;/button&gt;\n  &lt;/section&gt;\n\n  &lt;!-- Game Panel --&gt;\n  &lt;section id=\&quot;game\&quot; class=\&quot;hidden w-full max-w-3xl mx-auto py-12 flex flex-col items-center gap-8\&quot;&gt;\n    &lt;div id=\&quot;timer\&quot; class=\&quot;text-accent text-xl font-mono\&quot;&gt;&lt;/div&gt;\n    &lt;div id=\&quot;problem\&quot; class=\&quot;text-4xl font-semibold\&quot;&gt;&lt;/div&gt;\n    &lt;input id=\&quot;answer\&quot; type=\&quot;text\&quot; inputmode=\&quot;numeric\&quot; pattern=\&quot;[0-9]*\&quot; autocomplete=\&quot;off\&quot; class=\&quot;w-48 text-3xl text-center bg-surface rounded focus:outline-none focus:ring-2 focus:ring-accent\&quot; /&gt;\n    &lt;div id=\&quot;score\&quot; class=\&quot;text-sm text-text-muted\&quot;&gt;&lt;/div&gt;\n  &lt;/section&gt;\n\n  &lt;!-- Summary Panel --&gt;\n  &lt;section id=\&quot;summary\&quot; class=\&quot;hidden w-full max-w-3xl mx-auto py-12 text-center space-y-6\&quot;&gt;\n    &lt;h2 class=\&quot;text-2xl font-semibold text-accent\&quot;&gt;Time&#39;s up!&lt;/h2&gt;\n    &lt;p id=\&quot;summary-text\&quot; class=\&quot;text-lg\&quot;&gt;&lt;/p&gt;\n    &lt;button id=\&quot;btn-restart\&quot; class=\&quot;px-4 py-2 rounded bg-accent text-bg font-semibold hover:bg-accent/90 transition\&quot;&gt;Play Again&lt;/button&gt;\n  &lt;/section&gt;\n\n&lt;script&gt;\n(function () {\n  // Prevent double-initialization when navigating away and back in the SPA\n  if (window.__zetamacLoaded) return;\n  window.__zetamacLoaded = true;\n  const settingsEl = document.getElementById(&#39;settings&#39;);\n  const gameEl = document.getElementById(&#39;game&#39;);\n  const summaryEl = document.getElementById(&#39;summary&#39;);\n  const problemEl = document.getElementById(&#39;problem&#39;);\n  const answerEl = document.getElementById(&#39;answer&#39;);\n  const timerEl = document.getElementById(&#39;timer&#39;);\n  const optShowTimerEl = document.getElementById(&#39;opt-show-timer&#39;);\n  const optShowCounterEl = document.getElementById(&#39;opt-show-counter&#39;);\n  const scoreEl = document.getElementById(&#39;score&#39;);\n  const summaryText = document.getElementById(&#39;summary-text&#39;);\n\n  let opts = {};\n  const runData = [];\n  let problemStartTime = 0;\n  let currentMistakes = 0;\n  let currentType = &#39;&#39;;\n  let duration = 120;\n  let timeLeft = 0;\n  let solved = 0;\n  let currentAnswer = 0;\n  let timerId;\n\n  // Utility\n  const randInt = (min, max) =&gt; Math.floor(Math.random() * (max - min + 1)) + min;\n\n  function nextProblem() {\n    const pool = [];\n    if (opts.add) pool.push(&#39;add&#39;);\n    if (opts.sub) pool.push(&#39;sub&#39;);\n    if (opts.mul) pool.push(&#39;mul&#39;);\n    if (opts.div) pool.push(&#39;div&#39;);\n    if (!pool.length) return;\n    currentType = pool[Math.floor(Math.random() * pool.length)];\n  const type = currentType;\n  problemStartTime = Date.now();\n  currentMistakes = 0;\n\n    let a, b, display;\n    switch (type) {\n      case &#39;add&#39;:\n        a = randInt(opts.addMin1, opts.addMax1);\n        b = randInt(opts.addMin2, opts.addMax2);\n        currentAnswer = a + b;\n        display = `${a} + ${b} =`;\n        break;\n      case &#39;sub&#39;:\n        a = randInt(opts.addMin1, opts.addMax1);\n        b = randInt(opts.addMin2, opts.addMax2);\n        if (b &gt; a) [a, b] = [b, a]; // ensure non-negative result\n        currentAnswer = a - b;\n        display = `${a} − ${b} =`;\n        break;\n      case &#39;mul&#39;:\n        a = randInt(opts.mulMin1, opts.mulMax1);\n        b = randInt(opts.mulMin2, opts.mulMax2);\n        currentAnswer = a * b;\n        display = `${a} × ${b} =`;\n        break;\n      case &#39;div&#39;:\n      // Division is asked as (product) ÷ (first factor) = ? where answer is second factor\n      a = randInt(opts.mulMin1, opts.mulMax1); // first factor (e.g., 2‒12)\n      b = randInt(opts.mulMin2, opts.mulMax2); // second factor\n      currentAnswer = b; // ask for second factor\n      const product = a * b;\n      display = `${product} ÷ ${a} =`;\n      break;\n    }\n    problemEl.textContent = display;\n    answerEl.value = &#39;&#39;;\n    answerEl.focus();\n  }\n\n  document.getElementById(&#39;btn-start&#39;).addEventListener(&#39;click&#39;, () =&gt; {\n    opts = {\n      add: document.getElementById(&#39;chk-add&#39;).checked,\n      sub: document.getElementById(&#39;chk-sub&#39;).checked,\n      mul: document.getElementById(&#39;chk-mul&#39;).checked,\n      div: document.getElementById(&#39;chk-div&#39;).checked,\n      addMin1: +document.getElementById(&#39;add-min1&#39;).value || 2,\n      addMax1: +document.getElementById(&#39;add-max1&#39;).value || 100,\n      addMin2: +document.getElementById(&#39;add-min2&#39;).value || 2,\n      addMax2: +document.getElementById(&#39;add-max2&#39;).value || 100,\n      mulMin1: +document.getElementById(&#39;mul-min1&#39;).value || 2,\n      mulMax1: +document.getElementById(&#39;mul-max1&#39;).value || 12,\n      mulMin2: +document.getElementById(&#39;mul-min2&#39;).value || 2,\n      mulMax2: +document.getElementById(&#39;mul-max2&#39;).value || 100,\n      showTimer: optShowTimerEl.checked,\n      showCounter: optShowCounterEl.checked,\n    };\n\n    duration = Math.min(600, Math.max(5, +document.getElementById(&#39;duration&#39;).value || 120));\n    timeLeft = duration;\n    solved = 0;\n    runData.length = 0; // clear data from previous runs\n\n    settingsEl.classList.add(&#39;hidden&#39;);\n    summaryEl.classList.add(&#39;hidden&#39;);\n    gameEl.classList.remove(&#39;hidden&#39;);\n\n    if (opts.showTimer) timerEl.textContent = timeLeft;\n    if (opts.showCounter) scoreEl.textContent = `Solved: 0`; else scoreEl.textContent = &#39;&#39;;\n    nextProblem();\n\n    clearInterval(timerId);\n    timerId = setInterval(() =&gt; {\n      timeLeft -= 1;\n      if (opts.showTimer) timerEl.textContent = timeLeft;\n      if (timeLeft &lt;= 0) finish();\n    }, 1000);\n  });\n\n  function finish() {\n    clearInterval(timerId);\n    gameEl.classList.add(&#39;hidden&#39;);\n    summaryEl.classList.remove(&#39;hidden&#39;);\n\n    // aggregate stats\n    const byType = {};\n    runData.forEach(d =&gt; {\n      if (!byType[d.type]) byType[d.type] = { count: 0, timeSum: 0, mistakes: 0 };\n      byType[d.type].count += 1;\n      byType[d.type].timeSum += d.time;\n      byType[d.type].mistakes += d.mistakes;\n    });\n\n    const ppm = (solved / (duration / 60)).toFixed(1);\n    const bestPPM = parseFloat(localStorage.getItem(&#39;zetamacBestPPM&#39;) || &#39;0&#39;);\n    const newRecord = ppm &gt; bestPPM;\n    if (newRecord) localStorage.setItem(&#39;zetamacBestPPM&#39;, ppm);\n\n    // build summary HTML (Monkeytype-inspired)\n    summaryEl.innerHTML = `\n      &lt;div class=\&quot;flex flex-col md:flex-row gap-8 w-full\&quot;&gt;\n        &lt;div class=\&quot;flex-1 text-left space-y-4\&quot;&gt;\n          &lt;div class=\&quot;text-3xl font-bold text-accent\&quot;&gt;${solved}&lt;/div&gt;\n          &lt;div class=\&quot;text-sm\&quot;&gt;problems solved&lt;/div&gt;\n\n          &lt;div class=\&quot;text-3xl font-bold text-accent\&quot;&gt;${duration}&lt;/div&gt;\n          &lt;div class=\&quot;text-sm\&quot;&gt;time(s)&lt;/div&gt;\n\n          &lt;div class=\&quot;text-3xl font-bold text-accent\&quot;&gt;${ppm}&lt;/div&gt;\n          &lt;div class=\&quot;text-sm\&quot;&gt;speed(ppm)&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\&quot;flex-[2]\&quot;&gt;\n          &lt;canvas id=\&quot;chart-run\&quot; class=\&quot;w-full h-64\&quot;&gt;&lt;/canvas&gt;\n          &lt;canvas id=\&quot;chart-op\&quot; class=\&quot;w-full h-40 mt-6\&quot;&gt;&lt;/canvas&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;button id=\&quot;btn-restart\&quot; class=\&quot;mt-8 px-4 py-2 rounded bg-accent text-bg font-semibold hover:bg-accent/90 transition\&quot;&gt;Play Again&lt;/button&gt;\n    `;\n\n    // chart data\n    const times = runData.map(d=&gt;d.time);\n    const mistakes = runData.map(d=&gt;d.mistakes);\n    const ctx = document.getElementById(&#39;chart-run&#39;);\n    new Chart(ctx, {\n      type: &#39;bar&#39;,\n      data: {\n        labels: runData.map((_,i)=&gt;i+1),\n        datasets: [\n          {\n            type: &#39;line&#39;,\n            label: &#39;Time (s)&#39;,\n            data: times,\n            borderColor: &#39;#facc15&#39;,\n            backgroundColor: &#39;transparent&#39;,\n            yAxisID: &#39;y&#39;,\n            tension: 0.3,\n          },\n          {\n            type: &#39;bar&#39;,\n            label: &#39;Mistakes&#39;,\n            data: mistakes,\n            backgroundColor: &#39;rgba(239,68,68,0.5)&#39;,\n            yAxisID: &#39;y1&#39;,\n          }\n        ]\n      },\n      options: {\n        scales: {\n          y: { beginAtZero: true, ticks:{color:&#39;#ddd&#39;}, grid:{color:&#39;#444&#39;}},\n          y1: { beginAtZero: true, position:&#39;right&#39;, ticks:{color:&#39;#ddd&#39;}, grid:{display:false}},\n          x: { ticks:{color:&#39;#ddd&#39;}, grid:{color:&#39;#444&#39;} }\n        },\n        plugins:{legend:{labels:{color:&#39;#ddd&#39;}}}\n      }\n    });\n\n    // operation bar chart\n    const opLabels = Object.keys(byType).map(t=&gt;({add:&#39;+ &#39;,sub:&#39;− &#39;,mul:&#39;× &#39;,div:&#39;÷ &#39;}[t]||t));\n    const opTimes = opLabels.map((_,i)=&gt;{const t=Object.keys(byType)[i];return (byType[t].timeSum/byType[t].count).toFixed(2)});\n    const opMist = opLabels.map((_,i)=&gt;{const t=Object.keys(byType)[i];return (byType[t].mistakes/byType[t].count).toFixed(2)});\n    const ctx2 = document.getElementById(&#39;chart-op&#39;);\n    new Chart(ctx2, {\n      type: &#39;bar&#39;,\n      data:{\n        labels: opLabels,\n        datasets:[\n          { label:&#39;Avg Time (s)&#39;, data: opTimes, backgroundColor:&#39;#facc15&#39;, yAxisID:&#39;y&#39; },\n          { label:&#39;Avg Mistakes&#39;, data: opMist, backgroundColor:&#39;rgba(239,68,68,0.6)&#39;, yAxisID:&#39;y1&#39; }\n        ]\n      },\n      options:{\n        scales:{ y:{beginAtZero:true,ticks:{color:&#39;#ddd&#39;}}, y1:{beginAtZero:true, position:&#39;right&#39;, ticks:{color:&#39;#ddd&#39;}, grid:{display:false}}, x:{ticks:{color:&#39;#ddd&#39;}}},\n        plugins:{legend:{labels:{color:&#39;#ddd&#39;}}}\n      }\n    });\n\n    // restart listener\n    summaryEl.querySelector(&#39;#btn-restart&#39;).addEventListener(&#39;click&#39;, ()=&gt;{\n      settingsEl.classList.remove(&#39;hidden&#39;);\n      summaryEl.classList.add(&#39;hidden&#39;);\n    });\n  }\n\n  answerEl.addEventListener(&#39;input&#39;, () =&gt; {\n    const val = answerEl.value.trim();\n    if (val === &#39;&#39;) return;\n    const ansStr = currentAnswer.toString();\n    if (!ansStr.startsWith(val)) {\n      currentMistakes += 1;\n    }\n    if (+val === currentAnswer) {\n      solved += 1;\n      if (opts.showCounter) scoreEl.textContent = `Solved: ${solved}`;\n      runData.push({\n        type: currentType,\n        time: (Date.now() - problemStartTime) / 1000,\n        mistakes: currentMistakes\n      });\n      nextProblem();\n    }\n  });\n\n  document.getElementById(&#39;btn-restart&#39;).addEventListener(&#39;click&#39;, () =&gt; {\n    settingsEl.classList.remove(&#39;hidden&#39;);\n    summaryEl.classList.add(&#39;hidden&#39;);\n  });\n  // global key shortcuts\n  document.addEventListener(&#39;keydown&#39;, (e)=&gt;{\n    // determine context\n    const inGame = !gameEl.classList.contains(&#39;hidden&#39;);\n    const inSettings = !settingsEl.classList.contains(&#39;hidden&#39;);\n    const inSummary = !summaryEl.classList.contains(&#39;hidden&#39;);\n    if (e.key === &#39;Escape&#39; &amp;&amp; inGame) {\n      clearInterval(timerId);\n      gameEl.classList.add(&#39;hidden&#39;);\n      settingsEl.classList.remove(&#39;hidden&#39;);\n    } else if (e.key === &#39;Escape&#39; &amp;&amp; inSummary) {\n      summaryEl.classList.add(&#39;hidden&#39;);\n      settingsEl.classList.remove(&#39;hidden&#39;);\n    }\n    if (e.key === &#39;Enter&#39;) {\n      if (!settingsEl.classList.contains(&#39;hidden&#39;)) {\n        document.getElementById(&#39;btn-start&#39;).click();\n      } else if (!summaryEl.classList.contains(&#39;hidden&#39;)) {\n        summaryEl.querySelector(&#39;#btn-restart&#39;).click();\n      }\n    }\n  });\n})();\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;&quot;],&quot;ssrFrontmatter&quot;:[0,{}],&quot;ssrFlags&quot;:[0,{}]}" ssr client="load" opts="{&quot;name&quot;:&quot;ContentPane&quot;,&quot;value&quot;:true}" await-children><!--[--><!--[!--><!--[1--><div class="h-full w-full bg-cover bg-center bg-no-repeat" style="background-image: url('/_astro/expoutput-1500w.BYFb0Fuh.webp');"></div><!--]--><!--]--><!--]--><!--astro:end--></astro-island> </main> <!-- Terminal --> <aside class="border-t border-zinc-700 md:border-t-0 md:border-l md:border-zinc-700 order-1 md:order-none"> <astro-island uid="1NBGTk" component-url="/_astro/TerminalPane.DRvAhnyr.js" component-export="default" renderer-url="/_astro/client.svelte.B5-DceF6.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;TerminalPane&quot;,&quot;value&quot;:true}" await-children><!--[--><div class="h-full flex flex-col bg-zinc-900 desktop-wrapper svelte-twihms"><div class="md:hidden flex items-center justify-between px-3 py-2 border-b border-zinc-700"><span class="font-mono text-xs text-zinc-400">terminal</span> <button class="text-zinc-300" aria-label="Toggle terminal"><!--[!-->▲<!--]--></button></div> <!--[1--><button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Collapse terminal">▶</button><!--]--> <div class="flex-1 overflow-hidden"><div class="terminal-content body svelte-twihms"><div class="terminal-shell h-full w-full svelte-1asehid focused"></div><!----></div></div></div><!--]--><!--astro:end--></astro-island> </aside> </div> </body></html>