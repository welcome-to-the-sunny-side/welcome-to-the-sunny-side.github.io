import{o as Re,i as Be,e as We,_ as De,w as et,l as tt,c as Pe,b as Fe,f as nt,a as Le}from"./router.SfJ8fZu9.js";import{a1 as st,M as it,Q as Me,Z as ve,P as J,d as f,D as He,X as Z,Y as Ve,q as fe,e as Ge,a2 as Te,_ as ce,a0 as Ce,$ as le,a3 as je,W as ot,a4 as rt}from"./template.BWGN2QMd.js";import ct from"./about.BKDt97ao.js";import lt from"./cf-468d.CGzVCCu3.js";import at from"./counting_problem_tricks.D4tGbFjb.js";import ft from"./detect_k_neighbours_bip.DwIEFckk.js";import dt from"./offline_incremental_scc.DjERIihu.js";import ut from"./suffix_tree_funny_construction.BQJjlJ64.js";import mt from"./cf-2056f1.C8jEnXjQ.js";import ht from"./home.mgOJEq68.js";import pt from"./xyz.BvfFwKLB.js";import bt from"./zetamac.Bgd4015h.js";/* empty css                        */function ze(h,o,p){var l=st(h,o);l&&l.set&&(h[o]=p,it(()=>{h[o]=null}))}function gt(h){const o={name:"/",type:"dir",path:"/",children:{}};for(const p of h){const y=p.replace(/^\.\/?/,"").split("/");let d=o,b="";for(let T=0;T<y.length;T++){const I=y[T];b+="/"+I;const P=I.includes(".");d.children||(d.children={}),d.children[I]||(d.children[I]={name:I,type:P?"file":"dir",path:b},P||(d.children[I].children={})),d=d.children[I]}}return o}const wt=Object.keys({"/src/content/about.md":0,"/src/content/algo/blogs/cf-468d.md":0,"/src/content/algo/blogs/counting_problem_tricks.md":0,"/src/content/algo/blogs/detect_k_neighbours_bip.md":0,"/src/content/algo/blogs/offline_incremental_scc.md":0,"/src/content/algo/blogs/suffix_tree_funny_construction.md":0,"/src/content/algo/problems/cf-2056f1.md":0,"/src/content/games/zetamac.html":0,"/src/content/home.md":0,"/src/content/misc/xyz.md":0});let _e=null;function _t(){if(_e)return _e;const h=wt.map(o=>o.replace(/^\/src\/content\//,"").replace(/\.md$/,".html"));return _e=gt(h),_e}function ye(h){const o=h.split("/").filter(Boolean);let p=_t();for(const l of o){if(!p.children||!p.children[l])return null;p=p.children[l]}return p}function ae(h){const o=ye(h);if(!o||o.type!=="dir"||!o.children)return null;const p=[],l=[];for(const[y,d]of Object.entries(o.children))d.type==="dir"?p.push(y):l.push(y);return p.sort(),l.sort(),[...p,...l]}function Se(h){const o=ye(h);return!!o&&o.type==="file"}function W(h){const o=ye(h);return!!o&&o.type==="dir"}function Y(h,o){if(o==="/")return[];const p=o.startsWith("/"),l=o.split("/").filter(Boolean),y=p?[]:[...h];for(const b of l)b===".."?y.pop():b!=="."&&y.push(b);return ye("/"+y.join("/"))?y:null}var vt=ve("<div></div>");function yt(h,o){Me(o,!1);const l="\x1B[38;2;100;255;218m",d="\x1B[38;2;255;230;120m",b="\x1B[37m";let T=fe(),I=fe(!0),P,X;function de(){P?.focus()}function ue(){X?.fit()}const ke=Object.assign({"/src/content/about.md":ct,"/src/content/algo/blogs/cf-468d.md":lt,"/src/content/algo/blogs/counting_problem_tricks.md":at,"/src/content/algo/blogs/detect_k_neighbours_bip.md":ft,"/src/content/algo/blogs/offline_incremental_scc.md":dt,"/src/content/algo/blogs/suffix_tree_funny_construction.md":ut,"/src/content/algo/problems/cf-2056f1.md":mt,"/src/content/home.md":ht,"/src/content/misc/xyz.md":pt}),me=Object.assign({"/src/content/games/zetamac.html":bt});function xe(t){if(!t)return 1/0;const c=/---[\s\S]*?^date:\s*(\d{4}-\d{2}-\d{2})/m.exec(t);if(!c)return 1/0;const m=Date.parse(c[1]);return Number.isNaN(m)?1/0:m}function G(t){const c=he(t);if(c)return xe(c);const m=me["/src/content"+t]??null;if(!m)return 1/0;const e=/<meta\s+name=["']wtss:date["']\s+content=["'](\d{4}-\d{2}-\d{2})["'][^>]*>/i.exec(m);if(!e)return 1/0;const C=Date.parse(e[1]);return Number.isNaN(C)?1/0:C}const M={};function K(t,c){const m=M[t];if(m&&(c?m.max!==void 0:m.min!==void 0))return c?typeof m.max=="number"?m.max:-1/0:typeof m.min=="number"?m.min:1/0;let e=c?-1/0:1/0;const C=ae(t)||[];for(const z of C){const k=t==="/"?"/"+z:`${t}/${z}`;let $;W(k)?$=K(k,c):k.endsWith(".html")?$=G(k):$=c?-1/0:1/0,e=c?Math.max(e,$):Math.min(e,$)}return M[t]||(M[t]={}),c?M[t].max=e:M[t].min=e,e}function ee(t,c,m){const e=m==="desc";return[...c].sort((C,z)=>{const k=t==="/"?"/"+C:`${t}/${C}`,$=t==="/"?"/"+z:`${t}/${z}`;let S=W(k)?K(k,e):G(k),A=W($)?K($,e):G($);Number.isFinite(S)||(S=e?-1/0:1/0),Number.isFinite(A)||(A=e?-1/0:1/0);const te=e?A-S:S-A;return te===0?C.localeCompare(z):te})}function he(t){const c=t.replace(/^\//,"").replace(/\.html$/,".md");return ke["/src/content/"+c]??null}let r;Re(async()=>{J(I,!0);const{default:t}=await De(async()=>{const{default:i}=await import("./fuse.CvLDeDq6.js");return{default:i}},[]);r=t;const{Terminal:c}=await De(async()=>{const{Terminal:i}=await import("./xterm.CszRhTCM.js").then(s=>s.x);return{Terminal:i}},[]),{FitAddon:m}=await De(async()=>{const{FitAddon:i}=await import("./addon-fit.xGgdMdBE.js").then(s=>s.a);return{FitAddon:i}},[]),e=new c({theme:{background:"#0f0f0f",foreground:"#d0d0d0",cursor:"rgb(100,255,218)"},fontFamily:"IBM Plex Mono, Menlo, monospace",fontSize:13,letterSpacing:.25,cols:80,rows:24,convertEol:!0}),C=new m;X=C,e.loadAddon(C),e.open(f(T)),P=e,C.fit(),e.focus();function z(i){J(I,i)}e.textarea?.addEventListener("focus",()=>z(!0)),e.textarea?.addEventListener("blur",()=>z(!1));let k=[],$=["/"],S=[],A=0,te="",R="";const Ke=["ls","cd","open","pop","clear","help","grep","skin","skins"];let U=[],pe=0,q=!1,ne="";const be=()=>{const i="/"+k.join("/");e.write(`${l}${i}\x1B[0m $ `)};function Ue(i){if(!i)return;const[s,...a]=i.split(/\s+/);switch(s){case"ls":{const n=a.filter(v=>v.startsWith("-")),u=n.includes("-R")||n.includes("-r"),_=n.includes("-v"),x=a.find(v=>!v.startsWith("-"))||".",F=Y(k,x);if(!F){e.writeln(`ls: cannot access '${x}': No such file or directory`);break}const E="/"+F.join("/");if(Se(E)){e.writeln(`${W(E)?b:d}${x}\x1B[0m`);break}const D=n.includes("-d")||n.includes("-dl"),B=n.includes("-de"),V=D?"desc":B?"asc":null;if(u){const v=[],w=(L,N="")=>{let O="/"+L.join("/"),Q=ae(O)||[];V&&(Q=ee(O,Q,V)),Q.forEach((oe,$e)=>{const re=$e===Q.length-1,ge=re?"└─ ":"├─ ",Ie=[...L,oe],Ne="/"+Ie.join("/"),Ae=W(Ne),Je=Ae?b:d;let Oe="";if(_&&!Ae){const we=G(Ne);Number.isFinite(we)&&(Oe=`\x1B[2m[${new Date(we).toISOString().slice(0,10)}]\x1B[0m `)}if(v.push(`${N}${ge}${Oe}${Je}${oe}\x1B[0m`),Ae){const we=N+(re?"   ":"│  ");w(Ie,we)}})};w(F);for(const L of v)e.writeln(L)}else{let v=ae(E)||[];V&&(v=ee(E,v,V)),v.forEach((w,L)=>{const O=L===v.length-1?"└─ ":"├─ ",Q=`${E}/${w}`,oe=W(Q),$e=oe?b:d;let re="";if(_&&!oe){const ge=G(Q.replace(/\.md$/,".html"));Number.isFinite(ge)&&(re=`\x1B[2m[${new Date(ge).toISOString().slice(0,10)}]\x1B[0m `)}e.writeln(`${O}${re}${$e}${w}\x1B[0m`)})}break}case"cd":{const n=a[0]||"/",u=Y(k,n);if(!u){e.writeln(`cd: no such directory: ${n}`);break}const _="/"+u.join("/");if(!W(_)){e.writeln(`cd: not a directory: ${n}`);break}k=u;break}case"open":{const n=a[0];if(!n){e.writeln("open: missing file");break}const u=Y(k,n);if(u&&Se("/"+u.join("/"))){const _="/"+u.join("/");$.push(_),Pe.push(_)}else e.writeln(`open: file not found: ${n}`);break}case"pop":{if($.length>1){$.pop();const n=$[$.length-1];Pe.push(n)}else e.writeln("pop: history empty");break}case"clear":e.clear();break;case"skins":{const n=tt();n.forEach((u,_)=>{const x=_===n.length-1?"└─ ":"├─ ";e.writeln(x+u)});break}case"skin":{const n=a[0];if(!n)e.writeln("Usage: skin <name>");else try{et(n),e.writeln(`Now wearing ${n}`)}catch(u){e.writeln(String(u))}break}case"grep":{if(!a.length){e.writeln("grep: usage: grep <pattern> [path]");break}let n=null;if(a.length>1){const w=a[a.length-1];Y(k,w)&&(n=w,a.pop())}const u=a.join(" ").replace(/^"|"$/g,""),_=n??".",x=Y(k,_);if(!x){e.writeln(`grep: ${_}: No such file or directory`);break}const F="/"+x.join("/"),E=[],D=w=>{if(Se(w)&&w.endsWith(".html")){E.push(w);return}W(w)&&(ae(w)||[]).forEach(N=>{const O=w==="/"?"/"+N:`${w}/${N}`;D(O)})};D(F);const B=[];for(const w of E){const L=he(w);L&&L.split(`
`).forEach((N,O)=>{B.push({line:N,file:w,lineNum:O+1})})}const v=new r(B,{keys:["line"],threshold:.4,ignoreLocation:!0,includeScore:!1}).search(u).slice(0,100);v.length?(v.forEach(w=>{const{file:L,lineNum:N,line:O}=w.item;e.writeln(`${d}${L}\x1B[0m:${N}:${O.trim()}`)}),e.writeln(`${v.length} match${v.length===1?"":"es"}`)):e.writeln("grep: no matches");break}case"help":{const n=(x,F)=>x+" ".repeat(Math.max(0,F-x.length)),u=[{cmd:"ls [-r] [-d|-dl|-de] [-v] [path]",desc:"list directory (tree with -r, date sort, verbose dates)"},{cmd:"cd <dir>",desc:"change directory"},{cmd:"open <file>",desc:"open file in content pane"},{cmd:"grep <pattern> [path]",desc:"fuzzy search markdown files"},{cmd:"skins",desc:"list available skins"},{cmd:"skin <name>",desc:"wear skin"},{cmd:"pop",desc:"go back"},{cmd:"clear",desc:"clear terminal"},{cmd:"help",desc:"-"}];e.writeln(`${l}COMMAND         DESCRIPTION\x1B[0m`);for(const{cmd:x,desc:F}of u)e.writeln(`${d}${n(x,14)}\x1B[0m  ${F}`);e.writeln(""),e.writeln(`${l}SHORTCUT        DESCRIPTION\x1B[0m`);const _=[{key:"Tab",desc:"accept autocomplete"},{key:"← / →",desc:"cycle suggestions"},{key:"Shift+→",desc:"collapse terminal"},{key:"Shift+←",desc:"expand / focus terminal"},{key:"Shift+↑",desc:"focus content pane"},{key:"h/j/k/l",desc:"scroll content pane (when terminal unfocused)"}];for(const{key:x,desc:F}of _)e.writeln(`${d}${n(x,14)}\x1B[0m  ${F}`);break}default:e.writeln(`unknown command: ${s}`),e.write("\r")}}function se(){q&&(e.write("\x1B[s"),e.write("\x1B[K"),e.write("\x1B[u"),q=!1,ne="")}function Ee(i){se(),i&&(e.write("\x1B[s"),e.write(`\x1B[90m${i}\x1B[0m`),e.write("\x1B[u"),q=!0,ne=i)}function qe(i){return Ke.filter(s=>s.startsWith(i))}function Qe(i){const s=i.lastIndexOf("/"),a=s===-1?"":i.slice(0,s+1),n=s===-1?i:i.slice(s+1),u=Y(k,a||".");if(!u)return[];const _="/"+u.join("/"),E=(ae(_)||[]).filter(D=>D.startsWith(n)).map(D=>{const B=`${_}/${D}`;return a+(W(B)?D+"/":D)});return E.sort((D,B)=>{const V=D.endsWith("/"),v=B.endsWith("/");return V===v?D.localeCompare(B):V?-1:1}),E.slice(0,20)}function ie(){const i=R.split(/\s+/),s=i[0]||"",a=i[i.length-1]||"";let n=[];if(i.length===1?n=qe(a):["cd","ls","open","grep"].includes(s)&&(n=Qe(a)),U=n,pe=0,U.length){const _=U[0].slice(a.length);Ee(_)}}function Xe(){!q||!ne||(R+=ne,e.write(ne),se())}function Ye(i){if(!q||U.length<2)return;pe=(pe+i+U.length)%U.length;const s=R.split(/\s+/),a=s[s.length-1]||"",u=U[pe].slice(a.length);Ee(u)}let H="";const Ze=i=>{for(const s of i){const a=s.charCodeAt(0);if(H){if(H+=s,H==="\x1B[C"||H==="\x1B[D"){H="";continue}else H.length>=3&&(H="");continue}if(s==="\x1B"){H="\x1B";continue}switch(a){case 9:{Xe(),ie();break}case 13:{e.write(`\r
`);const n=R.trim();Ue(n),n&&S.push(n),A=S.length,R="",n==="clear"||e.write(`\r
`),be();break}case 127:{R.length&&(R=R.slice(0,-1),e.write("\b \b")),ie();break}default:a>=32&&a<127&&(se(),R+=s,e.write(s),ie())}}};ie(),e.onData(Ze),e.onKey(({key:i,domEvent:s})=>{if(s.key==="ArrowUp"||s.key==="ArrowDown"){if(s.preventDefault(),!S.length)return;A===S.length&&(te=R),s.key==="ArrowUp"&&A>0?A--:s.key==="ArrowDown"&&A<S.length&&A++;const a=A===S.length?te:S[A];e.write("\x1B[2K\r"),be(),R=a,e.write(R),se(),ie();return}q&&(s.key==="ArrowRight"||s.key==="ArrowLeft")?(s.preventDefault(),Ye(s.key==="ArrowRight"?1:-1)):q&&!["Tab","Shift","Control","Alt","Meta","ArrowRight","ArrowLeft"].includes(s.key)&&se()}),e.writeln("Type help for command list."),be()}),Be();var g=vt();let j;return We(g,t=>J(T,t),()=>f(T)),He(t=>j=Fe(g,1,"terminal-shell h-full w-full svelte-1asehid",null,j,t),[()=>({focused:f(I)})],Ge),Z(h,g),ze(o,"focusTerminal",de),ze(o,"resizeTerminal",ue),Ve({focusTerminal:de,resizeTerminal:ue})}var kt=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Expand terminal">◀</button> <span class="collapsed-label hidden md:block svelte-twihms">terminal</span>',1),xt=ve('<button class="desktop-toggle hidden md:flex svelte-twihms" aria-label="Collapse terminal">▶</button>'),$t=ve('<div><div class="md:hidden flex items-center justify-between px-3 py-2 border-b border-zinc-700"><span class="font-mono text-xs text-zinc-400">terminal</span> <button class="text-zinc-300" aria-label="Toggle terminal"><!></button></div> <!> <div class="flex-1 overflow-hidden"><div><!></div></div></div>');function zt(h,o){Me(o,!1);const p=nt(!1);Re(()=>{const r=sessionStorage.getItem("terminalCollapsed");r?p.set(r==="true"):window.innerWidth<768&&(p.set(!0),sessionStorage.setItem("terminalCollapsed","true"))});let l=fe(!1);p.subscribe(r=>J(l,r));function y(){p.update(r=>{const g=!r;return sessionStorage.setItem("terminalCollapsed",g.toString()),g||setTimeout(()=>{f(b)&&f(d)?.resizeTerminal(),f(d)?.focusTerminal()},300),g})}let d=fe(),b=fe(!1);Re(()=>{const r=()=>{J(b,window.innerWidth<768)},g=t=>{if(!(f(b)||!t.shiftKey)){if(t.key==="ArrowRight"&&!f(l))t.preventDefault(),t.stopImmediatePropagation(),y();else if(t.key==="ArrowLeft")f(l)?(t.preventDefault(),t.stopImmediatePropagation(),y()):(t.preventDefault(),t.stopImmediatePropagation(),f(d)?.focusTerminal());else if(t.key==="ArrowUp"&&!f(l)){t.preventDefault(),t.stopImmediatePropagation();const c=document.activeElement;c&&c.blur()}}};r(),window.addEventListener("resize",r),window.addEventListener("keydown",g,!0);const j=t=>{if(f(b))return;const c=document.activeElement;if(c&&c.classList.contains("xterm-helper-textarea"))return;const m=document.querySelector("main"),e=60;switch(t.key){case"j":(m??window).scrollBy({top:2*e,behavior:"smooth"});break;case"k":(m??window).scrollBy({top:-2*e,behavior:"smooth"});break;case"h":(m??window).scrollBy({left:-e,behavior:"smooth"});break;case"l":(m??window).scrollBy({left:e,behavior:"smooth"});break;default:return}t.preventDefault()};return window.addEventListener("keydown",j),()=>{window.removeEventListener("resize",r),window.removeEventListener("keydown",g,!0),window.removeEventListener("keydown",j)}}),Be();var T=$t();let I;var P=ce(T),X=Ce(ce(P),2),de=ce(X);{var ue=r=>{var g=je("▼");Z(r,g)},ke=r=>{var g=je("▲");Z(r,g)};Le(de,r=>{f(l)?r(ue):r(ke,!1)})}le(X),le(P);var me=Ce(P,2);{var xe=r=>{var g=kt(),j=ot(g);rt(2),Te("click",j,y),Z(r,g)},G=(r,g)=>{{var j=t=>{var c=xt();Te("click",c,y),Z(t,c)};Le(r,t=>{f(b)||t(j)},g)}};Le(me,r=>{!f(b)&&f(l)?r(xe):r(G,!1)})}var M=Ce(me,2),K=ce(M);let ee;var he=ce(K);We(yt(he,{$$legacy:!0}),r=>J(d,r),()=>f(d)),le(K),le(M),le(T),He((r,g)=>{I=Fe(T,1,"h-full flex flex-col bg-zinc-900 desktop-wrapper svelte-twihms",null,I,r),ee=Fe(K,1,"terminal-content body svelte-twihms",null,ee,g)},[()=>({"desktop-collapsed":!f(b)&&f(l),"border-b":f(b)&&!f(l),"border-zinc-700":f(b)&&!f(l)}),()=>({"mobile-collapsed":f(b)&&f(l)})],Ge),Te("click",X,y),Z(h,T),Ve()}export{zt as default};
